import{_ as c}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Bc44eTII.js";import{d as m,I as u,M as p,b as f,f as g,g as h,o as x,w as y,a as s,j as b,u as w,P as k}from"./admin-BXgqhMOc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},j={class:"ag-theme-alpine",style:{width:"100%","min-height":"300px"}},D=m({__name:"PayrollMine",setup(v){const i=u(),n=p(),r=f([]),o={resizable:!0,sortable:!0},l=[{headerName:"Periode",field:"period_label",flex:1},{headerName:"Status",field:"status",width:150,cellRenderer:t=>{const e={pending:"Pending",locked:"Selesai",transferred:"Ditransfer"},a=document.createElement("span");return a.className="inline-block rounded-full px-3 py-1 text-xs font-medium bg-gray-100 text-gray-800",a.textContent=e[t.value]||t.value||"",a}},{headerName:"Total",field:"total",width:160,cellRenderer:t=>{const e=document.createElement("span");return e.className="text-sm font-medium text-gray-800",e.textContent=t.value?`Rp ${t.value.toLocaleString()}`:"Rp 0",e}},{headerName:"Actions",field:"actions",width:160,cellStyle:{display:"flex",justifyContent:"center",alignItems:"center"},cellRenderer:t=>{const e=document.createElement("div");e.className="flex items-center justify-center gap-3";const a=document.createElement("button");return a.className="flex items-center justify-center px-3 py-1 rounded-lg text-white bg-brand-500 hover:bg-brand-600 text-sm",a.innerText="Cetak Slip",a.onclick=async()=>{try{(await(await fetch("/admin/api/debug-auth",{credentials:"same-origin"})).json()).authenticated?window.open(`/admin/operasional/payroll/periods/${t.data.period_id}/records/${t.data.id}/slip?format=pdf`,"_blank"):(n.error("Sesi kadaluarsa, silakan masuk kembali"),i.push("/signin"))}catch{n.error("Gagal memeriksa status autentikasi")}},e.appendChild(a),e}}];return g(async()=>{try{const t=await fetch("/admin/api/operasional/payroll/me/list",{credentials:"same-origin"}),e=await t.json();t.ok&&e.success?r.value=e.data:n.error(e.message||"Gagal mengambil data slip")}catch{n.error("Gagal mengambil slip gaji")}}),(t,e)=>(x(),h(c,null,{default:y(()=>[s("div",_,[e[0]||(e[0]=s("div",{class:"mb-6 flex items-center justify-between"},[s("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Slip Gaji Saya")],-1)),s("div",j,[b(w(k),{class:"ag-theme-alpine",style:{width:"100%","min-height":"300px"},columnDefs:l,rowData:r.value,defaultColDef:o,pagination:!0,paginationPageSize:20,animateRows:!0,domLayout:"autoHeight"},null,8,["rowData"])])])]),_:1}))}});export{D as default};
