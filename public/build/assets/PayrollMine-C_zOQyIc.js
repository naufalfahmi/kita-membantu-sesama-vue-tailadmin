import{_ as c}from"./AdminLayout.vue_vue_type_script_setup_true_lang-oPOPF8GL.js";import{d as m,I as u,M as p,b as f,f as g,g as x,o as h,w as b,a as s,j as y,u as w,S as k}from"./admin-CAtNzhB-.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},v={class:"ag-theme-alpine",style:{width:"100%","min-height":"300px"}},E=m({__name:"PayrollMine",setup(C){const l=u(),r=p(),i=f([]),o={resizable:!0,sortable:!0},d=[{headerName:"Periode",field:"period_label",flex:1},{headerName:"Status",field:"status",width:150,cellRenderer:t=>{const e={pending:"Pending",locked:"Selesai",transferred:"Ditransfer"},a={pending:"bg-yellow-100 text-yellow-800",locked:"bg-green-100 text-green-800",transferred:"bg-blue-100 text-blue-800"},n=document.createElement("span");return n.className=`inline-block rounded-full px-3 py-1 text-xs font-medium ${a[t.value]||"bg-gray-100 text-gray-800"}`,n.textContent=e[t.value]||t.value||"",n}},{headerName:"Total",field:"total",width:160,cellRenderer:t=>{const e=document.createElement("span");return e.className="text-sm font-medium text-gray-800",e.textContent=t.value?`Rp ${t.value.toLocaleString()}`:"Rp 0",e}},{headerName:"Bukti",field:"transfer_proof",width:140,cellRenderer:t=>{const e=document.createElement("div");if(t.data&&t.data.transfer_proof){const a=document.createElement("a");a.href=`/storage/${t.data.transfer_proof}`,a.target="_blank",a.className="text-sm text-brand-500 hover:underline",a.textContent="Lihat Bukti",e.appendChild(a)}else{const a=document.createElement("span");a.className="text-sm text-gray-500",a.textContent="â€”",e.appendChild(a)}return e}},{headerName:"Actions",field:"actions",width:160,cellStyle:{display:"flex",justifyContent:"center",alignItems:"center"},cellRenderer:t=>{const e=document.createElement("div");e.className="flex items-center justify-center gap-3";const a=document.createElement("button");return a.className="flex items-center justify-center px-3 py-1 rounded-lg text-white bg-brand-500 hover:bg-brand-600 text-sm",a.innerText="Cetak Slip",a.onclick=async()=>{try{(await(await fetch("/admin/api/debug-auth",{credentials:"same-origin"})).json()).authenticated?window.open(`/admin/operasional/payroll/periods/${t.data.period_id}/records/${t.data.id}/slip?format=pdf`,"_blank"):(r.error("Sesi kadaluarsa, silakan masuk kembali"),l.push("/signin"))}catch{r.error("Gagal memeriksa status autentikasi")}},e.appendChild(a),e}}];return g(async()=>{try{const t=await fetch("/admin/api/operasional/payroll/me/list",{credentials:"same-origin"}),e=await t.json();t.ok&&e.success?i.value=e.data:r.error(e.message||"Gagal mengambil data slip")}catch{r.error("Gagal mengambil slip gaji")}}),(t,e)=>(h(),x(c,null,{default:b(()=>[s("div",_,[e[0]||(e[0]=s("div",{class:"mb-6 flex items-center justify-between"},[s("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Slip Gaji Saya")],-1)),s("div",v,[y(w(k),{class:"ag-theme-alpine",style:{width:"100%","min-height":"300px"},columnDefs:d,rowData:i.value,defaultColDef:o,pagination:!0,paginationPageSize:20,animateRows:!0,domLayout:"autoHeight"},null,8,["rowData"])])])]),_:1}))}});export{E as default};
