import{d as ot,H as nt,I as lt,L as at,b as j,f as B,A as U,W as it,g as rt,o as h,w as dt,a as t,t as a,m as V,c as y,F,l as A,k as i,v as p,O as N,i as L,q as O,n as w,u as ut}from"./admin-BPBeAxOw.js";import{_ as pt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CjyN9wNF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ct={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 pb-24 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},_t={class:"mb-4"},mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ht={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},bt={class:"flex items-center justify-between mb-3"},yt={class:"flex items-center gap-2"},vt={class:"text-sm text-gray-500"},ft={class:"font-medium"},gt={class:"w-full table-auto border-collapse"},xt={class:"p-2"},wt={class:"p-2"},kt=["onUpdate:modelValue"],qt={class:"p-2"},Ct=["onUpdate:modelValue"],Ut={class:"p-2"},Tt=["onUpdate:modelValue"],It={class:"p-2"},jt=["onUpdate:modelValue","onInput"],Vt={class:"p-2"},Nt=["onUpdate:modelValue"],Pt={class:"p-2"},$t={class:""},St={class:"p-2 relative"},Mt={class:"flex items-center justify-end"},Rt=["onClick"],Ht={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},Xt={class:"flex flex-col gap-1"},Ft=["onClick"],At=["onClick"],Lt={class:"border-t mt-2 pt-2"},Ot=["onClick"],Dt={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},Et={class:"flex items-center justify-between mb-3"},Kt={class:"flex items-center gap-2"},Jt={class:"text-sm text-gray-500"},zt={class:"font-medium"},Gt={class:"w-full table-auto border-collapse"},Bt={class:"p-2"},Wt={class:"p-2"},Qt=["onUpdate:modelValue"],Yt={class:"p-2"},Zt=["onUpdate:modelValue"],te={class:"p-2"},ee=["onUpdate:modelValue"],se={class:"p-2"},oe=["onUpdate:modelValue","onInput"],ne={class:"p-2"},le=["onUpdate:modelValue"],ae={class:"p-2"},ie={class:""},re={class:"p-2 relative"},de={class:"flex items-center justify-end"},ue=["onClick"],pe={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},ce={class:"flex flex-col gap-1"},_e=["onClick"],me=["onClick"],he={class:"border-t mt-2 pt-2"},be=["onClick"],ye={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},ve={class:"flex items-center justify-between mb-3"},fe={class:"flex items-center gap-2"},ge={class:"text-sm text-gray-500"},xe={class:"font-medium"},we={class:"w-full table-auto border-collapse"},ke={class:"p-2"},qe={class:"p-2"},Ce=["onUpdate:modelValue"],Ue={class:"p-2"},Te=["onUpdate:modelValue"],Ie={class:"p-2"},je=["onUpdate:modelValue"],Ve={class:"p-2"},Ne=["onUpdate:modelValue","onInput"],Pe={class:"p-2"},$e=["onUpdate:modelValue"],Se={class:"p-2"},Me={class:""},Re={class:"p-2 relative"},He={class:"flex items-center justify-end"},Xe=["onClick"],Fe={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},Ae={class:"flex flex-col gap-1"},Le=["onClick"],Oe=["onClick"],De={class:"border-t mt-2 pt-2"},Ee=["onClick"],Ke={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},Je={class:"flex items-center justify-between mb-3"},ze={class:"flex items-center gap-2"},Ge={class:"text-sm text-gray-500"},Be={class:"font-medium"},We={class:"w-full table-auto border-collapse"},Qe={class:"p-2"},Ye={class:"p-2"},Ze=["onUpdate:modelValue"],ts={class:"p-2"},es=["onUpdate:modelValue"],ss={class:"p-2"},os=["onUpdate:modelValue"],ns={class:"p-2"},ls=["onUpdate:modelValue","onInput"],as={class:"p-2"},is=["onUpdate:modelValue"],rs={class:"p-2"},ds={class:""},us={class:"p-2 relative"},ps={class:"flex items-center justify-end"},cs=["onClick"],_s={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},ms={class:"flex flex-col gap-1"},hs=["onClick"],bs=["onClick"],ys={class:"border-t mt-2 pt-2"},vs=["onClick"],fs={class:"mt-4 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},gs={class:"text-sm text-gray-700"},xs={class:"flex justify-between"},ws={class:"font-semibold"},ks={class:"flex justify-between"},qs={class:"font-semibold"},Cs={class:"flex justify-between"},Us={class:"font-semibold"},Ts={class:"flex justify-between"},Is={class:"font-semibold"},js={class:"flex justify-between"},Vs={class:"font-semibold text-lg"},Ns={class:"sticky bottom-0 left-0 right-0 z-40 bg-white/90 border-t dark:bg-white/[0.03]"},Ps={class:"max-w-6xl mx-auto px-5 py-3 flex items-center justify-between gap-4"},$s={class:"flex-1"},Ss={class:"text-sm text-gray-500"},Ms={class:"font-semibold"},Rs={class:"flex items-center gap-3"},Hs={class:"flex items-center gap-3"},Os=ot({__name:"PayrollRecordEdit",setup(Xs){const k=nt(),W=lt(),b=at(),_=j({}),c=j([]),Q=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],Y=n=>{if(!n)return"-";const e=n.month?Q[(n.month||1)-1]:"",d=n.year||"",l=n.status?` Â· ${n.status}`:"";return`${e} ${d}${l}`},T=async()=>{var l;const n=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");return n||(await(await fetch("/admin/api/csrf-token",{credentials:"same-origin"})).json()).csrf_token||""},P=async()=>{const n=k.params.periodId,e=k.params.recordId,l=await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{credentials:"same-origin"})).json();if(!l.success){b.error("Gagal memuat data");return}_.value=l.data,_.value.status||(_.value.status="pending"),c.value=(l.data.items||[]).map(s=>({...s,qty:Number(s.qty),unit_value:Number(s.unit_value),qty_type:s.qty_type==="fixed"?"multiplier":s.qty_type}))};B(async()=>{await P(),Z()});const Z=()=>{const n=[{description:"Gaji Pokok",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Uang Makan",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Uang Transport",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Dana Kolekan",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Kotak Home",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Kotak Publik",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Qurban",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Tunjangan Jabatan",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"THR",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Perjalanan Dinas",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Lembur",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Tidak Masuk",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"deduction"},{description:"Terlambat",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"deduction"}];for(const e of n)c.value.some(l=>(l.description||"").toLowerCase()===e.description.toLowerCase())||c.value.push({id:null,_tempId:String(Date.now())+Math.random().toString(36).substr(2,5),description:e.description,qty:e.qty,qty_type:e.qty_type,unit:e.unit,unit_value:e.unit_value,amount:0,group:e.group})},$=(n="penghasilan")=>{c.value.push({id:null,_tempId:String(Date.now())+Math.random().toString(36).substr(2,5),description:"",qty:0,qty_type:"multiplier",unit:"",unit_value:0,amount:0,group:n})},S=async n=>{if(n.id){const e=k.params.periodId,d=k.params.recordId,l=await T();if(!(await(await fetch(`/admin/api/operasional/payroll/periods/${e}/records/${d}/items/${n.id}`,{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-TOKEN":l,"X-Requested-With":"XMLHttpRequest"}})).json()).success){b.error("Gagal menghapus item");return}b.success("Item dihapus"),P()}else c.value=c.value.filter(e=>e!==n)},M=j(null);j(null);const tt=async()=>{const n=k.params.periodId,e=k.params.recordId;if(_.value.status&&_.value.status!=="pending")try{const o=await T();let u;if(M.value){const g=new FormData;g.append("status",_.value.status),g.append("transfer_proof",M.value),u=await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{method:"PUT",headers:{"X-CSRF-TOKEN":o,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:g})}else u=await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({status:_.value.status})});const f=await u.json();if(!f.success){if(f.errors){const g=Object.keys(f.errors)[0];b.error(f.errors[g][0])}else f.message?b.error(f.message):b.error("Gagal mengubah status");return}await P(),b.success("Perubahan status tersimpan");return}catch{b.error("Gagal mengubah status");return}const d={};for(let o=0;o<c.value.length;o++){const u=c.value[o],f={description:u.description,qty:Math.round(Number(u.qty)||0),qty_type:u.qty_type==="fixed"?"multiplier":u.qty_type,unit:u.unit,unit_value:u.unit_value,group:u.group||q(u),order_index:o};if(u.id){const g=await T(),C=await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}/items/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":g,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(f)})).json();if(!C.success){b.error("Gagal mengubah item");return}c.value[o]={...C.data}}else{const g=await T(),C=await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}/items`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":g,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(f)})).json();if(!C.success){b.error("Gagal menambah item");return}u._tempId&&(d[u._tempId]=C.data.id),c.value[o]={...C.data}}}const l=await T();let s;if(M.value){const o=new FormData;o.append("status",_.value.status),o.append("transfer_proof",M.value),s=await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{method:"PUT",headers:{"X-CSRF-TOKEN":l,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:o})}else s=await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({status:_.value.status})});if(!(await s.json()).success){b.error("Gagal mengubah status");return}await P(),b.success("Perubahan tersimpan")},I=n=>n.qty_type==="fixed"||n.qty_type==="multiplier"?(Number(n.qty)||0)*(Number(n.unit_value)||0):n.qty_type==="percent"?(Number(n.qty)||0)/100*(Number(n.unit_value)||0):0,m=n=>{const e=Number(n||0);return`Rp. ${new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}`},q=n=>{if(n.group)return n.group;const e=(n.description||"").toLowerCase(),d=["gaji pokok","uang makan","uang transport"],l=["dana kolekan","kotak home","kotak publik","qurban"],s=["tunjangan jabatan","thr","perjalanan dinas","lembur"],v=["tidak masuk","terlambat"];return d.includes(e)?"penghasilan":l.includes(e)?"fundraising":s.includes(e)?"other":v.includes(e)?"deduction":"other"},R=n=>c.value.reduce((e,d)=>{if(q(d)===n){const l=I(d);return e+l}return e},0),D=U(()=>R("penghasilan")),E=U(()=>R("fundraising")),K=U(()=>R("other")),J=U(()=>R("deduction")),et=U(()=>Number(D.value)+Number(E.value)+Number(K.value)),z=U(()=>Number(et.value)-Number(J.value)),r=j(null),H=(n,e)=>{e&&e.stopPropagation();const d=n.id||n._tempId;r.value=r.value===d?null:d},x=(n,e)=>{e==="fixed"&&(e="multiplier"),n.qty_type=e,e==="percent"?((!n.unit||n.unit==="")&&(n.unit="%"),(n.unit_value===null||n.unit_value===void 0)&&(n.unit_value=0)):n.unit==="%"&&(n.unit=""),r.value=null},X=n=>{const e=(n.unit||"").toString();e.includes("%")?(n.qty_type="percent",e.trim()||(n.unit="%"),(n.unit_value===null||n.unit_value===void 0)&&(n.unit_value=0)):n.qty_type==="percent"&&(n.qty_type="multiplier",n.unit==="%"&&(n.unit=""))},G=()=>{r.value=null};return B(()=>{document.addEventListener("click",G)}),it(()=>{document.removeEventListener("click",G)}),(n,e)=>(h(),rt(pt,null,{default:dt(()=>{var d,l;return[t("div",ct,[e[41]||(e[41]=t("div",{class:"mb-6 flex items-center justify-between"},[t("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Edit Payroll Record"),t("div",{class:"flex items-center gap-3"})],-1)),t("div",_t,[t("div",mt,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium"},"Karyawan",-1)),t("div",null,a((d=_.value.employee)==null?void 0:d.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium"},"No. Induk",-1)),t("div",null,a(((l=_.value.employee)==null?void 0:l.no_induk)||"-"),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium"},"Periode",-1)),t("div",null,a(Y(_.value.period)),1)])])]),t("div",null,[t("div",ht,[t("div",bt,[e[10]||(e[10]=t("h4",{class:"font-medium"},"Penghasilan",-1)),t("div",yt,[t("div",vt,[e[9]||(e[9]=V("Total: ",-1)),t("span",ft,a(m(D.value)),1)]),t("button",{onClick:e[0]||(e[0]=s=>$("penghasilan")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",gt,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),y(F,null,A(c.value.filter(s=>q(s)==="penghasilan"),(s,v)=>(h(),y("tr",{key:s.id||s._tempId},[t("td",xt,a(v+1),1),t("td",wt,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,kt),[[p,s.description]])]),t("td",qt,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,Ct),[[p,s.qty,void 0,{number:!0}]])]),t("td",Ut,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[11]||(e[11]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,Tt),[[N,s.qty_type]])]),t("td",It,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>X(s),class:"w-full rounded border p-2"},null,40,jt),[[p,s.unit]])]),t("td",Vt,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,Nt),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",Pt,[t("div",$t,a(m(I(s))),1)]),t("td",St,[t("div",Mt,[t("button",{onClick:O(o=>H(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,Rt),r.value===(s.id||s._tempId)?(h(),y("div",Ht,[e[13]||(e[13]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",Xt,[t("button",{onClick:()=>{x(s,"percent"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,Ft),t("button",{onClick:()=>{x(s,"multiplier"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,At)]),t("div",Lt,[t("button",{onClick:o=>{o.stopPropagation(),S(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,Ot)])])):L("",!0)])])]))),128))])])]),t("div",Dt,[t("div",Et,[e[16]||(e[16]=t("h4",{class:"font-medium"},"Fundraising",-1)),t("div",Kt,[t("div",Jt,[e[15]||(e[15]=V("Total: ",-1)),t("span",zt,a(m(E.value)),1)]),t("button",{onClick:e[1]||(e[1]=s=>$("fundraising")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",Gt,[e[20]||(e[20]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),y(F,null,A(c.value.filter(s=>q(s)==="fundraising"),(s,v)=>(h(),y("tr",{key:s.id||s._tempId},[t("td",Bt,a(v+1),1),t("td",Wt,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,Qt),[[p,s.description]])]),t("td",Yt,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,Zt),[[p,s.qty,void 0,{number:!0}]])]),t("td",te,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[17]||(e[17]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,ee),[[N,s.qty_type]])]),t("td",se,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>X(s),class:"w-full rounded border p-2"},null,40,oe),[[p,s.unit]])]),t("td",ne,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",class:"w-full rounded border p-2"},null,8,le),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",ae,[t("div",ie,a(m(I(s))),1)]),t("td",re,[t("div",de,[t("button",{onClick:O(o=>H(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,ue),r.value===(s.id||s._tempId)?(h(),y("div",pe,[e[19]||(e[19]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",ce,[t("button",{onClick:()=>{x(s,"percent"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,_e),t("button",{onClick:()=>{x(s,"multiplier"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,me)]),t("div",he,[t("button",{onClick:o=>{o.stopPropagation(),S(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,be)])])):L("",!0)])])]))),128))])])]),t("div",ye,[t("div",ve,[e[22]||(e[22]=t("h4",{class:"font-medium"},"Lain-lain",-1)),t("div",fe,[t("div",ge,[e[21]||(e[21]=V("Total: ",-1)),t("span",xe,a(m(K.value)),1)]),t("button",{onClick:e[2]||(e[2]=s=>$("other")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",we,[e[26]||(e[26]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),y(F,null,A(c.value.filter(s=>q(s)==="other"),(s,v)=>(h(),y("tr",{key:s.id||s._tempId},[t("td",ke,a(v+1),1),t("td",qe,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,Ce),[[p,s.description]])]),t("td",Ue,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,Te),[[p,s.qty,void 0,{number:!0}]])]),t("td",Ie,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[23]||(e[23]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,je),[[N,s.qty_type]])]),t("td",Ve,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>X(s),class:"w-full rounded border p-2"},null,40,Ne),[[p,s.unit]])]),t("td",Pe,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",class:"w-full rounded border p-2"},null,8,$e),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",Se,[t("div",Me,a(m(I(s))),1)]),t("td",Re,[t("div",He,[t("button",{onClick:O(o=>H(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[24]||(e[24]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,Xe),r.value===(s.id||s._tempId)?(h(),y("div",Fe,[e[25]||(e[25]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",Ae,[t("button",{onClick:()=>{x(s,"percent"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,Le),t("button",{onClick:()=>{x(s,"multiplier"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,Oe)]),t("div",De,[t("button",{onClick:o=>{o.stopPropagation(),S(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,Ee)])])):L("",!0)])])]))),128))])])]),t("div",Ke,[t("div",Je,[e[28]||(e[28]=t("h4",{class:"font-medium"},"Potongan",-1)),t("div",ze,[t("div",Ge,[e[27]||(e[27]=V("Total: ",-1)),t("span",Be,a(m(J.value)),1)]),t("button",{onClick:e[3]||(e[3]=s=>$("deduction")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",We,[e[32]||(e[32]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),y(F,null,A(c.value.filter(s=>q(s)==="deduction"),(s,v)=>(h(),y("tr",{key:s.id||s._tempId},[t("td",Qe,a(v+1),1),t("td",Ye,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,Ze),[[p,s.description]])]),t("td",ts,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,es),[[p,s.qty,void 0,{number:!0}]])]),t("td",ss,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[29]||(e[29]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,os),[[N,s.qty_type]])]),t("td",ns,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>X(s),class:"w-full rounded border p-2"},null,40,ls),[[p,s.unit]])]),t("td",as,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",class:"w-full rounded border p-2"},null,8,is),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",rs,[t("div",ds,a(m(I(s))),1)]),t("td",us,[t("div",ps,[t("button",{onClick:O(o=>H(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[30]||(e[30]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,cs),r.value===(s.id||s._tempId)?(h(),y("div",_s,[e[31]||(e[31]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",ms,[t("button",{onClick:()=>{x(s,"percent"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,hs),t("button",{onClick:()=>{x(s,"multiplier"),r.value=null},class:w(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,bs)]),t("div",ys,[t("button",{onClick:o=>{o.stopPropagation(),S(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,vs)])])):L("",!0)])])]))),128))])])]),t("div",fs,[t("div",gs,[t("div",xs,[e[33]||(e[33]=t("div",null,"Total Penghasilan",-1)),t("div",ws,a(m(D.value)),1)]),t("div",ks,[e[34]||(e[34]=t("div",null,"Total Fundraising",-1)),t("div",qs,a(m(E.value)),1)]),t("div",Cs,[e[35]||(e[35]=t("div",null,"Total Lain-lain",-1)),t("div",Us,a(m(K.value)),1)]),t("div",Ts,[e[36]||(e[36]=t("div",null,"Total Potongan",-1)),t("div",Is,a(m(J.value)),1)]),e[38]||(e[38]=t("div",{class:"border-t mt-2 mb-2"},null,-1)),t("div",js,[e[37]||(e[37]=t("div",{class:"font-semibold text-lg"},"Take Home Pay",-1)),t("div",Vs,a(m(z.value)),1)])])]),t("div",Ns,[t("div",Ps,[t("div",$s,[t("div",Ss,[e[39]||(e[39]=V("Take Home: ",-1)),t("span",Ms,a(m(z.value)),1)])]),t("div",Rs,[t("div",Hs,[i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>_.value.status=s),class:"h-11 rounded-lg border px-4 py-2 text-sm text-gray-800"},[...e[40]||(e[40]=[t("option",{value:"pending"},"pending",-1),t("option",{value:"locked"},"locked",-1),t("option",{value:"transferred"},"transferred",-1)])],512),[[N,_.value.status]]),t("button",{onClick:tt,class:"rounded bg-brand-500 px-4 py-2 text-white"},"Simpan"),t("button",{onClick:e[5]||(e[5]=s=>ut(W).back()),class:"rounded border px-4 py-2"},"Kembali")])])])])])])]}),_:1}))}});export{Os as default};
