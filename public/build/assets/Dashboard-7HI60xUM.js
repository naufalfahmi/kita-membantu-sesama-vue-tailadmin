import{b as x,f as K,B as P,g as _,o as r,w as C,a as t,c as i,i as l,k as L,O as T,u as c,D as B,F as R,l as I,t as s,j as g}from"./admin-CG83aEo_.js";import{P as E,F as M,L as S,U as q,C as A,a as F,B as H,_ as X}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dn6tk0Of.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"space-y-6"},U={class:"text-sm text-gray-500 dark:text-gray-400"},G={key:0},O={key:1},V={key:0,class:"flex items-center justify-center py-12"},W={key:1,class:"space-y-6"},$={key:0,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},z={class:"mb-4 flex items-center justify-between"},J={class:"flex items-center gap-3"},Q={class:"mb-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"flex items-center justify-between"},tt={class:"text-sm text-gray-600"},et={class:"mt-1 text-lg font-semibold text-gray-800"},st={class:"text-right"},at={class:"mt-1 font-semibold"},nt={class:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},rt={key:0,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},it={class:"mb-4 flex items-center justify-between"},ot={class:"space-y-3"},dt={class:"flex items-center justify-between"},lt={class:"font-semibold text-gray-800 dark:text-white/90"},ct={class:"flex items-center justify-between"},xt={class:"font-semibold text-gray-800 dark:text-white/90"},gt={class:"flex items-center justify-between"},mt={class:"font-semibold text-gray-800 dark:text-white/90"},yt={class:"flex items-center justify-between"},ut={class:"font-semibold text-gray-800 dark:text-white/90"},pt={class:"flex items-center justify-between"},bt={class:"font-semibold text-gray-800 dark:text-white/90"},ft={key:1,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},kt={class:"mb-4 flex items-center justify-between"},vt={class:"space-y-3"},ht={class:"flex items-center justify-between"},wt={class:"font-semibold text-gray-800 dark:text-white/90"},_t={class:"flex items-center justify-between"},jt={class:"font-semibold text-gray-800 dark:text-white/90"},Dt={class:"flex items-center justify-between"},Kt={class:"font-semibold text-gray-800 dark:text-white/90"},Pt={class:"flex items-center justify-between"},Ct={class:"font-semibold text-gray-800 dark:text-white/90"},Lt={class:"flex items-center justify-between"},Tt={class:"font-semibold text-gray-800 dark:text-white/90"},Bt={class:"flex items-center justify-between"},Rt={class:"font-semibold text-gray-800 dark:text-white/90"},It={key:2,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},Et={class:"mb-4 flex items-center justify-between"},Mt={class:"space-y-3"},St={class:"flex items-center justify-between"},qt={class:"font-semibold text-gray-800 dark:text-white/90"},At={class:"flex items-center justify-between"},Ft={class:"font-semibold text-gray-800 dark:text-white/90"},Ht={class:"flex items-center justify-between"},Xt={class:"font-semibold text-gray-800 dark:text-white/90"},Nt={class:"flex items-center justify-between"},Ut={class:"font-semibold text-gray-800 dark:text-white/90"},Gt={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},Ot={class:"mb-4 flex items-center justify-between"},Vt={class:"space-y-3"},Wt={class:"flex items-center justify-between"},$t={class:"font-semibold text-gray-800 dark:text-white/90"},zt={key:0,class:"flex items-center justify-between"},Jt={class:"font-semibold text-gray-800 dark:text-white/90"},Qt={key:1,class:"flex items-center justify-between"},Yt={class:"font-semibold text-gray-800 dark:text-white/90"},Zt={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},te={class:"mb-4 flex items-center justify-between"},ee={class:"space-y-3"},se={class:"flex items-center justify-between"},ae={class:"font-semibold text-gray-800 dark:text-white/90"},ne={class:"flex items-center justify-between"},re={class:"font-semibold text-gray-800 dark:text-white/90"},ie={key:3,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},oe={class:"mb-4 flex items-center justify-between"},de={class:"space-y-3"},le={class:"flex items-center justify-between"},ce={class:"font-semibold text-gray-800 dark:text-white/90"},xe={class:"flex items-center justify-between"},ge={class:"font-semibold text-gray-800 dark:text-white/90"},me={class:"flex items-center justify-between"},ye={class:"font-semibold text-gray-800 dark:text-white/90"},ue={class:"flex items-center justify-between"},pe={class:"font-semibold text-gray-800 dark:text-white/90"},be={key:4,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},fe={class:"mb-4 flex items-center justify-between"},ke={class:"space-y-3"},ve={class:"flex items-center justify-between"},he={class:"font-semibold text-gray-800 dark:text-white/90"},we={class:"flex items-center justify-between"},_e={class:"font-semibold text-gray-800 dark:text-white/90"},Ce={__name:"Dashboard",setup(je){const k=x(!0),d=x("user"),a=x({company:{landingProfile:0,landingKegiatan:0,landingProgram:0,landingProposal:0,landingBulletin:0},administrasi:{kantorCabang:0,program:0,jabatan:0,pangkat:0,gaji:0,sop:0},konten:{programKami:0,profileKami:0,proposalData:0,bulletinData:0},userKepegawaian:{karyawan:0,mitra:0,donatur:0},operasional:{absensi:0,remunerasi:0},keuangan:{transaksi:0,penyaluran:0,pengajuanDana:0,total:0},laporan:{laporanTransaksi:0,laporanKeuangan:0}}),h=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(n),u=x({by_jabatan:[],timeseries:[]}),p=x(30),b=x([]),w=x({}),v=async()=>{try{const n=await fetch(`/admin/api/dashboard/stats?days=${p.value}`,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(n.ok){const e=await n.json();if(e.success&&e.data&&e.data.transactions){u.value=e.data.transactions;const y=(u.value.timeseries||[]).map(o=>o.count??o.value??0),f=(u.value.timeseries||[]).map(o=>o.date||o.label||"");y.length?(b.value=[{name:"Transaksi",data:y}],w.value={chart:{toolbar:{show:!1},zoom:{enabled:!1}},stroke:{curve:"smooth",width:2},xaxis:{categories:f,labels:{style:{colors:"#6B7280"}}},yaxis:{labels:{formatter:o=>o},forceNiceScale:!0},tooltip:{y:{formatter:o=>`${o}`}},colors:["#06B6D4"],markers:{size:0}}):b.value=[]}}}catch(n){console.error("Error loading transaction stats:",n)}},j=async()=>{try{const n=await fetch("/admin/api/user",{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(n.ok){const e=await n.json();e.success&&e.user&&(d.value=e.user.is_admin?"admin":"user")}}catch(n){console.error("Error fetching user:",n)}},D=async()=>{k.value=!0;try{const n=await fetch("/admin/api/dashboard/stats",{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(n.ok){const e=await n.json();e.success&&e.data&&(d.value=e.data.role||"user",a.value={...a.value,...e.data})}}catch(n){console.error("Error fetching dashboard stats:",n)}finally{k.value=!1}};return K(()=>{j(),D(),v()}),P(p,()=>v()),(n,e)=>(r(),_(X,null,{default:C(()=>{var y,f,o;return[t("div",N,[t("div",null,[e[1]||(e[1]=t("h1",{class:"mb-2 font-semibold text-gray-800 text-title-sm dark:text-white/90 sm:text-title-md"}," Dashboard ",-1)),t("p",U,[d.value==="admin"?(r(),i("span",G,"Ringkasan dan statistik dari semua modul aplikasi")):(r(),i("span",O,"Ringkasan data dan aktivitas Anda"))])]),k.value?(r(),i("div",V,[...e[2]||(e[2]=[t("div",{class:"text-center"},[t("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand-500 border-r-transparent"}),t("p",{class:"mt-4 text-sm text-gray-500"},"Memuat data...")],-1)])])):(r(),i("div",W,[d.value==="admin"?(r(),i("div",$,[t("div",z,[e[5]||(e[5]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Transaksi",-1)),t("div",J,[e[4]||(e[4]=t("label",{class:"text-sm text-gray-500"},"Rentang",-1)),L(t("select",{"onUpdate:modelValue":e[0]||(e[0]=m=>p.value=m),onChange:v,class:"h-9 rounded-lg border border-gray-300 bg-white px-3 text-sm"},[...e[3]||(e[3]=[t("option",{value:7},"7 Hari",-1),t("option",{value:30},"30 Hari",-1),t("option",{value:90},"90 Hari",-1)])],544),[[T,p.value,void 0,{number:!0}]])])]),t("div",Q,[b.value.length?(r(),_(c(B),{key:0,type:"line",height:"220",options:w.value,series:b.value},null,8,["options","series"])):l("",!0)]),t("div",Y,[(r(!0),i(R,null,I(u.value.by_jabatan,m=>(r(),i("div",{key:m.jabatan,class:"rounded-lg border border-gray-100 p-4"},[t("div",Z,[t("div",null,[t("div",tt,s(m.jabatan),1),t("div",et,s(m.count)+" transaksi",1)]),t("div",st,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500"},"Total",-1)),t("div",at,s(h(m.total)),1)])])]))),128))])])):l("",!0),t("div",nt,[d.value==="admin"?(r(),i("div",rt,[t("div",it,[e[7]||(e[7]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Company",-1)),g(c(E),{class:"h-6 w-6 text-brand-500"})]),t("div",ot,[t("div",dt,[e[8]||(e[8]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Profile",-1)),t("span",lt,s(a.value.company.landingProfile||0),1)]),t("div",ct,[e[9]||(e[9]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Kegiatan",-1)),t("span",xt,s(a.value.company.landingKegiatan||0),1)]),t("div",gt,[e[10]||(e[10]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Program",-1)),t("span",mt,s(a.value.company.landingProgram||0),1)]),t("div",yt,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Proposal",-1)),t("span",ut,s(a.value.company.landingProposal||0),1)]),t("div",pt,[e[12]||(e[12]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Bulletin",-1)),t("span",bt,s(a.value.company.landingBulletin||0),1)])])])):l("",!0),d.value==="admin"?(r(),i("div",ft,[t("div",kt,[e[13]||(e[13]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Administrasi",-1)),g(c(M),{class:"h-6 w-6 text-brand-500"})]),t("div",vt,[t("div",ht,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Kantor Cabang",-1)),t("span",wt,s(a.value.administrasi.kantorCabang||0),1)]),t("div",_t,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Program",-1)),t("span",jt,s(a.value.administrasi.program||0),1)]),t("div",Dt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jabatan",-1)),t("span",Kt,s(a.value.administrasi.jabatan||0),1)]),t("div",Pt,[e[17]||(e[17]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Pangkat",-1)),t("span",Ct,s(a.value.administrasi.pangkat||0),1)]),t("div",Lt,[e[18]||(e[18]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Gaji",-1)),t("span",Tt,s(a.value.administrasi.gaji||0),1)]),t("div",Bt,[e[19]||(e[19]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"SOP",-1)),t("span",Rt,s(a.value.administrasi.sop||0),1)])])])):l("",!0),d.value==="admin"?(r(),i("div",It,[t("div",Et,[e[20]||(e[20]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Konten & Publikasi",-1)),g(c(S),{class:"h-6 w-6 text-brand-500"})]),t("div",Mt,[t("div",St,[e[21]||(e[21]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Program Kami",-1)),t("span",qt,s(a.value.konten.programKami||0),1)]),t("div",At,[e[22]||(e[22]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Profile Kami",-1)),t("span",Ft,s(a.value.konten.profileKami||0),1)]),t("div",Ht,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Proposal Data",-1)),t("span",Xt,s(a.value.konten.proposalData||0),1)]),t("div",Nt,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Bulletin Data",-1)),t("span",Ut,s(a.value.konten.bulletinData||0),1)])])])):l("",!0),t("div",Gt,[t("div",Ot,[e[25]||(e[25]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"User & Kepegawaian",-1)),g(c(q),{class:"h-6 w-6 text-brand-500"})]),t("div",Vt,[t("div",Wt,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Karyawan",-1)),t("span",$t,s(((y=a.value.userKepegawaian)==null?void 0:y.karyawan)||0),1)]),d.value==="admin"?(r(),i("div",zt,[e[27]||(e[27]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Mitra",-1)),t("span",Jt,s(((f=a.value.userKepegawaian)==null?void 0:f.mitra)||0),1)])):l("",!0),d.value==="admin"?(r(),i("div",Qt,[e[28]||(e[28]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Donatur",-1)),t("span",Yt,s(((o=a.value.userKepegawaian)==null?void 0:o.donatur)||0),1)])):l("",!0)])]),t("div",Zt,[t("div",te,[e[29]||(e[29]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Operasional",-1)),g(c(A),{class:"h-6 w-6 text-brand-500"})]),t("div",ee,[t("div",se,[e[30]||(e[30]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Absensi",-1)),t("span",ae,s(a.value.operasional.absensi||0),1)]),t("div",ne,[e[31]||(e[31]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Remunerasi",-1)),t("span",re,s(a.value.operasional.remunerasi||0),1)])])]),d.value==="admin"?(r(),i("div",ie,[t("div",oe,[e[32]||(e[32]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Keuangan",-1)),g(c(F),{class:"h-6 w-6 text-brand-500"})]),t("div",de,[t("div",le,[e[33]||(e[33]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Transaksi",-1)),t("span",ce,s(a.value.keuangan.transaksi||0),1)]),t("div",xe,[e[34]||(e[34]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Penyaluran",-1)),t("span",ge,s(a.value.keuangan.penyaluran||0),1)]),t("div",me,[e[35]||(e[35]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Pengajuan Dana",-1)),t("span",ye,s(a.value.keuangan.pengajuanDana||0),1)]),t("div",ue,[e[36]||(e[36]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Keuangan",-1)),t("span",pe,s(h(a.value.keuangan.total||0)),1)])])])):l("",!0),d.value==="admin"?(r(),i("div",be,[t("div",fe,[e[37]||(e[37]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Laporan",-1)),g(c(H),{class:"h-6 w-6 text-brand-500"})]),t("div",ke,[t("div",ve,[e[38]||(e[38]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Laporan Transaksi",-1)),t("span",he,s(a.value.laporan.laporanTransaksi||0),1)]),t("div",we,[e[39]||(e[39]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Laporan Keuangan",-1)),t("span",_e,s(a.value.laporan.laporanKeuangan||0),1)])])])):l("",!0)])]))])]}),_:1}))}};export{Ce as default};
