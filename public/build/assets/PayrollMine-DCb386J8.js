import{_ as c}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DUQGZK6v.js";import{d as m,I as u,L as p,b as f,f as g,g as h,o as x,w as y,a as r,j as b,u as w,Q as k}from"./admin-CjdqDql3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},v={class:"ag-theme-alpine",style:{width:"100%","min-height":"300px"}},E=m({__name:"PayrollMine",setup(N){const i=u(),n=p(),s=f([]),o={resizable:!0,sortable:!0},l=[{headerName:"Periode",field:"period_label",flex:1},{headerName:"Status",field:"status",width:150,cellRenderer:a=>{const e={pending:"Pending",locked:"Selesai",transferred:"Ditransfer"},t=document.createElement("span");return t.className="inline-block rounded-full px-3 py-1 text-xs font-medium bg-gray-100 text-gray-800",t.textContent=e[a.value]||a.value||"",t}},{headerName:"Total",field:"total",width:160,cellRenderer:a=>{const e=document.createElement("span");return e.className="text-sm font-medium text-gray-800",e.textContent=a.value?`Rp ${a.value.toLocaleString()}`:"Rp 0",e}},{headerName:"Bukti",field:"transfer_proof",width:140,cellRenderer:a=>{const e=document.createElement("div");if(a.data&&a.data.transfer_proof){const t=document.createElement("a");t.href=`/storage/${a.data.transfer_proof}`,t.target="_blank",t.className="text-sm text-brand-500 hover:underline",t.textContent="Lihat Bukti",e.appendChild(t)}else{const t=document.createElement("span");t.className="text-sm text-gray-500",t.textContent="â€”",e.appendChild(t)}return e}},{headerName:"Actions",field:"actions",width:160,cellStyle:{display:"flex",justifyContent:"center",alignItems:"center"},cellRenderer:a=>{const e=document.createElement("div");e.className="flex items-center justify-center gap-3";const t=document.createElement("button");return t.className="flex items-center justify-center px-3 py-1 rounded-lg text-white bg-brand-500 hover:bg-brand-600 text-sm",t.innerText="Cetak Slip",t.onclick=async()=>{try{(await(await fetch("/admin/api/debug-auth",{credentials:"same-origin"})).json()).authenticated?window.open(`/admin/operasional/payroll/periods/${a.data.period_id}/records/${a.data.id}/slip?format=pdf`,"_blank"):(n.error("Sesi kadaluarsa, silakan masuk kembali"),i.push("/signin"))}catch{n.error("Gagal memeriksa status autentikasi")}},e.appendChild(t),e}}];return g(async()=>{try{const a=await fetch("/admin/api/operasional/payroll/me/list",{credentials:"same-origin"}),e=await a.json();a.ok&&e.success?s.value=e.data:n.error(e.message||"Gagal mengambil data slip")}catch{n.error("Gagal mengambil slip gaji")}}),(a,e)=>(x(),h(c,null,{default:y(()=>[r("div",_,[e[0]||(e[0]=r("div",{class:"mb-6 flex items-center justify-between"},[r("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Slip Gaji Saya")],-1)),r("div",v,[b(w(k),{class:"ag-theme-alpine",style:{width:"100%","min-height":"300px"},columnDefs:l,rowData:s.value,defaultColDef:o,pagination:!0,paginationPageSize:20,animateRows:!0,domLayout:"autoHeight"},null,8,["rowData"])])])]),_:1}))}});export{E as default};
