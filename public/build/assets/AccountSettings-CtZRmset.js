import{d as y,b as n,g as _,o as r,w as C,a as t,c as a,i as c,t as b,q as M,k as m,s as v}from"./admin-DxPS0APX.js";import{_ as j,g as B}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DRybCjRc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},z={class:"max-w-md"},A={key:0,class:"mb-4 rounded-md bg-green-50 p-3 text-green-800"},P={key:1,class:"mb-4 rounded-md bg-red-50 p-3 text-red-800"},N={class:"relative"},O=["type"],T=["aria-label"],V={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},$={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},D={key:0,class:"text-sm text-red-600 mt-1"},E={class:"relative"},H=["type"],L=["aria-label"],U={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},G={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K={key:0,class:"text-sm text-red-600 mt-1"},q={class:"relative"},F=["type"],I=["aria-label"],J={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},R={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Z=y({__name:"AccountSettings",setup(X){const o=n({current_password:"",new_password:"",new_password_confirmation:""}),l=n({}),p=n(""),d=n(""),h=async()=>await B(),x=async()=>{l.value={},p.value="",d.value="";try{const g=await h(),e=await fetch("/admin/api/user/password",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":g},credentials:"same-origin",body:JSON.stringify(o.value)}),s=await e.json();e.ok&&s.success?(p.value=s.message||"Password berhasil diubah.",o.value.current_password="",o.value.new_password="",o.value.new_password_confirmation=""):(d.value=s.message||"Gagal mengubah password.",s.errors&&(l.value=Object.fromEntries(Object.entries(s.errors).map(([f,k])=>[f,Array.isArray(k)?k[0]:k]))))}catch(g){d.value="Terjadi kesalahan. Coba lagi.",console.error(g)}},i=n(!1),u=n(!1),w=n(!1);return(g,e)=>(r(),_(j,null,{default:C(()=>[t("div",S,[e[16]||(e[16]=t("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"},"Ganti Password",-1)),t("div",z,[p.value?(r(),a("div",A,b(p.value),1)):c("",!0),d.value?(r(),a("div",P,b(d.value),1)):c("",!0),t("form",{onSubmit:M(x,["prevent"]),class:"space-y-4"},[t("div",N,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Password Saat Ini",-1)),m(t("input",{type:i.value?"text":"password","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.current_password=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,O),[[v,o.value.current_password]]),t("button",{type:"button",onClick:e[1]||(e[1]=s=>i.value=!i.value),class:"absolute right-3 top-8 text-gray-500","aria-label":i.value?"Hide password":"Show password"},[i.value?(r(),a("svg",V,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),a("svg",$,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,T),l.value.current_password?(r(),a("p",D,b(l.value.current_password),1)):c("",!0)]),t("div",E,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Password Baru",-1)),m(t("input",{type:u.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.new_password=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,H),[[v,o.value.new_password]]),t("button",{type:"button",onClick:e[3]||(e[3]=s=>u.value=!u.value),class:"absolute right-3 top-8 text-gray-500","aria-label":u.value?"Hide password":"Show password"},[u.value?(r(),a("svg",U,[...e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),a("svg",G,[...e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,L),l.value.new_password?(r(),a("p",K,b(l.value.new_password),1)):c("",!0)]),t("div",q,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Konfirmasi Password Baru",-1)),m(t("input",{type:w.value?"text":"password","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.new_password_confirmation=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,F),[[v,o.value.new_password_confirmation]]),t("button",{type:"button",onClick:e[5]||(e[5]=s=>w.value=!w.value),class:"absolute right-3 top-8 text-gray-500","aria-label":w.value?"Hide password":"Show password"},[w.value?(r(),a("svg",J,[...e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),a("svg",R,[...e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,I)]),e[15]||(e[15]=t("div",{class:"flex items-center gap-3"},[t("button",{type:"submit",class:"inline-flex items-center px-4 py-2 bg-brand-500 text-white rounded-md"},"Simpan")],-1))],32)])])]),_:1}))}});export{Z as default};
