import{g as R,H as L,I as E,V as M,A as h,r as l,o as B,E as H,c as V,a as A,w as p,f as u,b as r,t as I,l as F,j as S,v as $,u as z}from"./admin-V6h7w0fV.js";import{_ as O}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-sjhOCCox.js";import{_ as P}from"./AdminLayout.vue_vue_type_script_setup_true_lang-B1sBarRz.js";import{_ as J}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-CNiorqf7.js";import{A as K}from"./ag-theme-alpine-DDqKNRi1.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},q={class:"mb-6 flex items-center justify-between"},Q={class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},W={class:"mb-6 rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]"},Y={class:"flex gap-4"},Z={class:"flex-1"},ee={class:"ag-theme-alpine dark:ag-theme-alpine-dark",style:{width:"100%","min-height":"400px"}},te=R({__name:"Gaji",setup(ae){const b=L(),x=E(),o=M(),m=h(()=>b.meta.title||"Gaji"),v=[{headerName:"Jabatan",valueGetter:e=>{var t,a;return((a=(t=e.data)==null?void 0:t.jabatan)==null?void 0:a.name)||"-"},sortable:!0,filter:!0,flex:1},{headerName:"Pangkat",valueGetter:e=>{var t,a;return((a=(t=e.data)==null?void 0:t.pangkat)==null?void 0:a.nama)||"-"},sortable:!0,filter:!0,flex:1},{headerName:"Nama",field:"nama",sortable:!0,filter:!0,flex:1},{headerName:"Nominal",field:"nominal",valueGetter:e=>{var t;return _((t=e.data)==null?void 0:t.nominal)},sortable:!0,flex:1},{headerName:"Tanggal Dibuat",field:"created_at",valueGetter:e=>{var t;return j((t=e.data)==null?void 0:t.created_at)},flex:1},{headerName:"Actions",field:"actions",cellRenderer:e=>N(e),width:160}],g=l([]),y=l(null),k={resizable:!0},d=l(!1),i=l(null),s=l(""),w=h(()=>{let e=[...g.value];return s.value&&(e=e.filter(t=>{var a;return(a=t.nama)==null?void 0:a.toLowerCase().includes(s.value.toLowerCase())})),e});function _(e){return e==null||isNaN(Number(e))?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(Number(e))}function j(e){if(!e)return"-";try{return new Date(e).toLocaleDateString("id-ID")}catch{return e}}function N(e){if(!e.data||!e.data.id)return"";const t=e.data.id,a=document.createElement("div");a.className="flex items-center gap-3";const n=document.createElement("button");n.className="flex items-center justify-center w-8 h-8 rounded-lg text-brand-500 hover:bg-brand-50 dark:hover:bg-brand-500/10 transition-colors",n.innerHTML=`
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
    </svg>
  `,n.addEventListener("click",()=>{x.push(`/administrasi/gaji/${t}/edit`)}),a.appendChild(n);const c=document.createElement("button");return c.className="flex items-center justify-center w-8 h-8 rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors",c.innerHTML=`
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M3 6h18"></path>
      <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
      <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
      <line x1="10" y1="11" x2="10" y2="17"></line>
      <line x1="14" y1="11" x2="14" y2="17"></line>
    </svg>
  `,c.addEventListener("click",()=>{i.value=t,d.value=!0}),a.appendChild(c),a}async function f(){try{const t=await(await fetch("/admin/api/gaji?per_page=1000",{credentials:"same-origin"})).json();t.success?g.value=t.data:o.error(t.message||"Gagal memuat data")}catch{o.error("Gagal memuat data")}}function D(e){y.value=e.api}async function C(){if(i.value)try{const t=await(await fetch("/admin/api/csrf-token",{credentials:"same-origin"})).json(),n=await(await fetch(`/admin/api/gaji/${i.value}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t.csrf_token},credentials:"same-origin"})).json();n.success?(o.success(n.message||"Gaji berhasil dihapus"),f()):o.error(n.message||"Gagal menghapus gaji")}catch{o.error("Gagal menghapus gaji")}finally{d.value=!1,i.value=null}}function G(){d.value=!1,i.value=null}function T(){s.value=""}return B(()=>{f()}),(e,t)=>{const a=H("router-link");return A(),V(P,null,{default:p(()=>[u(J,{pageTitle:m.value},null,8,["pageTitle"]),r("div",X,[r("div",q,[r("h3",Q,I(m.value),1),u(a,{class:"flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600",to:{name:"Tambah Gaji"}},{default:p(()=>[...t[1]||(t[1]=[F("Tambah Gaji",-1)])]),_:1})]),r("div",W,[r("div",Y,[r("div",Z,[t[2]||(t[2]=r("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Nama Gaji ",-1)),S(r("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>s.value=n),placeholder:"Cari nama gaji...",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[$,s.value]])]),r("div",{class:"flex items-end"},[r("button",{onClick:T,class:"h-11 rounded-lg border border-gray-300 bg-white px-6 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"}," Reset Filter ")])])]),r("div",ee,[u(z(K),{class:"ag-theme-alpine",style:{width:"100%"},columnDefs:v,rowData:w.value,defaultColDef:k,pagination:!0,paginationPageSize:20,animateRows:!0,theme:"legacy",suppressHorizontalScroll:!0,domLayout:"autoHeight",onGridReady:D},null,8,["rowData"])]),u(O,{isOpen:d.value,title:"Hapus Gaji",message:"Apakah Anda yakin ingin menghapus gaji ini? Tindakan ini tidak dapat dibatalkan.",confirmText:"Hapus",confirmButtonClass:"bg-red-500 hover:bg-red-600",onConfirm:C,onCancel:G},null,8,["isOpen"])])]),_:1})}}}),de=U(te,[["__scopeId","data-v-d4459cb1"]]);export{de as default};
