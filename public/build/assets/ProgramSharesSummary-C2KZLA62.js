import{C as w}from"./component-BraTdCEw.js";import{d as D,b as o,L as R,f as C,g as T,o as F,w as P,a,j as p,u as f,Q as S}from"./admin-VFU7j7ft.js";import{_ as B}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dsjrp5R9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},I={class:"mb-6 rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]"},j={class:"grid grid-cols-1 gap-4 md:grid-cols-3 lg:grid-cols-6"},O={class:"flex-1"},U={class:"relative",style:{width:"100%",height:"600px"}},V={class:"ag-theme-alpine dark:ag-theme-alpine-dark",style:{width:"100%",height:"100%"}},E=D({__name:"ProgramSharesSummary",setup(A){const h=o(null),d=R(),s=o(null),_={mode:"range",dateFormat:"Y-m-d",altInput:!0,altFormat:"d F Y"},m=o([{headerName:"Program",field:"program_name",flex:2},{headerName:"Total Transaksi",field:"total_transaksi",flex:1,valueFormatter:i}]),b={resizable:!0,sortable:!0},u=o([]),c=o([]);function i(e){return e.value!==void 0&&e.value!==null?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e.value):""}async function g(){try{let e="/admin/api/keuangan/program-shares-summary";if(s.value&&Array.isArray(s.value)&&s.value.length===2){const[l,k]=s.value;e+=`?start_date=${encodeURIComponent(l)}&end_date=${encodeURIComponent(k)}`}const r=await(await fetch(e,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})).json();if(!r.success){d.error("Gagal memuat ringkasan");return}const G=["program_name","total_transaksi",...r.data.columns??[]],n=[];n.push({headerName:"Program",field:"program_name",flex:2}),n.push({headerName:"Total Transaksi",field:"total_transaksi",flex:1,valueFormatter:i}),(r.data.columns??[]).forEach(l=>{n.push({headerName:x(l),field:l,flex:1,valueFormatter:i})}),m.value=n,u.value=r.data.rows||[];const v=Object.assign({program_name:"TOTAL"},r.data.totals||{}),y=Object.assign({program_name:"DISBURSED TOTALS"},r.data.disbursed_totals||{});c.value=[v,y]}catch(e){console.error(e),d.error("Terjadi kesalahan saat memuat ringkasan")}}function x(e){return{dp:"DP",ops_1:"OPS 1",ops_2:"OPS 2",program:"Program",fee_mitra:"Fee Mitra",bonus:"Bonus",championship:"Championship"}[e]||e.replace(/_/g," ").toUpperCase()}return C(()=>{g()}),(e,t)=>(F(),T(B,null,{default:P(()=>[a("div",N,[a("div",{class:"mb-6 flex items-center justify-between"},[t[1]||(t[1]=a("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Ringkasan Program - Shares",-1)),a("div",{class:"flex items-center gap-3"},[a("button",{onClick:g,class:"flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600"}," Muat Ulang ")])]),a("div",I,[a("div",j,[a("div",O,[t[2]||(t[2]=a("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Rentang Transaksi (opsional)",-1)),p(f(w),{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=r=>s.value=r),config:_,class:"h-11 w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm",placeholder:"Pilih rentang"},null,8,["modelValue"])])])]),a("div",U,[a("div",V,[p(f(S),{ref_key:"agGridRef",ref:h,class:"ag-theme-alpine",style:{width:"100%",height:"100%"},columnDefs:m.value,defaultColDef:b,rowData:u.value,pinnedBottomRowData:c.value,animateRows:!0},null,8,["columnDefs","rowData","pinnedBottomRowData"])])])])]),_:1}))}});export{E as default};
