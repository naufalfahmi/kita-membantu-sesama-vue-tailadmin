import{d as y,r as n,c as _,b as r,w as C,e as M,f as t,j as a,g,t as b,p as j,i as m,s as v}from"./admin-BlXzWbDy.js";import{_ as B}from"./AdminLayout.vue_vue_type_script_setup_true_lang-lNnmFXyY.js";import{_ as S}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-BA_IpTae.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},P={class:"max-w-md"},z={key:0,class:"mb-4 rounded-md bg-green-50 p-3 text-green-800"},N={key:1,class:"mb-4 rounded-md bg-red-50 p-3 text-red-800"},T={class:"relative"},V=["type"],O=["aria-label"],$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},D={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},E={key:0,class:"text-sm text-red-600 mt-1"},H={class:"relative"},L=["type"],U=["aria-label"],G={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},K={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},F={key:0,class:"text-sm text-red-600 mt-1"},I={class:"relative"},J=["type"],R=["aria-label"],X={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},q={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Q="Account Settings",se=y({__name:"AccountSettings",setup(W){const o=n({current_password:"",new_password:"",new_password_confirmation:""}),l=n({}),c=n(""),d=n(""),h=async()=>(await(await fetch("/admin/api/csrf-token",{credentials:"same-origin"})).json()).csrf_token,f=async()=>{l.value={},c.value="",d.value="";try{const w=await h(),e=await fetch("/admin/api/user/password",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":w},credentials:"same-origin",body:JSON.stringify(o.value)}),s=await e.json();e.ok&&s.success?(c.value=s.message||"Password berhasil diubah.",o.value.current_password="",o.value.new_password="",o.value.new_password_confirmation=""):(d.value=s.message||"Gagal mengubah password.",s.errors&&(l.value=Object.fromEntries(Object.entries(s.errors).map(([x,k])=>[x,Array.isArray(k)?k[0]:k]))))}catch(w){d.value="Terjadi kesalahan. Coba lagi.",console.error(w)}},i=n(!1),u=n(!1),p=n(!1);return(w,e)=>(r(),_(B,null,{default:C(()=>[M(S,{pageTitle:Q}),t("div",A,[e[16]||(e[16]=t("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"},"Ganti Password",-1)),t("div",P,[c.value?(r(),a("div",z,b(c.value),1)):g("",!0),d.value?(r(),a("div",N,b(d.value),1)):g("",!0),t("form",{onSubmit:j(f,["prevent"]),class:"space-y-4"},[t("div",T,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Password Saat Ini",-1)),m(t("input",{type:i.value?"text":"password","onUpdate:modelValue":e[0]||(e[0]=s=>o.value.current_password=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,V),[[v,o.value.current_password]]),t("button",{type:"button",onClick:e[1]||(e[1]=s=>i.value=!i.value),class:"absolute right-3 top-8 text-gray-500","aria-label":i.value?"Hide password":"Show password"},[i.value?(r(),a("svg",$,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),a("svg",D,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,O),l.value.current_password?(r(),a("p",E,b(l.value.current_password),1)):g("",!0)]),t("div",H,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Password Baru",-1)),m(t("input",{type:u.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.new_password=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,L),[[v,o.value.new_password]]),t("button",{type:"button",onClick:e[3]||(e[3]=s=>u.value=!u.value),class:"absolute right-3 top-8 text-gray-500","aria-label":u.value?"Hide password":"Show password"},[u.value?(r(),a("svg",G,[...e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),a("svg",K,[...e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,U),l.value.new_password?(r(),a("p",F,b(l.value.new_password),1)):g("",!0)]),t("div",I,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Konfirmasi Password Baru",-1)),m(t("input",{type:p.value?"text":"password","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.new_password_confirmation=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,J),[[v,o.value.new_password_confirmation]]),t("button",{type:"button",onClick:e[5]||(e[5]=s=>p.value=!p.value),class:"absolute right-3 top-8 text-gray-500","aria-label":p.value?"Hide password":"Show password"},[p.value?(r(),a("svg",X,[...e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),a("svg",q,[...e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,R)]),e[15]||(e[15]=t("div",{class:"flex items-center gap-3"},[t("button",{type:"submit",class:"inline-flex items-center px-4 py-2 bg-brand-500 text-white rounded-md"},"Simpan")],-1))],32)])])]),_:1}))}});export{se as default};
