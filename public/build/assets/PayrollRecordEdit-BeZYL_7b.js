import{d as at,H as it,I as dt,M as rt,b as T,f as Y,A as U,X as ut,g as pt,o as h,w as ct,a as t,t as a,m as V,c as b,F as R,l as A,k as i,v as p,P as j,i as X,q as L,n as x,u as _t}from"./admin-DbNB-fv6.js";import{_ as mt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-yABoSbne.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const yt={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 pb-24 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},ht={class:"mb-4"},bt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},vt={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},ft={class:"flex items-center justify-between mb-3"},gt={class:"flex items-center gap-2"},xt={class:"text-sm text-gray-500"},wt={class:"font-medium"},kt={class:"w-full table-auto border-collapse"},qt={class:"p-2"},Ct={class:"p-2"},Ut=["onUpdate:modelValue"],It={class:"p-2"},Tt=["onUpdate:modelValue"],Vt={class:"p-2"},jt=["onUpdate:modelValue"],Nt={class:"p-2"},Mt=["onUpdate:modelValue","onInput"],Pt={class:"p-2"},St=["onUpdate:modelValue"],$t={class:"p-2"},Ht={class:""},Rt={class:"p-2 relative"},At={class:"flex items-center justify-end"},Xt=["onClick"],Lt={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},Dt={class:"flex flex-col gap-1"},Ft=["onClick"],Et=["onClick"],Jt={class:"border-t mt-2 pt-2"},Ot=["onClick"],zt={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},Kt={class:"flex items-center justify-between mb-3"},Bt={class:"flex items-center gap-2"},Gt={class:"text-sm text-gray-500"},Qt={class:"font-medium"},Wt={class:"w-full table-auto border-collapse"},Yt={class:"p-2"},Zt={class:"p-2"},te=["onUpdate:modelValue"],ee={class:"p-2"},se=["onUpdate:modelValue"],oe={class:"p-2"},ne=["onUpdate:modelValue"],le={class:"p-2"},ae=["onUpdate:modelValue","onInput"],ie={class:"p-2"},de=["onUpdate:modelValue"],re={class:"p-2"},ue={class:""},pe={class:"p-2 relative"},ce={class:"flex items-center justify-end"},_e=["onClick"],me={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},ye={class:"flex flex-col gap-1"},he=["onClick"],be=["onClick"],ve={class:"border-t mt-2 pt-2"},fe=["onClick"],ge={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},xe={class:"flex items-center justify-between mb-3"},we={class:"flex items-center gap-2"},ke={class:"text-sm text-gray-500"},qe={class:"font-medium"},Ce={class:"w-full table-auto border-collapse"},Ue={class:"p-2"},Ie={class:"p-2"},Te=["onUpdate:modelValue"],Ve={class:"p-2"},je=["onUpdate:modelValue"],Ne={class:"p-2"},Me=["onUpdate:modelValue"],Pe={class:"p-2"},Se=["onUpdate:modelValue","onInput"],$e={class:"p-2"},He=["onUpdate:modelValue"],Re={class:"p-2"},Ae={class:""},Xe={class:"p-2 relative"},Le={class:"flex items-center justify-end"},De=["onClick"],Fe={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},Ee={class:"flex flex-col gap-1"},Je=["onClick"],Oe=["onClick"],ze={class:"border-t mt-2 pt-2"},Ke=["onClick"],Be={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},Ge={class:"flex items-center justify-between mb-3"},Qe={class:"flex items-center gap-2"},We={class:"text-sm text-gray-500"},Ye={class:"font-medium"},Ze={class:"w-full table-auto border-collapse"},ts={class:"p-2"},es={class:"p-2"},ss=["onUpdate:modelValue"],os={class:"p-2"},ns=["onUpdate:modelValue"],ls={class:"p-2"},as=["onUpdate:modelValue"],is={class:"p-2"},ds=["onUpdate:modelValue","onInput"],rs={class:"p-2"},us=["onUpdate:modelValue"],ps={class:"p-2"},cs={class:""},_s={class:"p-2 relative"},ms={class:"flex items-center justify-end"},ys=["onClick"],hs={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},bs={class:"flex flex-col gap-1"},vs=["onClick"],fs=["onClick"],gs={class:"border-t mt-2 pt-2"},xs=["onClick"],ws={class:"mt-4 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},ks={class:"text-sm text-gray-700"},qs={class:"flex justify-between"},Cs={class:"font-semibold"},Us={class:"flex justify-between"},Is={class:"font-semibold"},Ts={class:"flex justify-between"},Vs={class:"font-semibold"},js={class:"flex justify-between"},Ns={class:"font-semibold"},Ms={class:"flex justify-between"},Ps={class:"font-semibold text-lg"},Ss={class:"sticky bottom-0 left-0 right-0 z-40 bg-white/90 border-t dark:bg-white/[0.03]"},$s={class:"max-w-6xl mx-auto px-5 py-3 flex items-center justify-between gap-4"},Hs={class:"flex-1"},Rs={class:"text-sm text-gray-500"},As={class:"font-semibold"},Xs={class:"flex items-center gap-3"},Ls={class:"flex items-center gap-3"},Os=at({__name:"PayrollRecordEdit",setup(Ds){const k=it(),Z=dt(),w=rt(),f=T({}),c=T([]),tt=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],et=o=>{if(!o)return"-";const e=o.month?tt[(o.month||1)-1]:"",r=o.year||"",l=o.status?` Â· ${o.status}`:"";return`${e} ${r}${l}`},N=async()=>{var l;const o=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");return o||(await(await fetch("/admin/api/csrf-token",{credentials:"same-origin"})).json()).csrf_token||""},D=async()=>{const o=k.params.periodId,e=k.params.recordId,l=await(await fetch(`/admin/api/operasional/payroll/periods/${o}/records/${e}`,{credentials:"same-origin"})).json();if(!l.success){w.error("Gagal memuat data");return}f.value=l.data,f.value.status||(f.value.status="pending"),c.value=(l.data.items||[]).map(s=>({...s,qty:Number(s.qty),unit_value:Math.abs(Number(s.unit_value)),qty_type:s.qty_type==="fixed"?"multiplier":s.qty_type}))};Y(async()=>{await D(),st()});const st=()=>{const o=[{description:"Gaji Pokok",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Uang Makan",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Uang Transport",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Dana Kolekan",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Kotak Home",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Kotak Publik",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Qurban",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Tunjangan Jabatan",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"THR",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Perjalanan Dinas",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Lembur",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Tidak Masuk",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"deduction"},{description:"Terlambat",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"deduction"}];for(const e of o)c.value.some(l=>(l.description||"").toLowerCase()===e.description.toLowerCase())||c.value.push({id:null,_tempId:String(Date.now())+Math.random().toString(36).substr(2,5),description:e.description,qty:e.qty,qty_type:e.qty_type,unit:e.unit,unit_value:e.unit_value,amount:0,group:e.group})},M=(o="penghasilan")=>{c.value.push({id:null,_tempId:String(Date.now())+Math.random().toString(36).substr(2,5),description:"",qty:0,qty_type:"multiplier",unit:"",unit_value:0,amount:0,group:o})},P=async o=>{if(o.id){const e=k.params.periodId,r=k.params.recordId,l=await N();if(!(await(await fetch(`/admin/api/operasional/payroll/periods/${e}/records/${r}/items/${o.id}`,{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-TOKEN":l,"X-Requested-With":"XMLHttpRequest"}})).json()).success){w.error("Gagal menghapus item");return}w.success("Item dihapus"),D()}else c.value=c.value.filter(e=>e!==o)},K=T(null);T(null);const ot=async()=>{const o=k.params.periodId,e=k.params.recordId,r={},l=c.value.map((u,y)=>({it:u,origIndex:y})).filter(({it:u})=>!!(u.id||u.description&&(u.description||"").toString().trim()!==""||Number(u.qty)!==0||Number(u.unit_value)!==0));for(let u=0;u<l.length;u++){const{it:y,origIndex:Q}=l[u],W={description:y.description,qty:Math.round(Number(y.qty)||0),qty_type:y.qty_type==="fixed"?"multiplier":y.qty_type,unit:y.unit,unit_value:y.unit_value,group:y.group||q(y),order_index:u};if(y.id){const z=await N(),C=await(await fetch(`/admin/api/operasional/payroll/periods/${o}/records/${e}/items/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":z,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(W)})).json();if(!C.success){w.error("Gagal mengubah item");return}const v=C.data;c.value[Q]={...v,qty:Number(v.qty),unit_value:Math.abs(Number(v.unit_value)),qty_type:v.qty_type==="fixed"?"multiplier":v.qty_type}}else{const z=await N(),C=await(await fetch(`/admin/api/operasional/payroll/periods/${o}/records/${e}/items`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":z,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(W)})).json();if(!C.success){w.error("Gagal menambah item");return}y._tempId&&(r[y._tempId]=C.data.id);const v=C.data;c.value[Q]={...v,qty:Number(v.qty),unit_value:Math.abs(Number(v.unit_value)),qty_type:v.qty_type==="fixed"?"multiplier":v.qty_type}}}const s=await N();let m;if(K.value){const u=new FormData;u.append("status",f.value.status),u.append("transfer_proof",K.value),m=await fetch(`/admin/api/operasional/payroll/periods/${o}/records/${e}`,{method:"PUT",headers:{"X-CSRF-TOKEN":s,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:u})}else m=await fetch(`/admin/api/operasional/payroll/periods/${o}/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({status:f.value.status})});if(!(await m.json()).success){w.error("Gagal mengubah status");return}await D(),w.success("Perubahan tersimpan")},I=o=>o.qty_type==="fixed"||o.qty_type==="multiplier"?(Number(o.qty)||0)*(Number(o.unit_value)||0):o.qty_type==="percent"?(Number(o.qty)||0)/100*(Number(o.unit_value)||0):0,_=o=>{const e=Number(o||0);return`Rp. ${new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}`},q=o=>{if(o.group)return o.group;const e=(o.description||"").toLowerCase(),r=["gaji pokok","uang makan","uang transport"],l=["dana kolekan","kotak home","kotak publik","qurban"],s=["tunjangan jabatan","thr","perjalanan dinas","lembur"],m=["tidak masuk","terlambat"];return r.includes(e)?"penghasilan":l.includes(e)?"fundraising":s.includes(e)?"other":m.includes(e)?"deduction":"other"},S=o=>c.value.reduce((e,r)=>{if(q(r)===o){const l=I(r);return e+l}return e},0),F=U(()=>S("penghasilan")),E=U(()=>S("fundraising")),J=U(()=>S("other")),O=U(()=>S("deduction")),nt=U(()=>Number(F.value)+Number(E.value)+Number(J.value)),B=U(()=>Number(nt.value)-Number(O.value)),d=T(null),$=(o,e)=>{e&&e.stopPropagation();const r=o.id||o._tempId;d.value=d.value===r?null:r},g=(o,e)=>{e==="fixed"&&(e="multiplier"),o.qty_type=e,e==="percent"?((!o.unit||o.unit==="")&&(o.unit="%"),(o.unit_value===null||o.unit_value===void 0)&&(o.unit_value=0)):o.unit==="%"&&(o.unit=""),d.value=null},H=o=>{const e=(o.unit||"").toString();e.includes("%")?(o.qty_type="percent",e.trim()||(o.unit="%"),(o.unit_value===null||o.unit_value===void 0)&&(o.unit_value=0)):o.qty_type==="percent"&&(o.qty_type="multiplier",o.unit==="%"&&(o.unit=""))},G=()=>{d.value=null};return Y(()=>{document.addEventListener("click",G)}),ut(()=>{document.removeEventListener("click",G)}),(o,e)=>(h(),pt(mt,null,{default:ct(()=>{var r,l;return[t("div",yt,[e[41]||(e[41]=t("div",{class:"mb-6 flex items-center justify-between"},[t("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Edit Payroll Record"),t("div",{class:"flex items-center gap-3"})],-1)),t("div",ht,[t("div",bt,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium"},"Karyawan",-1)),t("div",null,a((r=f.value.employee)==null?void 0:r.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium"},"No. Induk",-1)),t("div",null,a(((l=f.value.employee)==null?void 0:l.no_induk)||"-"),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium"},"Periode",-1)),t("div",null,a(et(f.value.period)),1)])])]),t("div",null,[t("div",vt,[t("div",ft,[e[10]||(e[10]=t("h4",{class:"font-medium"},"Penghasilan",-1)),t("div",gt,[t("div",xt,[e[9]||(e[9]=V("Total: ",-1)),t("span",wt,a(_(F.value)),1)]),t("button",{onClick:e[0]||(e[0]=s=>M("penghasilan")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",kt,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2 w-24"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),b(R,null,A(c.value.filter(s=>q(s)==="penghasilan"),(s,m)=>(h(),b("tr",{key:s.id||s._tempId},[t("td",qt,a(m+1),1),t("td",Ct,[i(t("input",{"onUpdate:modelValue":n=>s.description=n,class:"w-full rounded border p-2"},null,8,Ut),[[p,s.description]])]),t("td",It,[i(t("input",{"onUpdate:modelValue":n=>s.qty=n,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,Tt),[[p,s.qty,void 0,{number:!0}]])]),t("td",Vt,[i(t("select",{"onUpdate:modelValue":n=>s.qty_type=n,class:"hidden"},[...e[11]||(e[11]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,jt),[[j,s.qty_type]])]),t("td",Nt,[i(t("input",{"onUpdate:modelValue":n=>s.unit=n,onInput:n=>H(s),class:"w-full rounded border p-2"},null,40,Mt),[[p,s.unit]])]),t("td",Pt,[i(t("input",{"onUpdate:modelValue":n=>s.unit_value=n,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,St),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",$t,[t("div",Ht,a(_(I(s))),1)]),t("td",Rt,[t("div",At,[t("button",{onClick:L(n=>$(s,n),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,Xt),d.value===(s.id||s._tempId)?(h(),b("div",Lt,[e[13]||(e[13]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",Dt,[t("button",{onClick:()=>{g(s,"percent"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,Ft),t("button",{onClick:()=>{g(s,"multiplier"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,Et)]),t("div",Jt,[t("button",{onClick:n=>{n.stopPropagation(),P(s),d.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,Ot)])])):X("",!0)])])]))),128))])])]),t("div",zt,[t("div",Kt,[e[16]||(e[16]=t("h4",{class:"font-medium"},"Fundraising",-1)),t("div",Bt,[t("div",Gt,[e[15]||(e[15]=V("Total: ",-1)),t("span",Qt,a(_(E.value)),1)]),t("button",{onClick:e[1]||(e[1]=s=>M("fundraising")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",Wt,[e[20]||(e[20]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2 w-24"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),b(R,null,A(c.value.filter(s=>q(s)==="fundraising"),(s,m)=>(h(),b("tr",{key:s.id||s._tempId},[t("td",Yt,a(m+1),1),t("td",Zt,[i(t("input",{"onUpdate:modelValue":n=>s.description=n,class:"w-full rounded border p-2"},null,8,te),[[p,s.description]])]),t("td",ee,[i(t("input",{"onUpdate:modelValue":n=>s.qty=n,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,se),[[p,s.qty,void 0,{number:!0}]])]),t("td",oe,[i(t("select",{"onUpdate:modelValue":n=>s.qty_type=n,class:"hidden"},[...e[17]||(e[17]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,ne),[[j,s.qty_type]])]),t("td",le,[i(t("input",{"onUpdate:modelValue":n=>s.unit=n,onInput:n=>H(s),class:"w-full rounded border p-2"},null,40,ae),[[p,s.unit]])]),t("td",ie,[i(t("input",{"onUpdate:modelValue":n=>s.unit_value=n,type:"number",class:"w-full rounded border p-2"},null,8,de),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",re,[t("div",ue,a(_(I(s))),1)]),t("td",pe,[t("div",ce,[t("button",{onClick:L(n=>$(s,n),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,_e),d.value===(s.id||s._tempId)?(h(),b("div",me,[e[19]||(e[19]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",ye,[t("button",{onClick:()=>{g(s,"percent"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,he),t("button",{onClick:()=>{g(s,"multiplier"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,be)]),t("div",ve,[t("button",{onClick:n=>{n.stopPropagation(),P(s),d.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,fe)])])):X("",!0)])])]))),128))])])]),t("div",ge,[t("div",xe,[e[22]||(e[22]=t("h4",{class:"font-medium"},"Lain-lain",-1)),t("div",we,[t("div",ke,[e[21]||(e[21]=V("Total: ",-1)),t("span",qe,a(_(J.value)),1)]),t("button",{onClick:e[2]||(e[2]=s=>M("other")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",Ce,[e[26]||(e[26]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2 w-24"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),b(R,null,A(c.value.filter(s=>q(s)==="other"),(s,m)=>(h(),b("tr",{key:s.id||s._tempId},[t("td",Ue,a(m+1),1),t("td",Ie,[i(t("input",{"onUpdate:modelValue":n=>s.description=n,class:"w-full rounded border p-2"},null,8,Te),[[p,s.description]])]),t("td",Ve,[i(t("input",{"onUpdate:modelValue":n=>s.qty=n,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,je),[[p,s.qty,void 0,{number:!0}]])]),t("td",Ne,[i(t("select",{"onUpdate:modelValue":n=>s.qty_type=n,class:"hidden"},[...e[23]||(e[23]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,Me),[[j,s.qty_type]])]),t("td",Pe,[i(t("input",{"onUpdate:modelValue":n=>s.unit=n,onInput:n=>H(s),class:"w-full rounded border p-2"},null,40,Se),[[p,s.unit]])]),t("td",$e,[i(t("input",{"onUpdate:modelValue":n=>s.unit_value=n,type:"number",class:"w-full rounded border p-2"},null,8,He),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",Re,[t("div",Ae,a(_(I(s))),1)]),t("td",Xe,[t("div",Le,[t("button",{onClick:L(n=>$(s,n),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[24]||(e[24]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,De),d.value===(s.id||s._tempId)?(h(),b("div",Fe,[e[25]||(e[25]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",Ee,[t("button",{onClick:()=>{g(s,"percent"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,Je),t("button",{onClick:()=>{g(s,"multiplier"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,Oe)]),t("div",ze,[t("button",{onClick:n=>{n.stopPropagation(),P(s),d.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,Ke)])])):X("",!0)])])]))),128))])])]),t("div",Be,[t("div",Ge,[e[28]||(e[28]=t("h4",{class:"font-medium"},"Potongan",-1)),t("div",Qe,[t("div",We,[e[27]||(e[27]=V("Total: ",-1)),t("span",Ye,a(_(O.value)),1)]),t("button",{onClick:e[3]||(e[3]=s=>M("deduction")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",Ze,[e[32]||(e[32]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2 w-24"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(h(!0),b(R,null,A(c.value.filter(s=>q(s)==="deduction"),(s,m)=>(h(),b("tr",{key:s.id||s._tempId},[t("td",ts,a(m+1),1),t("td",es,[i(t("input",{"onUpdate:modelValue":n=>s.description=n,class:"w-full rounded border p-2"},null,8,ss),[[p,s.description]])]),t("td",os,[i(t("input",{"onUpdate:modelValue":n=>s.qty=n,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,ns),[[p,s.qty,void 0,{number:!0}]])]),t("td",ls,[i(t("select",{"onUpdate:modelValue":n=>s.qty_type=n,class:"hidden"},[...e[29]||(e[29]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,as),[[j,s.qty_type]])]),t("td",is,[i(t("input",{"onUpdate:modelValue":n=>s.unit=n,onInput:n=>H(s),class:"w-full rounded border p-2"},null,40,ds),[[p,s.unit]])]),t("td",rs,[i(t("input",{"onUpdate:modelValue":n=>s.unit_value=n,type:"number",class:"w-full rounded border p-2"},null,8,us),[[p,s.unit_value,void 0,{number:!0}]])]),t("td",ps,[t("div",cs,a(_(I(s))),1)]),t("td",_s,[t("div",ms,[t("button",{onClick:L(n=>$(s,n),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[30]||(e[30]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,ys),d.value===(s.id||s._tempId)?(h(),b("div",hs,[e[31]||(e[31]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",bs,[t("button",{onClick:()=>{g(s,"percent"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,vs),t("button",{onClick:()=>{g(s,"multiplier"),d.value=null},class:x(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,fs)]),t("div",gs,[t("button",{onClick:n=>{n.stopPropagation(),P(s),d.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,xs)])])):X("",!0)])])]))),128))])])]),t("div",ws,[t("div",ks,[t("div",qs,[e[33]||(e[33]=t("div",null,"Total Penghasilan",-1)),t("div",Cs,a(_(F.value)),1)]),t("div",Us,[e[34]||(e[34]=t("div",null,"Total Fundraising",-1)),t("div",Is,a(_(E.value)),1)]),t("div",Ts,[e[35]||(e[35]=t("div",null,"Total Lain-lain",-1)),t("div",Vs,a(_(J.value)),1)]),t("div",js,[e[36]||(e[36]=t("div",null,"Total Potongan",-1)),t("div",Ns,a(_(O.value)),1)]),e[38]||(e[38]=t("div",{class:"border-t mt-2 mb-2"},null,-1)),t("div",Ms,[e[37]||(e[37]=t("div",{class:"font-semibold text-lg"},"Take Home Pay",-1)),t("div",Ps,a(_(B.value)),1)])])]),t("div",Ss,[t("div",$s,[t("div",Hs,[t("div",Rs,[e[39]||(e[39]=V("Take Home: ",-1)),t("span",As,a(_(B.value)),1)])]),t("div",Xs,[t("div",Ls,[i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>f.value.status=s),class:"h-11 rounded-lg border px-4 py-2 text-sm text-gray-800"},[...e[40]||(e[40]=[t("option",{value:"pending"},"pending",-1),t("option",{value:"locked"},"locked",-1),t("option",{value:"transferred"},"transferred",-1)])],512),[[j,f.value.status]]),t("button",{onClick:ot,class:"rounded bg-brand-500 px-4 py-2 text-white"},"Simpan"),t("button",{onClick:e[5]||(e[5]=s=>_t(Z).back()),class:"rounded border px-4 py-2"},"Kembali")])])])])])])]}),_:1}))}});export{Os as default};
