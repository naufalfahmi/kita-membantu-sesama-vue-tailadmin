import{C as D}from"./component-BE0ZUxfh.js";import{d as R,b as n,M as T,f as C,g as F,o as S,w as P,a as t,j as p,u as f,S as B}from"./admin-D1J7V-ZI.js";import{_ as N}from"./AdminLayout.vue_vue_type_script_setup_true_lang-hhmXvr9A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},j={class:"mb-6 rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]"},O={class:"grid grid-cols-1 gap-4 md:grid-cols-3 lg:grid-cols-6"},U={class:"flex-1"},V={class:"relative",style:{width:"100%",height:"600px"}},A={class:"ag-theme-alpine dark:ag-theme-alpine-dark",style:{width:"100%",height:"100%"}},H=R({__name:"ProgramSharesSummary",setup(M){const h=n(null),d=T(),s=n(null),_={mode:"range",dateFormat:"Y-m-d",altInput:!0,altFormat:"d F Y"},m=n([{headerName:"Program",field:"program_name",flex:2},{headerName:"Total Transaksi",field:"total_transaksi",flex:1,valueFormatter:i}]),b={resizable:!0,sortable:!0},u=n([]),c=n([]);function i(e){return e.value!==void 0&&e.value!==null?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e.value):""}async function g(){try{let e="/admin/api/keuangan/program-shares-summary";if(s.value&&Array.isArray(s.value)&&s.value.length===2){const[o,w]=s.value;e+=`?start_date=${encodeURIComponent(o)}&end_date=${encodeURIComponent(w)}`}const a=await(await fetch(e,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})).json();if(!a.success){d.error("Gagal memuat ringkasan");return}const G=["program_name","total_transaksi",...a.data.columns??[]],l=[];l.push({headerName:"Program",field:"program_name",flex:2}),l.push({headerName:"Total Transaksi",field:"total_transaksi",flex:1,valueFormatter:i});const y=a.data&&a.data.share_type_labels?a.data.share_type_labels:{};(a.data.columns??[]).forEach(o=>{l.push({headerName:y[o]||x(o),field:o,flex:1,valueFormatter:i})}),m.value=l,u.value=a.data.rows||[];const v=Object.assign({program_name:"TOTAL"},a.data.totals||{}),k=Object.assign({program_name:"DISBURSED TOTALS"},a.data.disbursed_totals||{});c.value=[v,k]}catch(e){console.error(e),d.error("Terjadi kesalahan saat memuat ringkasan")}}function x(e){return{dp:"DP",ops_1:"OPS 1",ops_2:"OPS 2",program:"Program",fee_mitra:"Fee Mitra",bonus:"Bonus",championship:"Championship"}[e]||e.replace(/_/g," ").toUpperCase()}return C(()=>{g()}),(e,r)=>(S(),F(N,null,{default:P(()=>[t("div",I,[t("div",{class:"mb-6 flex items-center justify-between"},[r[1]||(r[1]=t("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Ringkasan Program - Shares",-1)),t("div",{class:"flex items-center gap-3"},[t("button",{onClick:g,class:"flex items-center gap-2 rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600"}," Muat Ulang ")])]),t("div",j,[t("div",O,[t("div",U,[r[2]||(r[2]=t("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Rentang Transaksi (opsional)",-1)),p(f(D),{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=a=>s.value=a),config:_,class:"h-11 w-full rounded-lg border border-gray-300 px-4 py-2.5 text-sm",placeholder:"Pilih rentang"},null,8,["modelValue"])])])]),t("div",V,[t("div",A,[p(f(B),{ref_key:"agGridRef",ref:h,class:"ag-theme-alpine",style:{width:"100%",height:"100%"},columnDefs:m.value,defaultColDef:b,rowData:u.value,pinnedBottomRowData:c.value,animateRows:!0},null,8,["columnDefs","rowData","pinnedBottomRowData"])])])])]),_:1}))}});export{H as default};
