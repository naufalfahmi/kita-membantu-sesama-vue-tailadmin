import{d as qe,H as Xe,I as Oe,A as p,b as i,B as D,f as we,g as te,o,w as Ne,a as e,c as l,F as m,l as w,n as f,G as We,t as n,i as g,j as U,u as re,D as _e,m as E,k as Ue,v as Ye}from"./admin-CV1dLeYC.js";import{C as Je}from"./component-CjC3Kj9w.js";import{u as H,w as je}from"./xlsx-3SA47z_C.js";import{_ as Ze}from"./AdminLayout.vue_vue_type_script_setup_true_lang--iKKsbz2.js";import{S as Me}from"./SearchableSelect-FodszdIM.js";import{_ as Ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Qe={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},ea={role:"tablist",class:"mb-8 flex flex-wrap items-center justify-center gap-4 border-b border-gray-200 dark:border-gray-700"},aa=["aria-selected","aria-controls","id","onClick"],ta={class:"space-y-6"},ra={key:0,role:"tabpanel",id:"tabpanel-balance","aria-labelledby":"tab-balance"},sa={class:"mb-6"},na={class:"grid grid-cols-1 gap-3 md:grid-cols-12"},oa={class:"md:col-span-4"},la={class:"md:col-span-3"},da={class:"md:col-span-3"},ia={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2"},ua={class:"rounded-lg border border-gray-200 bg-gradient-to-br from-green-500 to-green-600 p-6 shadow-lg dark:border-gray-700 dark:from-green-600 dark:to-green-700"},ga={class:"flex items-center justify-between"},ca={class:"text-3xl font-bold text-white"},pa={class:"rounded-lg border border-gray-200 bg-gradient-to-br from-red-500 to-red-600 p-6 shadow-lg dark:border-gray-700 dark:from-red-600 dark:to-red-700"},ba={class:"flex items-center justify-between"},xa={class:"text-3xl font-bold text-white"},ka={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2"},ma={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},ya={class:"flex items-center justify-between"},va={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},ha={class:"mt-1 text-xs text-gray-500 dark:text-gray-500"},fa={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},wa={class:"flex items-center justify-between"},_a={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},ja={class:"mt-1 text-xs text-gray-500 dark:text-gray-500"},Ma={class:"mb-6 grid grid-cols-1 gap-4 lg:grid-cols-2"},Pa={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},Ca={class:"flex items-center justify-center"},Ba={class:"rounded-lg border border-gray-200 bg-gradient-to-br from-brand-500 to-brand-600 p-6 shadow-lg dark:border-gray-700 dark:from-brand-600 dark:to-brand-700"},Ta={class:"space-y-4"},Sa={class:"text-3xl font-bold text-white"},Da={class:"flex items-center justify-between border-t border-white/20 pt-4"},La={class:"text-lg font-semibold text-white"},Va={class:"text-right"},za={class:"mb-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},Ha={class:"mb-4 flex items-center justify-between"},Fa={class:"text-sm text-gray-600 dark:text-gray-400"},Ra={class:"font-bold text-purple-600 dark:text-purple-400"},Ia={key:0,class:"mb-6 grid grid-cols-1 gap-3 sm:grid-cols-3"},$a={class:"flex items-center justify-between"},Ea={class:"flex-1"},Ka={class:"mb-1 flex items-center gap-2"},Aa={class:"text-sm font-medium text-gray-800 dark:text-white/90"},qa={class:"text-xs text-gray-600 dark:text-gray-400"},Xa={class:"relative"},Oa={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-gray-900/80"},Na={key:2,class:"py-12 text-center"},Wa={class:"mt-6"},Ua={class:"relative overflow-x-auto"},Ya={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-gray-900/80"},Ja={key:1,class:"w-full table-auto"},Za={class:"py-3 text-sm font-medium text-gray-800 dark:text-white/90"},Ga={class:"flex items-center gap-2"},Qa=["onClick"],et={class:"py-3 text-right text-sm text-orange-600 dark:text-orange-400"},at={class:"py-3 text-right text-sm text-purple-600 dark:text-purple-400"},tt={key:0,class:"bg-gray-50 dark:bg-gray-800/50"},rt={colspan:"3",class:"p-4"},st={class:"overflow-hidden rounded-lg border border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-900"},nt={class:"bg-gray-50 px-4 py-2 text-xs font-semibold uppercase tracking-wider text-gray-500 dark:bg-gray-800 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700"},ot={key:0,class:"p-4 text-center text-sm text-gray-500"},lt={key:1,class:"w-full text-left text-sm"},dt={class:"divide-y divide-gray-200 dark:divide-gray-700"},it={class:"px-4 py-2 text-gray-600 dark:text-gray-300 whitespace-nowrap"},ut={class:"px-4 py-2 text-gray-600 dark:text-gray-300"},gt={class:"px-4 py-2 text-gray-600 dark:text-gray-300"},ct={class:"px-4 py-2 text-right font-medium text-gray-800 dark:text-white"},pt={class:"border-t-2 border-gray-300 dark:border-gray-600"},bt={class:"pt-3 text-right text-sm font-bold text-orange-600 dark:text-orange-400"},xt={class:"pt-3 text-right text-sm font-bold text-purple-600 dark:text-purple-400"},kt={key:2,class:"py-12 text-center"},mt={class:"mb-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},yt={class:"mb-4 flex items-center justify-between"},vt=["disabled"],ht={class:"relative overflow-x-auto"},ft={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-gray-900/80"},wt={class:"w-full table-auto"},_t={class:"px-4 py-3 text-sm font-medium text-gray-800 dark:text-white/90"},jt={class:"flex items-center gap-2"},Mt={key:1,class:"inline-flex items-center gap-2"},Pt={key:2},Ct={class:"px-4 py-3 text-right text-sm font-semibold text-green-600 dark:text-green-400"},Bt={class:"px-4 py-3 text-right text-sm text-orange-600 dark:text-orange-400"},Tt={class:"px-4 py-3 text-right text-sm text-purple-600 dark:text-purple-400"},St={class:"px-4 py-3 text-right text-sm font-semibold text-red-600 dark:text-red-400"},Dt={key:0,class:"border-b border-gray-100 bg-blue-50/30 dark:border-gray-800 dark:bg-blue-900/5"},Lt={colspan:"6",class:"px-4 py-4"},Vt={class:"ml-8 space-y-4"},zt={key:0},Ht={class:"space-y-1"},Ft={class:"text-gray-700 dark:text-gray-300"},Rt={class:"font-semibold text-green-600 dark:text-green-400"},It={key:1},$t={class:"space-y-1"},Et={class:"text-gray-700 dark:text-gray-300"},Kt={class:"font-semibold text-orange-600 dark:text-orange-400"},At={key:2},qt={class:"space-y-1"},Xt={class:"text-gray-700 dark:text-gray-300"},Ot={class:"font-semibold text-purple-600 dark:text-purple-400"},Nt={key:3,class:"text-sm text-gray-500 dark:text-gray-500"},Wt={key:0},Ut={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},Yt={class:"mb-4 flex gap-2 border-b border-gray-200 dark:border-gray-700"},Jt=["onClick"],Zt={class:"relative overflow-x-auto"},Gt={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-gray-900/80"},Qt={class:"w-full table-auto"},er={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},ar={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},tr={class:"px-4 py-3"},rr={class:"px-4 py-3 text-right text-sm font-semibold text-green-600 dark:text-green-400"},sr={class:"px-4 py-3 text-right text-sm font-semibold text-red-600 dark:text-red-400"},nr={class:"px-4 py-3 text-right text-sm font-medium text-gray-800 dark:text-white/90"},or={key:0},lr={key:0,class:"mt-4 flex items-center justify-between"},dr={class:"text-sm text-gray-600 dark:text-gray-400"},ir={class:"flex gap-2"},ur=["disabled"],gr=["disabled"],cr={key:1,role:"tabpanel",id:"tabpanel-mitra","aria-labelledby":"tab-mitra"},pr={class:"mb-6 rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]"},br={class:"flex gap-4"},xr={class:"flex-1"},kr={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},mr={class:"mb-4 flex items-center justify-between"},yr=["onClick"],vr={class:"mb-2 text-lg font-semibold text-gray-800 dark:text-white/90"},hr={class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},fr={class:"flex items-center justify-between"},wr={class:"text-base font-semibold text-gray-800 dark:text-white/90"},_r={class:"text-base font-semibold text-gray-800 dark:text-white/90"},jr={key:0,class:"flex flex-col items-center justify-center py-12 text-center"},Mr={class:"text-lg font-medium text-gray-600 dark:text-gray-400"},Pr={key:0,class:"mt-2 text-sm text-gray-500 dark:text-gray-500"},Cr={key:1,class:"mt-6 flex items-center justify-between"},Br={class:"text-sm text-gray-600 dark:text-gray-400"},Tr={class:"flex gap-2"},Sr=["disabled"],Dr={class:"flex gap-1"},Lr=["onClick"],Vr=["disabled"],zr=qe({__name:"LaporanKeuangan",setup(Hr){const Y=Xe(),Pe=Oe();p(()=>Y.meta.title||"Laporan Keuangan");const Ce=r=>r?new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Be=[{id:"balance",label:"Balance",icon:{template:`
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5z" />
    </svg>
  `}},{id:"mitra",label:"Mitra",icon:{template:`
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
    </svg>
  `}}],se=["balance","mitra"],ne=Y.query.tab,M=i(se.includes(ne)?ne:"balance");D(()=>Y.query.tab,r=>{r&&se.includes(r)&&(M.value=r)}),i("");const oe=i(""),le=i(""),de=i(""),ie=i(""),S=i(""),J=i(1),x=i(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),k=i(new Date().toISOString().split("T")[0]);i(!1);const _=i({saldo_awal:0,totalMasuk:0,totalKeluar:0,saldo_akhir:0}),P=i([]),c=i({current_page:1,last_page:1,per_page:20,total:0}),Te={mode:"range",dateFormat:"Y-m-d",altInput:!0,altFormat:"d/m/Y",wrap:!1},L=i([x.value,k.value]);let Z=null;const ue=(r=400)=>{Z&&clearTimeout(Z),Z=setTimeout(()=>{c.value.current_page=1,z(1),Q(),ke(),me()},r)};D(L,r=>{if(Array.isArray(r))x.value=r[0]||x.value,k.value=r[1]||k.value;else if(typeof r=="string"){const a=r.split(" to ");x.value=a[0]||x.value,k.value=a[1]||k.value}ue()});const ge=i([]),ce=i([]),y=i(""),v=i(""),pe=i(""),be=i(""),Se=p(()=>{const r=ge.value.map(a=>({value:String(a.id),label:a.nama_program||a.name||a.nama}));return[{value:"",label:"Semua Program"},...r]}),De=p(()=>{const r=ce.value.map(a=>({value:String(a.id),label:a.nama||a.name}));return[{value:"",label:"Semua Kantor Cabang"},...r]});D([y,v],()=>{ue()});const j=i({pengajuan_dana:0,pengajuan_dana_percentage:0,penyaluran:0,penyaluran_percentage:0}),V=i([]),K=i(!1),A=i(!1),F=i(null),h=i({total:0,breakdown:[]}),q=i(!1),T=i([]),R=i(null),X=i(!1),xe=[{value:"all",label:"Semua"},{value:"masuk",label:"Pemasukan"},{value:"pengajuan_dana",label:"Pengajuan Dana"},{value:"penyaluran",label:"Penyaluran"}],I=i("all");D(I,()=>{K.value=!0,c.value.current_page=1,setTimeout(()=>{K.value=!1},300)});const O=p(()=>{if(!P.value)return[];switch(I.value){case"masuk":return P.value.filter(r=>r.masuk>0);case"pengajuan_dana":return P.value.filter(r=>r.keluar>0&&r.keterangan.toLowerCase().includes("pengajuan"));case"penyaluran":return P.value.filter(r=>r.keluar>0&&r.keterangan.toLowerCase().includes("penyalur"));default:return P.value}}),Le=p(()=>({chart:{fontFamily:"Outfit, sans-serif",type:"donut"},colors:["#f97316","#a855f7"],labels:["Pengajuan Dana","Penyaluran"],legend:{position:"bottom",labels:{colors:"#6B7280"}},dataLabels:{enabled:!0,formatter:function(r){return r.toFixed(1)+"%"}},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,name:{show:!0,fontSize:"14px",fontWeight:600,color:"#374151"},value:{show:!0,fontSize:"24px",fontWeight:700,color:"#1F2937",formatter:function(r){return d(parseFloat(r))}},total:{show:!0,label:"Total",fontSize:"14px",fontWeight:600,color:"#6B7280",formatter:function(r){const a=r.globals.seriesTotals.reduce((t,s)=>t+s,0);return d(a)}}}}}}})),Ve=p(()=>[j.value.pengajuan_dana||0,j.value.penyaluran||0]),ze=r=>{const a=["#3b82f6","#10b981","#f59e0b","#ef4444","#ec4899","#6366f1","#14b8a6","#f97316","#8b5cf6","#06b6d4"],t=[];for(let s=0;s<r;s++)t.push(a[s%a.length]);return t},He=p(()=>{const r=h.value.breakdown.length,a=ze(r);return{chart:{fontFamily:"Outfit, sans-serif",type:"bar",toolbar:{show:!1}},colors:a,plotOptions:{bar:{horizontal:!0,barHeight:"70%",distributed:!0}},dataLabels:{enabled:!0,formatter:function(t,s){return a[s.dataPointIndex],d(t)},offsetX:10,style:{fontSize:"12px"}},xaxis:{categories:h.value.breakdown.map(t=>t.alias),labels:{style:{colors:"#6B7280"},formatter:function(t){return d(t)}}},yaxis:{labels:{style:{colors:"#6B7280"}}},legend:{show:!1},tooltip:{y:{formatter:function(t,s){const u=h.value.breakdown[s.dataPointIndex];return`${d(t)} (${u.percentage}% • ${u.count} transaksi)`}}},grid:{borderColor:"#e5e7eb"}}}),Fe=p(()=>[{name:"Jumlah Penyaluran",data:h.value.breakdown.map(r=>r.amount)}]);i(!1);const N=i("all");p(()=>N.value==="masuk"?"Pemasukan":N.value==="keluar"?"Pengeluaran":"Semua"),p(()=>P.value?N.value==="masuk"?P.value.filter(r=>r.masuk>0):N.value==="keluar"?P.value.filter(r=>r.keluar>0):P.value:[]),i(null),p(()=>({chart:{fontFamily:"Outfit, sans-serif",type:"radialBar"},colors:["#10b981","#ef4444"],plotOptions:{radialBar:{startAngle:-90,endAngle:90,hollow:{size:"70%"},track:{background:"#E4E7EC",strokeWidth:"100%",margin:5},dataLabels:{name:{show:!1},value:{fontSize:"24px",fontWeight:"600",offsetY:0,color:"#1D2939",formatter:function(r){return r.toFixed(1)+"%"}}}}},fill:{type:"solid"},stroke:{lineCap:"round"},labels:["Pemasukan"]}));const G=p(()=>{const r=_.value.totalMasuk||0,a=_.value.totalKeluar||0,t=r+a;return t===0?0:r/t*100});p(()=>G.value.toFixed(2)),p(()=>(100-G.value).toFixed(2)),p(()=>[G.value]);const z=async(r=1)=>{try{console.log("fetchBalanceData start",{start:x.value,end:k.value,program:y.value,kantor:v.value,page:r}),c.value.current_page=r;const a=new URLSearchParams;a.append("start",x.value),a.append("end",k.value),a.append("page",String(r)),a.append("per_page",String(c.value.per_page||20)),y.value&&a.append("program_id",y.value),v.value&&a.append("kantor_cabang_id",v.value);const t=await fetch(`/admin/api/laporan/keuangan?${a.toString()}`,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok){console.error("Error fetching laporan keuangan",t.status);return}const s=await t.json();if(console.log("fetchBalanceData json",s),!s.success){console.error("API returned error",s.message);return}const u=s.data;_.value=u.totals||{saldo_awal:0,totalMasuk:0,totalKeluar:0,saldo_akhir:0},P.value=u.transactions||[],c.value={...u.pagination||{},per_page:u.pagination&&u.pagination.per_page||20},u.breakdown&&(j.value={pengajuan_dana:u.breakdown.pengajuan_dana||0,pengajuan_dana_percentage:u.breakdown.pengajuan_percentage||0,penyaluran:u.breakdown.penyaluran||0,penyaluran_percentage:u.breakdown.penyaluran_percentage||0},console.log("Balance breakdown loaded:",{pengajuan_dana:j.value.pengajuan_dana,pengajuan_percentage:j.value.pengajuan_dana_percentage,penyaluran:j.value.penyaluran,penyaluran_percentage:j.value.penyaluran_percentage})),await Q()}catch(a){console.error("Exception fetching laporan keuangan",a)}},Q=async()=>{try{A.value=!0;const r=new URLSearchParams;r.append("start",x.value),r.append("end",k.value),y.value&&r.append("program_id",y.value),v.value&&r.append("kantor_cabang_id",v.value);const a=await fetch(`/admin/api/laporan/keuangan/program-breakdown?${r.toString()}`,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!a.ok){console.error("Program breakdown fetch failed:",a.status,a.statusText);return}const t=await a.json();console.log("Program breakdown response:",t),t.success&&(V.value=t.data||[],console.log("Program breakdown data loaded:",V.value.length,"items"))}catch(r){console.error("Error fetching program breakdown",r)}finally{A.value=!1}},ke=async()=>{try{q.value=!0;const r=new URLSearchParams;r.append("start",x.value),r.append("end",k.value),y.value&&r.append("program_id",y.value),v.value&&r.append("kantor_cabang_id",v.value);const a=await fetch(`/admin/api/laporan/keuangan/penyaluran-by-alias?${r.toString()}`,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!a.ok)return;const t=await a.json();t.success&&(h.value=t.data||{total:0,breakdown:[]})}catch(r){console.error("Error fetching penyaluran by alias",r)}finally{q.value=!1}},me=async()=>{try{X.value=!0;const r=new URLSearchParams;r.append("start",x.value),r.append("end",k.value),y.value&&r.append("program_id",y.value),v.value&&r.append("kantor_cabang_id",v.value);const a=await fetch(`/admin/api/laporan/keuangan/expense-type-breakdown?${r.toString()}`,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!a.ok)return;const t=await a.json();t.success&&(T.value=t.data||[])}catch(r){console.error("Error fetching expense type breakdown",r)}finally{X.value=!1}},Re=()=>{const r=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],a=new Date().toISOString().split("T")[0];x.value=r,k.value=a,L.value=[r,a],y.value="",v.value="",c.value.current_page=1,z(1)},ye=async()=>{var r,a;try{const t=await fetch("/admin/api/program?per_page=200",{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)return;const s=await t.json();s.success&&(ge.value=s.data||((r=s.data)==null?void 0:r.data)||((a=s.data)==null?void 0:a.items)||[])}catch(t){console.error("Error fetching programs",t)}},ve=async()=>{var r,a;try{const t=await fetch("/admin/api/kantor-cabang?per_page=200",{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)return;const s=await t.json();s.success&&(ce.value=s.data||((r=s.data)==null?void 0:r.data)||((a=s.data)==null?void 0:a.items)||[])}catch(t){console.error("Error fetching kantor cabang",t)}};D(M,r=>{r==="balance"&&(L.value=[x.value,k.value],z(1),ye(),ve())}),we(()=>{M.value==="balance"&&(L.value=[x.value,k.value],Promise.all([z(1),ye(),ve(),Q(),ke(),me()]))});const Ie=()=>{const r=V.value.map(u=>({Program:u.program_nama,Pemasukan:d(u.pemasukan||0),"Pengajuan Dana":d(u.pengajuan_dana||0),Penyaluran:d(u.penyaluran||0),"Total Pengeluaran":d((u.pengajuan_dana||0)+(u.penyaluran||0)),Saldo:d(u.saldo||0)})),a=H.json_to_sheet(r),t=H.book_new();H.book_append_sheet(t,a,"Breakdown Program");const s=`Breakdown_Program_${x.value}_${k.value}.xlsx`;je(t,s)},$e=()=>{var C;const r=O.value.map(B=>({Tanggal:B.tanggal,Keterangan:B.keterangan,Tipe:B.masuk>0?"Pemasukan":"Pengeluaran",Masuk:B.masuk>0?d(B.masuk):"-",Keluar:B.keluar>0?d(B.keluar):"-",Saldo:d(B.saldo)})),a=H.json_to_sheet(r),t=H.book_new();H.book_append_sheet(t,a,"Detail Transaksi");const u=`Transaksi_${((C=xe.find(B=>B.value===I.value))==null?void 0:C.label)||"Semua"}_${x.value}_${k.value}.xlsx`;je(t,u)},d=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r);p(()=>{let r=[...Ee];if(oe.value&&(r=r.filter(a=>{const t=new Date(a.tanggal),s=new Date(oe.value);return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()})),le.value){const a=le.value.toLowerCase();r=r.filter(t=>t.keterangan.toLowerCase().includes(a))}if(de.value){const a=parseFloat(de.value);isNaN(a)||(r=r.filter(t=>t.masuk>=a))}if(ie.value){const a=parseFloat(ie.value);isNaN(a)||(r=r.filter(t=>t.keluar>=a))}return r});const Ee=[{id:"1",tanggal:"2024-01-15",keterangan:"Donasi dari PT ABC",masuk:5e7,keluar:0,saldo:5e7},{id:"2",tanggal:"2024-01-16",keterangan:"Pembayaran gaji karyawan",masuk:0,keluar:25e6,saldo:25e6},{id:"3",tanggal:"2024-01-17",keterangan:"Donasi online",masuk:1e7,keluar:0,saldo:35e6},{id:"4",tanggal:"2024-01-18",keterangan:"Biaya operasional",masuk:0,keluar:5e6,saldo:3e7},{id:"5",tanggal:"2024-01-19",keterangan:"Zakat dari donatur",masuk:75e6,keluar:0,saldo:105e6},{id:"6",tanggal:"2024-01-20",keterangan:"Penyaluran ke program pendidikan",masuk:0,keluar:3e7,saldo:75e6},{id:"7",tanggal:"2024-01-21",keterangan:"Donasi dari Yayasan XYZ",masuk:1e8,keluar:0,saldo:175e6},{id:"8",tanggal:"2024-01-22",keterangan:"Biaya administrasi",masuk:0,keluar:2e6,saldo:173e6}],W=i([]),b=i({current_page:1,last_page:1,per_page:12,total:0}),he=i(!1),$=async(r=1)=>{try{he.value=!0;const a=new URLSearchParams;a.append("page",String(r)),a.append("per_page",String(b.value.per_page||12)),S.value&&a.append("search",S.value);const t=await fetch(`/admin/api/laporan/mitra?${a.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)return;const s=await t.json();if(!s.success)return;W.value=s.data||[],b.value={...s.pagination||{},per_page:b.value.per_page}}catch(a){console.error("Error fetching mitra list",a)}finally{he.value=!1}};let ee=null;D(S,()=>{ee&&clearTimeout(ee),ee=setTimeout(()=>$(1),400)});const ae=p(()=>Math.ceil(b.value.total/b.value.per_page)),fe=p(()=>(b.value.current_page-1)*b.value.per_page),Ke=p(()=>Math.min(fe.value+b.value.per_page,b.value.total));D(M,r=>{r==="mitra"&&$(1)}),we(()=>{M.value==="mitra"&&$(1)});const Ae=r=>{Pe.push(`/laporan/detail-mitra/${r}`)};return(r,a)=>(o(),te(Ze,null,{default:Ne(()=>[e("div",Qe,[a[60]||(a[60]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"mb-2 text-3xl font-bold text-gray-800 dark:text-white/90 sm:text-4xl"}," Laporan Keuangan "),e("p",{class:"text-lg text-gray-600 dark:text-gray-400"}," Ringkasan dan detail keuangan organisasi ")],-1)),e("div",ea,[(o(),l(m,null,w(Be,t=>e("button",{key:t.id,role:"tab","aria-selected":M.value===t.id,"aria-controls":`tabpanel-${t.id}`,id:`tab-${t.id}`,onClick:s=>M.value=t.id,class:f(["flex items-center gap-2 rounded-t-lg px-6 py-3 text-sm font-medium transition-all duration-200",M.value===t.id?"border-b-2 border-brand-500 bg-brand-50 text-brand-600 dark:bg-brand-500/10 dark:text-brand-400":"text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-white/[0.03]"])},[(o(),te(We(t.icon),{class:"h-5 w-5"})),e("span",null,n(t.label),1)],10,aa)),64))]),e("div",ta,[M.value==="balance"?(o(),l("div",ra,[e("div",sa,[e("div",na,[e("div",oa,[a[11]||(a[11]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Rentang Tanggal",-1)),U(re(Je),{modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=t=>L.value=t),config:Te,class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:border-brand-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90",placeholder:"Pilih rentang tanggal"},null,8,["modelValue"])]),e("div",la,[a[12]||(a[12]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Program",-1)),U(Me,{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=t=>y.value=t),options:Se.value,placeholder:"Semua Program","search-input":pe.value,"onUpdate:searchInput":a[2]||(a[2]=t=>pe.value=t)},null,8,["modelValue","options","search-input"])]),e("div",da,[a[13]||(a[13]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Kantor Cabang",-1)),U(Me,{modelValue:v.value,"onUpdate:modelValue":a[3]||(a[3]=t=>v.value=t),options:De.value,placeholder:"Semua Kantor Cabang","search-input":be.value,"onUpdate:searchInput":a[4]||(a[4]=t=>be.value=t)},null,8,["modelValue","options","search-input"])]),e("div",{class:"md:col-span-2 flex items-end justify-end"},[e("button",{onClick:Re,class:"h-11 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-white/[0.03]"}," Reset ")])])]),e("div",ia,[e("div",ua,[e("div",ga,[e("div",null,[a[14]||(a[14]=e("p",{class:"mb-1 text-sm font-medium text-white/80"},"Total Pemasukan",-1)),e("h3",ca,n(d(_.value.totalMasuk||0)),1)]),a[15]||(a[15]=e("div",{class:"flex h-14 w-14 items-center justify-center rounded-lg bg-white/20"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1))])]),e("div",pa,[e("div",ba,[e("div",null,[a[16]||(a[16]=e("p",{class:"mb-1 text-sm font-medium text-white/80"},"Total Pengeluaran",-1)),e("h3",xa,n(d(_.value.totalKeluar||0)),1)]),a[17]||(a[17]=e("div",{class:"flex h-14 w-14 items-center justify-center rounded-lg bg-white/20"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})])],-1))])])]),e("div",ka,[e("div",ma,[e("div",ya,[e("div",null,[a[18]||(a[18]=e("p",{class:"mb-1 text-sm font-medium text-gray-600 dark:text-gray-400"},"Pengajuan Dana",-1)),e("p",va,n(d(j.value.pengajuan_dana||0)),1),e("p",ha,n(j.value.pengajuan_dana_percentage||0)+"% dari total pengeluaran ",1)]),a[19]||(a[19]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100 dark:bg-orange-500/10"},[e("svg",{class:"h-6 w-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))])]),e("div",fa,[e("div",wa,[e("div",null,[a[20]||(a[20]=e("p",{class:"mb-1 text-sm font-medium text-gray-600 dark:text-gray-400"},"Penyaluran",-1)),e("p",_a,n(d(j.value.penyaluran||0)),1),e("p",ja,n(j.value.penyaluran_percentage||0)+"% dari total pengeluaran ",1)]),a[21]||(a[21]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100 dark:bg-purple-500/10"},[e("svg",{class:"h-6 w-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])])]),e("div",Ma,[e("div",Pa,[a[22]||(a[22]=e("h3",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white/90"},"Breakdown Pengeluaran",-1)),e("div",Ca,[U(re(_e),{type:"donut",height:"280",options:Le.value,series:Ve.value},null,8,["options","series"])])]),e("div",Ba,[a[26]||(a[26]=e("h3",{class:"mb-4 text-lg font-semibold text-white/90"},"Saldo",-1)),e("div",Ta,[e("div",null,[a[23]||(a[23]=e("p",{class:"text-sm text-white/80"},"Saldo Akhir",-1)),e("p",Sa,n(d(_.value.saldo_akhir||0)),1)]),e("div",Da,[e("div",null,[a[24]||(a[24]=e("p",{class:"text-xs text-white/70"},"Saldo Awal",-1)),e("p",La,n(d(_.value.saldo_awal||0)),1)]),e("div",Va,[a[25]||(a[25]=e("p",{class:"text-xs text-white/70"},"Selisih",-1)),e("p",{class:f(["text-lg font-semibold",_.value.saldo_akhir-_.value.saldo_awal>=0?"text-green-200":"text-red-200"])},n(d(Math.abs(_.value.saldo_akhir-_.value.saldo_awal))),3)])])])])]),e("div",za,[e("div",Ha,[a[28]||(a[28]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Breakdown per Tipe Pengeluaran",-1)),e("div",Fa,[a[27]||(a[27]=E(" Total: ",-1)),e("span",Ra,n(d(h.value.total||0)),1)])]),h.value.breakdown&&h.value.breakdown.length>0?(o(),l("div",Ia,[(o(!0),l(m,null,w(h.value.breakdown.slice(0,3),(t,s)=>(o(),l("div",{key:s,class:f(["rounded-lg border p-4",{"border-purple-200 bg-purple-50 dark:border-purple-500/20 dark:bg-purple-500/10":s===0,"border-blue-200 bg-blue-50 dark:border-blue-500/20 dark:bg-blue-500/10":s===1,"border-green-200 bg-green-50 dark:border-green-500/20 dark:bg-green-500/10":s===2}])},[e("div",$a,[e("div",Ea,[e("div",Ka,[e("span",{class:f(["flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold",{"bg-purple-200 text-purple-700 dark:bg-purple-500/20 dark:text-purple-400":s===0,"bg-blue-200 text-blue-700 dark:bg-blue-500/20 dark:text-blue-400":s===1,"bg-green-200 text-green-700 dark:bg-green-500/20 dark:text-green-400":s===2}])},n(s+1),3),e("p",Aa,n(t.alias),1)]),e("p",{class:f(["text-lg font-bold",{"text-purple-700 dark:text-purple-400":s===0,"text-blue-700 dark:text-blue-400":s===1,"text-green-700 dark:text-green-400":s===2}])},n(d(t.amount)),3),e("p",qa,n(t.percentage)+"% • "+n(t.count)+" transaksi ",1)])])],2))),128))])):g("",!0),e("div",Xa,[q.value?(o(),l("div",Oa,[...a[29]||(a[29]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-gray-200 border-t-brand-500"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Memuat data kategori...")],-1)])])):g("",!0),h.value.breakdown&&h.value.breakdown.length>0?(o(),te(re(_e),{key:1,type:"bar",height:"300",options:He.value,series:Fe.value},null,8,["options","series"])):g("",!0),!h.value.breakdown||h.value.breakdown.length===0&&!q.value?(o(),l("div",Na,[...a[30]||(a[30]=[e("div",{class:"flex flex-col items-center justify-center gap-3"},[e("svg",{class:"h-16 w-16 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})]),e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tidak ada data penyaluran"),e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Belum ada penyaluran untuk periode ini")],-1)])])):g("",!0)]),e("div",Wa,[a[37]||(a[37]=e("h4",{class:"mb-4 text-base font-semibold text-gray-800 dark:text-white/90"}," Detail Breakdown per Tipe ",-1)),e("div",Ua,[X.value?(o(),l("div",Ya,[...a[31]||(a[31]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-gray-200 border-t-brand-500"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Memuat detail breakdown...")],-1)])])):g("",!0),T.value&&T.value.length>0?(o(),l("table",Ja,[a[35]||(a[35]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[e("th",{class:"pb-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300"},"Nama Pengeluaran"),e("th",{class:"pb-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300"},"Pengajuan Dana"),e("th",{class:"pb-3 text-right text-sm font-semibold text-gray-700 dark:text-gray-300"},"Penyaluran")])],-1)),e("tbody",null,[(o(!0),l(m,null,w(T.value,(t,s)=>{var u;return o(),l(m,{key:s},[e("tr",{class:f(["border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-white/[0.02]",{"bg-blue-50/50 dark:bg-blue-900/10":R.value===t.submission_type}])},[e("td",Za,[e("div",Ga,[e("button",{onClick:C=>R.value=R.value===t.submission_type?null:t.submission_type,class:"flex h-6 w-6 items-center justify-center rounded hover:bg-gray-200 dark:hover:bg-gray-700"},[(o(),l("svg",{class:f(["h-4 w-4 text-gray-600 dark:text-gray-400 transition-transform",{"rotate-90":R.value===t.submission_type}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...a[32]||(a[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,Qa),E(" "+n(t.alias),1)])]),e("td",et,n(d(t.pengajuan_dana)),1),e("td",at,n(d(t.penyaluran)),1)],2),R.value===t.submission_type?(o(),l("tr",tt,[e("td",rt,[e("div",st,[e("h5",nt," Detail Penyaluran ("+n(((u=t.details)==null?void 0:u.length)||0)+") ",1),!t.details||t.details.length===0?(o(),l("div",ot," Tidak ada detail penyaluran ")):(o(),l("table",lt,[a[33]||(a[33]=e("thead",{class:"bg-gray-50 text-xs uppercase text-gray-500 dark:bg-gray-800 dark:text-gray-400"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Tanggal"),e("th",{class:"px-4 py-2"},"Keterangan"),e("th",{class:"px-4 py-2"},"Penerima"),e("th",{class:"px-4 py-2 text-right"},"Nominal")])],-1)),e("tbody",dt,[(o(!0),l(m,null,w(t.details,C=>(o(),l("tr",{key:C.id},[e("td",it,n(Ce(C.created_at)),1),e("td",ut,n(C.program_name||C.report||"-"),1),e("td",gt,n(C.pic||"-"),1),e("td",ct,n(d(C.amount)),1)]))),128))])]))])])])):g("",!0)],64)}),128))]),e("tfoot",null,[e("tr",pt,[a[34]||(a[34]=e("td",{class:"pt-3 text-sm font-bold text-gray-800 dark:text-white/90"},"Total",-1)),e("td",bt,n(d(T.value.reduce((t,s)=>t+s.pengajuan_dana,0))),1),e("td",xt,n(d(T.value.reduce((t,s)=>t+s.penyaluran,0))),1)])])])):g("",!0),!T.value||T.value.length===0&&!X.value?(o(),l("div",kt,[...a[36]||(a[36]=[e("div",{class:"flex flex-col items-center justify-center gap-3"},[e("svg",{class:"h-16 w-16 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tidak ada data breakdown"),e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Belum ada data untuk periode ini")],-1)])])):g("",!0)])])]),e("div",mt,[e("div",yt,[a[39]||(a[39]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Breakdown per Program",-1)),e("button",{onClick:Ie,disabled:V.value.length===0,class:"flex items-center gap-2 rounded-lg bg-green-500 px-4 py-2 text-sm font-medium text-white hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed"},[...a[38]||(a[38]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),E(" Export Excel ",-1)])],8,vt)]),e("div",ht,[A.value?(o(),l("div",ft,[...a[40]||(a[40]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-gray-200 border-t-brand-500"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Memuat data program...")],-1)])])):g("",!0),e("table",wt,[a[48]||(a[48]=e("thead",null,[e("tr",{class:"border-b border-gray-200 text-left text-sm font-semibold text-gray-600 dark:border-gray-700 dark:text-gray-400"},[e("th",{class:"px-4 py-3"},"Program"),e("th",{class:"px-4 py-3 text-right"},"Pemasukan"),e("th",{class:"px-4 py-3 text-right"},"Pengajuan Dana"),e("th",{class:"px-4 py-3 text-right"},"Penyaluran"),e("th",{class:"px-4 py-3 text-right"},"Total Pengeluaran"),e("th",{class:"px-4 py-3 text-right"},"Saldo")])],-1)),e("tbody",null,[(o(!0),l(m,null,w(V.value,t=>(o(),l(m,{key:t.id||"null-program"},[e("tr",{class:f(["border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-white/[0.02]",{"bg-blue-50/50 dark:bg-blue-900/10":F.value===(t.id||"null")}])},[e("td",_t,[e("div",jt,[t.id===null&&t.breakdown?(o(),l("button",{key:0,onClick:a[5]||(a[5]=s=>F.value=F.value==="null"?null:"null"),class:"flex h-6 w-6 items-center justify-center rounded hover:bg-gray-200 dark:hover:bg-gray-700"},[(o(),l("svg",{class:f(["h-4 w-4 text-gray-600 dark:text-gray-400 transition-transform",{"rotate-90":F.value==="null"}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...a[41]||(a[41]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))])):g("",!0),t.id===null?(o(),l("span",Mt,[a[42]||(a[42]=e("svg",{class:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),E(" "+n(t.nama),1)])):(o(),l("span",Pt,n(t.nama),1))])]),e("td",Ct,n(d(t.pemasukan||0)),1),e("td",Bt,n(d(t.pengajuan_dana||0)),1),e("td",Tt,n(d(t.penyaluran||0)),1),e("td",St,n(d(t.total_pengeluaran||0)),1),e("td",{class:f(["px-4 py-3 text-right text-sm font-bold",(t.saldo||0)>=0?"text-brand-600 dark:text-brand-400":"text-red-600 dark:text-red-400"])},n(d(t.saldo||0)),3)],2),t.id===null&&t.breakdown&&F.value==="null"?(o(),l("tr",Dt,[e("td",Lt,[e("div",Vt,[a[46]||(a[46]=e("div",{class:"text-xs font-semibold uppercase text-gray-600 dark:text-gray-400"},"Detail Breakdown (FIFO)",-1)),t.breakdown.pemasukan&&t.breakdown.pemasukan.length>0?(o(),l("div",zt,[a[43]||(a[43]=e("div",{class:"mb-2 text-sm font-medium text-green-700 dark:text-green-400"},"Pemasukan dari Program:",-1)),e("div",Ht,[(o(!0),l(m,null,w(t.breakdown.pemasukan,(s,u)=>(o(),l("div",{key:"pemasukan-"+u,class:"flex items-center justify-between rounded bg-white px-3 py-2 text-sm dark:bg-gray-800/50"},[e("span",Ft,n(s.program_nama),1),e("span",Rt,n(d(s.amount)),1)]))),128))])])):g("",!0),t.breakdown.pengajuan_dana&&t.breakdown.pengajuan_dana.length>0?(o(),l("div",It,[a[44]||(a[44]=e("div",{class:"mb-2 text-sm font-medium text-orange-700 dark:text-orange-400"},"Pengajuan Dana dari Program:",-1)),e("div",$t,[(o(!0),l(m,null,w(t.breakdown.pengajuan_dana,(s,u)=>(o(),l("div",{key:"pengajuan-"+u,class:"flex items-center justify-between rounded bg-white px-3 py-2 text-sm dark:bg-gray-800/50"},[e("span",Et,n(s.program_nama),1),e("span",Kt,n(d(s.amount)),1)]))),128))])])):g("",!0),t.breakdown.penyaluran&&t.breakdown.penyaluran.length>0?(o(),l("div",At,[a[45]||(a[45]=e("div",{class:"mb-2 text-sm font-medium text-purple-700 dark:text-purple-400"},"Penyaluran dari Program:",-1)),e("div",qt,[(o(!0),l(m,null,w(t.breakdown.penyaluran,(s,u)=>(o(),l("div",{key:"penyaluran-"+u,class:"flex items-center justify-between rounded bg-white px-3 py-2 text-sm dark:bg-gray-800/50"},[e("span",Xt,n(s.program_nama),1),e("span",Ot,n(d(s.amount)),1)]))),128))])])):g("",!0),(!t.breakdown.pemasukan||t.breakdown.pemasukan.length===0)&&(!t.breakdown.pengajuan_dana||t.breakdown.pengajuan_dana.length===0)&&(!t.breakdown.penyaluran||t.breakdown.penyaluran.length===0)?(o(),l("div",Nt," Tidak ada detail breakdown untuk periode ini ")):g("",!0)])])])):g("",!0)],64))),128)),V.value.length===0&&!A.value?(o(),l("tr",Wt,[...a[47]||(a[47]=[e("td",{colspan:"6",class:"px-4 py-12 text-center"},[e("div",{class:"flex flex-col items-center justify-center gap-3"},[e("svg",{class:"h-16 w-16 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tidak ada data program"),e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Belum ada aktivitas keuangan untuk periode ini")])],-1)])])):g("",!0)])])])]),e("div",Ut,[e("div",{class:"mb-4 flex items-center justify-between"},[a[50]||(a[50]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Detail Transaksi",-1)),e("button",{onClick:$e,class:"flex items-center gap-2 rounded-lg bg-green-500 px-4 py-2 text-sm font-medium text-white hover:bg-green-600"},[...a[49]||(a[49]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),E(" Export Excel ",-1)])])]),e("div",Yt,[(o(),l(m,null,w(xe,t=>e("button",{key:t.value,onClick:s=>I.value=t.value,class:f(["px-4 py-2 text-sm font-medium transition-colors",I.value===t.value?"border-b-2 border-brand-500 text-brand-600 dark:text-brand-400":"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300"])},n(t.label),11,Jt)),64))]),e("div",Zt,[K.value?(o(),l("div",Gt,[...a[51]||(a[51]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-gray-200 border-t-brand-500"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Memuat data...")],-1)])])):g("",!0),e("table",Qt,[a[53]||(a[53]=e("thead",null,[e("tr",{class:"border-b border-gray-200 text-left text-sm font-semibold text-gray-600 dark:border-gray-700 dark:text-gray-400"},[e("th",{class:"px-4 py-3"},"Tanggal"),e("th",{class:"px-4 py-3"},"Keterangan"),e("th",{class:"px-4 py-3"},"Tipe"),e("th",{class:"px-4 py-3 text-right"},"Masuk"),e("th",{class:"px-4 py-3 text-right"},"Keluar"),e("th",{class:"px-4 py-3 text-right"},"Saldo")])],-1)),e("tbody",null,[(o(!0),l(m,null,w(O.value,t=>(o(),l("tr",{key:t.id,class:"border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-white/[0.02]"},[e("td",er,n(t.tanggal),1),e("td",ar,n(t.keterangan),1),e("td",tr,[e("span",{class:f(["inline-flex rounded-full px-2 py-1 text-xs font-medium",{"bg-green-100 text-green-700 dark:bg-green-500/10 dark:text-green-400":t.masuk>0,"bg-red-100 text-red-700 dark:bg-red-500/10 dark:text-red-400":t.keluar>0}])},n(t.masuk>0?"Pemasukan":"Pengeluaran"),3)]),e("td",rr,n(t.masuk>0?d(t.masuk):"-"),1),e("td",sr,n(t.keluar>0?d(t.keluar):"-"),1),e("td",nr,n(d(t.saldo)),1)]))),128)),O.value.length===0&&!K.value?(o(),l("tr",or,[...a[52]||(a[52]=[e("td",{colspan:"6",class:"px-4 py-12 text-center"},[e("div",{class:"flex flex-col items-center justify-center gap-3"},[e("svg",{class:"h-16 w-16 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tidak ada transaksi"),e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Belum ada data transaksi untuk filter ini")])],-1)])])):g("",!0)])])]),O.value.length>0?(o(),l("div",lr,[e("div",dr," Menampilkan halaman "+n(c.value.current_page)+" dari "+n(c.value.last_page)+" — total "+n(c.value.total)+" transaksi ",1),e("div",ir,[e("button",{disabled:c.value.current_page<=1,onClick:a[6]||(a[6]=()=>{c.value.current_page=Math.max(1,c.value.current_page-1),z(c.value.current_page)}),class:"h-10 rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-white/[0.03]"}," Sebelumnya ",8,ur),e("button",{disabled:c.value.current_page>=c.value.last_page,onClick:a[7]||(a[7]=()=>{c.value.current_page=Math.min(c.value.last_page,c.value.current_page+1),z(c.value.current_page)}),class:"h-10 rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-white/[0.03]"}," Selanjutnya ",8,gr)])])):g("",!0)])])):g("",!0),M.value==="mitra"?(o(),l("div",cr,[e("div",pr,[e("div",br,[e("div",xr,[a[54]||(a[54]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Cari Mitra ",-1)),Ue(e("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=t=>S.value=t),placeholder:"Cari nama mitra atau program...",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[Ye,S.value]])])])]),e("div",kr,[(o(!0),l(m,null,w(W.value,t=>(o(),l("div",{key:t.id,class:"group cursor-pointer rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all duration-300 hover:border-brand-300 hover:shadow-lg dark:border-gray-700 dark:bg-white/[0.03] dark:hover:border-brand-500"},[e("div",mr,[a[56]||(a[56]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-brand-500 text-white transition-all duration-300 group-hover:scale-110 group-hover:bg-brand-500 group-hover:text-white dark:bg-brand-500/10 dark:text-white/90"},[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("button",{onClick:s=>Ae(t.id),class:"flex h-8 w-8 items-center justify-center rounded-lg text-gray-400 hover:bg-gray-100 hover:text-brand-500 dark:hover:bg-white/[0.03] dark:hover:text-brand-400"},[...a[55]||(a[55]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,yr)]),e("h3",vr,n(t.nama),1),e("p",hr,n(t.transaksi_count||0)+" transaksi • "+n(d(t.transaksi_total||0)),1),e("div",fr,[e("div",null,[a[57]||(a[57]=e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Jumlah Transaksi",-1)),e("p",wr,n(t.transaksi_count||0),1)]),e("div",null,[a[58]||(a[58]=e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Total Nilai",-1)),e("p",_r,n(d(t.transaksi_total||0)),1)])])]))),128))]),W.value.length===0?(o(),l("div",jr,[a[59]||(a[59]=e("svg",{class:"mb-4 h-16 w-16 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("p",Mr,n(S.value?"Tidak ada data mitra ditemukan":"Tidak ada data mitra"),1),S.value?(o(),l("p",Pr," Coba ubah kata kunci pencarian Anda ")):g("",!0)])):g("",!0),W.value.length>0?(o(),l("div",Cr,[e("div",Br," Menampilkan "+n(fe.value+1)+" - "+n(Ke.value)+" dari "+n(b.value.total)+" mitra ",1),e("div",Tr,[e("button",{onClick:a[9]||(a[9]=t=>{b.value.current_page=Math.max(1,b.value.current_page-1),$(b.value.current_page)}),disabled:b.value.current_page===1,class:"flex h-10 items-center justify-center rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"}," Sebelumnya ",8,Sr),e("div",Dr,[(o(!0),l(m,null,w(ae.value,t=>(o(),l("button",{key:t,onClick:s=>{b.value.current_page=t,$(t)},class:f(["flex h-10 w-10 items-center justify-center rounded-lg border text-sm font-medium transition-colors",b.value.current_page===t?"border-brand-500 bg-brand-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"])},n(t),11,Lr))),128))]),e("button",{onClick:a[10]||(a[10]=t=>J.value=Math.min(ae.value,J.value+1)),disabled:J.value===ae.value,class:"flex h-10 items-center justify-center rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"}," Selanjutnya ",8,Vr)])])):g("",!0)])):g("",!0)])])]),_:1}))}}),Xr=Ge(zr,[["__scopeId","data-v-69bdb110"]]);export{Xr as default};
