import{d as ze,H as Re,I as Ie,A as g,b as s,B as j,f as me,g as be,o as i,w as Ke,a as e,c as d,F as P,l as T,n as B,G as $e,t as n,i as w,j as H,u as U,D as ve,m as Y,k as Ee,v as Ae}from"./admin-DqRzH-Aq.js";import{C as qe}from"./component-Cmb7wWHb.js";import{u as D,w as ke}from"./xlsx-3SA47z_C.js";import{_ as Oe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DNLwJi85.js";import{S as xe}from"./SearchableSelect-CkkP21wc.js";import{_ as Xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const We={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},Ne={role:"tablist",class:"mb-8 flex flex-wrap items-center justify-center gap-4 border-b border-gray-200 dark:border-gray-700"},Ue=["aria-selected","aria-controls","id","onClick"],Ye={class:"space-y-6"},Ze={key:0,role:"tabpanel",id:"tabpanel-balance","aria-labelledby":"tab-balance"},Ge={class:"mb-6"},Je={class:"grid grid-cols-1 gap-3 md:grid-cols-12"},Qe={class:"md:col-span-4"},ea={class:"md:col-span-3"},aa={class:"md:col-span-3"},ta={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2"},ra={class:"rounded-lg border border-gray-200 bg-gradient-to-br from-green-500 to-green-600 p-6 shadow-lg dark:border-gray-700 dark:from-green-600 dark:to-green-700"},na={class:"flex items-center justify-between"},sa={class:"text-3xl font-bold text-white"},oa={class:"rounded-lg border border-gray-200 bg-gradient-to-br from-red-500 to-red-600 p-6 shadow-lg dark:border-gray-700 dark:from-red-600 dark:to-red-700"},la={class:"flex items-center justify-between"},ia={class:"text-3xl font-bold text-white"},da={class:"mb-6 grid grid-cols-1 gap-4 sm:grid-cols-2"},ua={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},ga={class:"flex items-center justify-between"},ca={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},pa={class:"mt-1 text-xs text-gray-500 dark:text-gray-500"},ma={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},ba={class:"flex items-center justify-between"},va={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},ka={class:"mt-1 text-xs text-gray-500 dark:text-gray-500"},xa={class:"mb-6 grid grid-cols-1 gap-4 lg:grid-cols-2"},ha={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},ya={class:"flex items-center justify-center"},fa={class:"rounded-lg border border-gray-200 bg-gradient-to-br from-brand-500 to-brand-600 p-6 shadow-lg dark:border-gray-700 dark:from-brand-600 dark:to-brand-700"},wa={class:"space-y-4"},_a={class:"text-3xl font-bold text-white"},Ma={class:"flex items-center justify-between border-t border-white/20 pt-4"},ja={class:"text-lg font-semibold text-white"},Ca={class:"text-right"},Sa={class:"mb-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},Pa={class:"mb-6 rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},Ta={class:"mb-4 flex items-center justify-between"},Ba=["disabled"],Da={class:"relative overflow-x-auto"},Fa={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-gray-900/80"},La={class:"w-full table-auto"},Va={class:"px-4 py-3 text-sm font-medium text-gray-800 dark:text-white/90"},Ha={key:0,class:"inline-flex items-center gap-2"},za={key:1},Ra={class:"px-4 py-3 text-right text-sm font-semibold text-green-600 dark:text-green-400"},Ia={class:"px-4 py-3 text-right text-sm text-orange-600 dark:text-orange-400"},Ka={class:"px-4 py-3 text-right text-sm text-purple-600 dark:text-purple-400"},$a={class:"px-4 py-3 text-right text-sm font-semibold text-red-600 dark:text-red-400"},Ea={key:0},Aa={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-white/[0.03]"},qa={class:"mb-4 flex gap-2 border-b border-gray-200 dark:border-gray-700"},Oa=["onClick"],Xa={class:"relative overflow-x-auto"},Wa={key:0,class:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 dark:bg-gray-900/80"},Na={class:"w-full table-auto"},Ua={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},Ya={class:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300"},Za={class:"px-4 py-3"},Ga={class:"px-4 py-3 text-right text-sm font-semibold text-green-600 dark:text-green-400"},Ja={class:"px-4 py-3 text-right text-sm font-semibold text-red-600 dark:text-red-400"},Qa={class:"px-4 py-3 text-right text-sm font-medium text-gray-800 dark:text-white/90"},et={key:0},at={key:0,class:"mt-4 flex items-center justify-between"},tt={class:"text-sm text-gray-600 dark:text-gray-400"},rt={class:"flex gap-2"},nt=["disabled"],st=["disabled"],ot={key:1,role:"tabpanel",id:"tabpanel-mitra","aria-labelledby":"tab-mitra"},lt={class:"mb-6 rounded-lg border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]"},it={class:"flex gap-4"},dt={class:"flex-1"},ut={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},gt={class:"mb-4 flex items-center justify-between"},ct=["onClick"],pt={class:"mb-2 text-lg font-semibold text-gray-800 dark:text-white/90"},mt={class:"mb-3 text-sm text-gray-600 dark:text-gray-400"},bt={class:"flex items-center justify-between"},vt={class:"text-base font-semibold text-gray-800 dark:text-white/90"},kt={class:"text-base font-semibold text-gray-800 dark:text-white/90"},xt={key:0,class:"flex flex-col items-center justify-center py-12 text-center"},ht={class:"text-lg font-medium text-gray-600 dark:text-gray-400"},yt={key:0,class:"mt-2 text-sm text-gray-500 dark:text-gray-500"},ft={key:1,class:"mt-6 flex items-center justify-between"},wt={class:"text-sm text-gray-600 dark:text-gray-400"},_t={class:"flex gap-2"},Mt=["disabled"],jt={class:"flex gap-1"},Ct=["onClick"],St=["disabled"],Pt=ze({__name:"LaporanKeuangan",setup(Tt){const E=Re(),he=Ie();g(()=>E.meta.title||"Laporan Keuangan");const ye=[{id:"balance",label:"Balance",icon:{template:`
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5z" />
    </svg>
  `}},{id:"mitra",label:"Mitra",icon:{template:`
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
    </svg>
  `}}],Z=["balance","mitra"],G=E.query.tab,h=s(Z.includes(G)?G:"balance");j(()=>E.query.tab,r=>{r&&Z.includes(r)&&(h.value=r)}),s("");const J=s(""),Q=s(""),ee=s(""),ae=s(""),_=s(""),A=s(1),m=s(new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0]),b=s(new Date().toISOString().split("T")[0]);s(!1);const v=s({saldo_awal:0,totalMasuk:0,totalKeluar:0,saldo_akhir:0}),y=s([]),c=s({current_page:1,last_page:1,per_page:20,total:0}),fe={mode:"range",dateFormat:"Y-m-d",altInput:!0,altFormat:"d/m/Y",wrap:!1},C=s([m.value,b.value]);let q=null;const te=(r=400)=>{q&&clearTimeout(q),q=setTimeout(()=>{c.value.current_page=1,S(1)},r)};j(C,r=>{if(Array.isArray(r))m.value=r[0]||m.value,b.value=r[1]||b.value;else if(typeof r=="string"){const a=r.split(" to ");m.value=a[0]||m.value,b.value=a[1]||b.value}te()});const re=s([]),ne=s([]),k=s(""),x=s(""),se=s(""),oe=s(""),we=g(()=>{const r=re.value.map(a=>({value:String(a.id),label:a.nama_program||a.name||a.nama}));return[{value:"",label:"Semua Program"},...r]}),_e=g(()=>{const r=ne.value.map(a=>({value:String(a.id),label:a.nama||a.name}));return[{value:"",label:"Semua Kantor Cabang"},...r]});j([k,x],()=>{te()});const M=s({pengajuan_dana:0,pengajuan_dana_percentage:0,penyaluran:0,penyaluran_percentage:0}),F=s([]),O=s([]),z=s(!1),R=s(!1),le=s(!1),ie=[{value:"all",label:"Semua"},{value:"masuk",label:"Pemasukan"},{value:"pengajuan_dana",label:"Pengajuan Dana"},{value:"penyaluran",label:"Penyaluran"}],L=s("all");j(L,()=>{z.value=!0,setTimeout(()=>{z.value=!1},300)});const I=g(()=>{if(!y.value)return[];switch(L.value){case"masuk":return y.value.filter(r=>r.masuk>0);case"pengajuan_dana":return y.value.filter(r=>r.keluar>0&&r.keterangan.toLowerCase().includes("pengajuan"));case"penyaluran":return y.value.filter(r=>r.keluar>0&&r.keterangan.toLowerCase().includes("penyalur"));default:return y.value}}),Me=g(()=>({chart:{fontFamily:"Outfit, sans-serif",type:"donut"},colors:["#f97316","#a855f7"],labels:["Pengajuan Dana","Penyaluran"],legend:{position:"bottom",labels:{colors:"#6B7280"}},dataLabels:{enabled:!0,formatter:function(r){return r.toFixed(1)+"%"}},plotOptions:{pie:{donut:{size:"70%",labels:{show:!0,name:{show:!0,fontSize:"14px",fontWeight:600,color:"#374151"},value:{show:!0,fontSize:"24px",fontWeight:700,color:"#1F2937",formatter:function(r){return l(parseFloat(r))}},total:{show:!0,label:"Total",fontSize:"14px",fontWeight:600,color:"#6B7280",formatter:function(r){const a=r.globals.seriesTotals.reduce((t,o)=>t+o,0);return l(a)}}}}}}})),je=g(()=>[M.value.pengajuan_dana||0,M.value.penyaluran||0]),Ce=g(()=>({chart:{fontFamily:"Outfit, sans-serif",type:"area",toolbar:{show:!1}},colors:["#10b981","#ef4444"],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:2},fill:{type:"gradient",gradient:{opacityFrom:.6,opacityTo:.1}},xaxis:{type:"datetime",labels:{style:{colors:"#6B7280"}}},yaxis:{labels:{style:{colors:"#6B7280"},formatter:function(r){return l(r)}}},tooltip:{x:{format:"dd MMM yyyy"},y:{formatter:function(r){return l(r)}}},legend:{position:"top",horizontalAlign:"right",labels:{colors:"#6B7280"}}})),Se=g(()=>[{name:"Pemasukan",data:O.value.map(r=>[new Date(r.tanggal).getTime(),r.pemasukan||0])},{name:"Pengeluaran",data:O.value.map(r=>[new Date(r.tanggal).getTime(),r.pengeluaran||0])}]);s(!1);const K=s("all");g(()=>K.value==="masuk"?"Pemasukan":K.value==="keluar"?"Pengeluaran":"Semua"),g(()=>y.value?K.value==="masuk"?y.value.filter(r=>r.masuk>0):K.value==="keluar"?y.value.filter(r=>r.keluar>0):y.value:[]),s(null),g(()=>({chart:{fontFamily:"Outfit, sans-serif",type:"radialBar"},colors:["#10b981","#ef4444"],plotOptions:{radialBar:{startAngle:-90,endAngle:90,hollow:{size:"70%"},track:{background:"#E4E7EC",strokeWidth:"100%",margin:5},dataLabels:{name:{show:!1},value:{fontSize:"24px",fontWeight:"600",offsetY:0,color:"#1D2939",formatter:function(r){return r.toFixed(1)+"%"}}}}},fill:{type:"solid"},stroke:{lineCap:"round"},labels:["Pemasukan"]}));const X=g(()=>{const r=v.value.totalMasuk||0,a=v.value.totalKeluar||0,t=r+a;return t===0?0:r/t*100});g(()=>X.value.toFixed(2)),g(()=>(100-X.value).toFixed(2)),g(()=>[X.value]);const S=async(r=1)=>{try{console.log("fetchBalanceData start",{start:m.value,end:b.value,program:k.value,kantor:x.value,page:r}),c.value.current_page=r;const a=new URLSearchParams;a.append("start",m.value),a.append("end",b.value),a.append("page",String(r)),a.append("per_page",String(c.value.per_page||20)),k.value&&a.append("program_id",k.value),x.value&&a.append("kantor_cabang_id",x.value);const t=await fetch(`/admin/api/laporan/keuangan?${a.toString()}`,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok){console.error("Error fetching laporan keuangan",t.status);return}const o=await t.json();if(console.log("fetchBalanceData json",o),!o.success){console.error("API returned error",o.message);return}const u=o.data;v.value=u.totals||{saldo_awal:0,totalMasuk:0,totalKeluar:0,saldo_akhir:0},y.value=u.transactions||[],c.value={...u.pagination||{},per_page:u.pagination&&u.pagination.per_page||20},u.breakdown&&(M.value={pengajuan_dana:u.breakdown.pengajuan_dana||0,pengajuan_dana_percentage:u.breakdown.pengajuan_dana_percentage||0,penyaluran:u.breakdown.penyaluran||0,penyaluran_percentage:u.breakdown.penyaluran_percentage||0}),await Promise.all([Pe(),Te()])}catch(a){console.error("Exception fetching laporan keuangan",a)}},Pe=async()=>{try{R.value=!0;const r=new URLSearchParams;r.append("start",m.value),r.append("end",b.value),k.value&&r.append("program_id",k.value),x.value&&r.append("kantor_cabang_id",x.value);const a=await fetch(`/admin/api/laporan/keuangan/program-breakdown?${r.toString()}`,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!a.ok)return;const t=await a.json();t.success&&(F.value=t.data||[])}catch(r){console.error("Error fetching program breakdown",r)}finally{R.value=!1}},Te=async()=>{try{le.value=!0;const r=new URLSearchParams;r.append("start",m.value),r.append("end",b.value),k.value&&r.append("program_id",k.value),x.value&&r.append("kantor_cabang_id",x.value);const a=await fetch(`/admin/api/laporan/keuangan/timeline?${r.toString()}`,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!a.ok)return;const t=await a.json();t.success&&(O.value=t.data||[])}catch(r){console.error("Error fetching timeline data",r)}finally{le.value=!1}},Be=()=>{const r=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],a=new Date().toISOString().split("T")[0];m.value=r,b.value=a,C.value=[r,a],k.value="",x.value="",c.value.current_page=1,S(1)},de=async()=>{var r,a;try{const t=await fetch("/admin/api/program?per_page=200",{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)return;const o=await t.json();o.success&&(re.value=o.data||((r=o.data)==null?void 0:r.data)||((a=o.data)==null?void 0:a.items)||[])}catch(t){console.error("Error fetching programs",t)}},ue=async()=>{var r,a;try{const t=await fetch("/admin/api/kantor-cabang?per_page=200",{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)return;const o=await t.json();o.success&&(ne.value=o.data||((r=o.data)==null?void 0:r.data)||((a=o.data)==null?void 0:a.items)||[])}catch(t){console.error("Error fetching kantor cabang",t)}};j(h,r=>{r==="balance"&&(C.value=[m.value,b.value],S(1),de(),ue())}),me(()=>{h.value==="balance"&&(C.value=[m.value,b.value],S(1),de(),ue())});const De=()=>{const r=F.value.map(u=>({Program:u.program_nama,Pemasukan:l(u.pemasukan||0),"Pengajuan Dana":l(u.pengajuan_dana||0),Penyaluran:l(u.penyaluran||0),"Total Pengeluaran":l((u.pengajuan_dana||0)+(u.penyaluran||0)),Saldo:l(u.saldo||0)})),a=D.json_to_sheet(r),t=D.book_new();D.book_append_sheet(t,a,"Breakdown Program");const o=`Breakdown_Program_${m.value}_${b.value}.xlsx`;ke(t,o)},Fe=()=>{var pe;const r=I.value.map(f=>({Tanggal:f.tanggal,Keterangan:f.keterangan,Tipe:f.masuk>0?"Pemasukan":"Pengeluaran",Masuk:f.masuk>0?l(f.masuk):"-",Keluar:f.keluar>0?l(f.keluar):"-",Saldo:l(f.saldo)})),a=D.json_to_sheet(r),t=D.book_new();D.book_append_sheet(t,a,"Detail Transaksi");const u=`Transaksi_${((pe=ie.find(f=>f.value===L.value))==null?void 0:pe.label)||"Semua"}_${m.value}_${b.value}.xlsx`;ke(t,u)},l=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r);g(()=>{let r=[...Le];if(J.value&&(r=r.filter(a=>{const t=new Date(a.tanggal),o=new Date(J.value);return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth()&&t.getDate()===o.getDate()})),Q.value){const a=Q.value.toLowerCase();r=r.filter(t=>t.keterangan.toLowerCase().includes(a))}if(ee.value){const a=parseFloat(ee.value);isNaN(a)||(r=r.filter(t=>t.masuk>=a))}if(ae.value){const a=parseFloat(ae.value);isNaN(a)||(r=r.filter(t=>t.keluar>=a))}return r});const Le=[{id:"1",tanggal:"2024-01-15",keterangan:"Donasi dari PT ABC",masuk:5e7,keluar:0,saldo:5e7},{id:"2",tanggal:"2024-01-16",keterangan:"Pembayaran gaji karyawan",masuk:0,keluar:25e6,saldo:25e6},{id:"3",tanggal:"2024-01-17",keterangan:"Donasi online",masuk:1e7,keluar:0,saldo:35e6},{id:"4",tanggal:"2024-01-18",keterangan:"Biaya operasional",masuk:0,keluar:5e6,saldo:3e7},{id:"5",tanggal:"2024-01-19",keterangan:"Zakat dari donatur",masuk:75e6,keluar:0,saldo:105e6},{id:"6",tanggal:"2024-01-20",keterangan:"Penyaluran ke program pendidikan",masuk:0,keluar:3e7,saldo:75e6},{id:"7",tanggal:"2024-01-21",keterangan:"Donasi dari Yayasan XYZ",masuk:1e8,keluar:0,saldo:175e6},{id:"8",tanggal:"2024-01-22",keterangan:"Biaya administrasi",masuk:0,keluar:2e6,saldo:173e6}],$=s([]),p=s({current_page:1,last_page:1,per_page:12,total:0}),ge=s(!1),V=async(r=1)=>{try{ge.value=!0;const a=new URLSearchParams;a.append("page",String(r)),a.append("per_page",String(p.value.per_page||12)),_.value&&a.append("search",_.value);const t=await fetch(`/admin/api/laporan/mitra?${a.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(!t.ok)return;const o=await t.json();if(!o.success)return;$.value=o.data||[],p.value={...o.pagination||{},per_page:p.value.per_page}}catch(a){console.error("Error fetching mitra list",a)}finally{ge.value=!1}};let W=null;j(_,()=>{W&&clearTimeout(W),W=setTimeout(()=>V(1),400)});const N=g(()=>Math.ceil(p.value.total/p.value.per_page)),ce=g(()=>(p.value.current_page-1)*p.value.per_page),Ve=g(()=>Math.min(ce.value+p.value.per_page,p.value.total));j(h,r=>{r==="mitra"&&V(1)}),me(()=>{h.value==="mitra"&&V(1)});const He=r=>{he.push(`/laporan/detail-mitra/${r}`)};return(r,a)=>(i(),be(Oe,null,{default:Ke(()=>[e("div",We,[a[44]||(a[44]=e("div",{class:"mb-8 text-center"},[e("h1",{class:"mb-2 text-3xl font-bold text-gray-800 dark:text-white/90 sm:text-4xl"}," Laporan Keuangan "),e("p",{class:"text-lg text-gray-600 dark:text-gray-400"}," Ringkasan dan detail keuangan organisasi ")],-1)),e("div",Ne,[(i(),d(P,null,T(ye,t=>e("button",{key:t.id,role:"tab","aria-selected":h.value===t.id,"aria-controls":`tabpanel-${t.id}`,id:`tab-${t.id}`,onClick:o=>h.value=t.id,class:B(["flex items-center gap-2 rounded-t-lg px-6 py-3 text-sm font-medium transition-all duration-200",h.value===t.id?"border-b-2 border-brand-500 bg-brand-50 text-brand-600 dark:bg-brand-500/10 dark:text-brand-400":"text-gray-600 hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-white/[0.03]"])},[(i(),be($e(t.icon),{class:"h-5 w-5"})),e("span",null,n(t.label),1)],10,Ue)),64))]),e("div",Ye,[h.value==="balance"?(i(),d("div",Ze,[e("div",Ge,[e("div",Je,[e("div",Qe,[a[10]||(a[10]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Rentang Tanggal",-1)),H(U(qe),{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=t=>C.value=t),config:fe,class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 placeholder:text-gray-400 focus:border-brand-300 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90",placeholder:"Pilih rentang tanggal"},null,8,["modelValue"])]),e("div",ea,[a[11]||(a[11]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Program",-1)),H(xe,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=t=>k.value=t),options:we.value,placeholder:"Semua Program","search-input":se.value,"onUpdate:searchInput":a[2]||(a[2]=t=>se.value=t)},null,8,["modelValue","options","search-input"])]),e("div",aa,[a[12]||(a[12]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},"Kantor Cabang",-1)),H(xe,{modelValue:x.value,"onUpdate:modelValue":a[3]||(a[3]=t=>x.value=t),options:_e.value,placeholder:"Semua Kantor Cabang","search-input":oe.value,"onUpdate:searchInput":a[4]||(a[4]=t=>oe.value=t)},null,8,["modelValue","options","search-input"])]),e("div",{class:"md:col-span-2 flex items-end justify-end"},[e("button",{onClick:Be,class:"h-11 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-white/[0.03]"}," Reset ")])])]),e("div",ta,[e("div",ra,[e("div",na,[e("div",null,[a[13]||(a[13]=e("p",{class:"mb-1 text-sm font-medium text-white/80"},"Total Pemasukan",-1)),e("h3",sa,n(l(v.value.totalMasuk||0)),1)]),a[14]||(a[14]=e("div",{class:"flex h-14 w-14 items-center justify-center rounded-lg bg-white/20"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})])],-1))])]),e("div",oa,[e("div",la,[e("div",null,[a[15]||(a[15]=e("p",{class:"mb-1 text-sm font-medium text-white/80"},"Total Pengeluaran",-1)),e("h3",ia,n(l(v.value.totalKeluar||0)),1)]),a[16]||(a[16]=e("div",{class:"flex h-14 w-14 items-center justify-center rounded-lg bg-white/20"},[e("svg",{class:"h-8 w-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})])],-1))])])]),e("div",da,[e("div",ua,[e("div",ga,[e("div",null,[a[17]||(a[17]=e("p",{class:"mb-1 text-sm font-medium text-gray-600 dark:text-gray-400"},"Pengajuan Dana",-1)),e("p",ca,n(l(M.value.pengajuan_dana||0)),1),e("p",pa,n(M.value.pengajuan_dana_percentage||0)+"% dari total pengeluaran ",1)]),a[18]||(a[18]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-100 dark:bg-orange-500/10"},[e("svg",{class:"h-6 w-6 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))])]),e("div",ma,[e("div",ba,[e("div",null,[a[19]||(a[19]=e("p",{class:"mb-1 text-sm font-medium text-gray-600 dark:text-gray-400"},"Penyaluran",-1)),e("p",va,n(l(M.value.penyaluran||0)),1),e("p",ka,n(M.value.penyaluran_percentage||0)+"% dari total pengeluaran ",1)]),a[20]||(a[20]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-purple-100 dark:bg-purple-500/10"},[e("svg",{class:"h-6 w-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})])],-1))])])]),e("div",xa,[e("div",ha,[a[21]||(a[21]=e("h3",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white/90"},"Breakdown Pengeluaran",-1)),e("div",ya,[H(U(ve),{type:"donut",height:"280",options:Me.value,series:je.value},null,8,["options","series"])])]),e("div",fa,[a[25]||(a[25]=e("h3",{class:"mb-4 text-lg font-semibold text-white/90"},"Saldo",-1)),e("div",wa,[e("div",null,[a[22]||(a[22]=e("p",{class:"text-sm text-white/80"},"Saldo Akhir",-1)),e("p",_a,n(l(v.value.saldo_akhir||0)),1)]),e("div",Ma,[e("div",null,[a[23]||(a[23]=e("p",{class:"text-xs text-white/70"},"Saldo Awal",-1)),e("p",ja,n(l(v.value.saldo_awal||0)),1)]),e("div",Ca,[a[24]||(a[24]=e("p",{class:"text-xs text-white/70"},"Selisih",-1)),e("p",{class:B(["text-lg font-semibold",v.value.saldo_akhir-v.value.saldo_awal>=0?"text-green-200":"text-red-200"])},n(l(Math.abs(v.value.saldo_akhir-v.value.saldo_awal))),3)])])])])]),e("div",Sa,[a[26]||(a[26]=e("h3",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white/90"},"Tren Harian",-1)),H(U(ve),{type:"area",height:"320",options:Ce.value,series:Se.value},null,8,["options","series"])]),e("div",Pa,[e("div",Ta,[a[28]||(a[28]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Breakdown per Program",-1)),e("button",{onClick:De,disabled:F.value.length===0,class:"flex items-center gap-2 rounded-lg bg-green-500 px-4 py-2 text-sm font-medium text-white hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed"},[...a[27]||(a[27]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),Y(" Export Excel ",-1)])],8,Ba)]),e("div",Da,[R.value?(i(),d("div",Fa,[...a[29]||(a[29]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-gray-200 border-t-brand-500"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Memuat data program...")],-1)])])):w("",!0),e("table",La,[a[32]||(a[32]=e("thead",null,[e("tr",{class:"border-b border-gray-200 text-left text-sm font-semibold text-gray-600 dark:border-gray-700 dark:text-gray-400"},[e("th",{class:"px-4 py-3"},"Program"),e("th",{class:"px-4 py-3 text-right"},"Pemasukan"),e("th",{class:"px-4 py-3 text-right"},"Pengajuan Dana"),e("th",{class:"px-4 py-3 text-right"},"Penyaluran"),e("th",{class:"px-4 py-3 text-right"},"Total Pengeluaran"),e("th",{class:"px-4 py-3 text-right"},"Saldo")])],-1)),e("tbody",null,[(i(!0),d(P,null,T(F.value,t=>(i(),d("tr",{key:t.id||"null-program",class:"border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-white/[0.02]"},[e("td",Va,[t.id===null?(i(),d("span",Ha,[a[30]||(a[30]=e("svg",{class:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),Y(" "+n(t.nama),1)])):(i(),d("span",za,n(t.nama),1))]),e("td",Ra,n(l(t.pemasukan||0)),1),e("td",Ia,n(l(t.pengajuan_dana||0)),1),e("td",Ka,n(l(t.penyaluran||0)),1),e("td",$a,n(l(t.total_pengeluaran||0)),1),e("td",{class:B(["px-4 py-3 text-right text-sm font-bold",(t.saldo||0)>=0?"text-brand-600 dark:text-brand-400":"text-red-600 dark:text-red-400"])},n(l(t.saldo||0)),3)]))),128)),F.value.length===0&&!R.value?(i(),d("tr",Ea,[...a[31]||(a[31]=[e("td",{colspan:"6",class:"px-4 py-12 text-center"},[e("div",{class:"flex flex-col items-center justify-center gap-3"},[e("svg",{class:"h-16 w-16 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tidak ada data program"),e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Belum ada aktivitas keuangan untuk periode ini")])],-1)])])):w("",!0)])])])]),e("div",Aa,[e("div",{class:"mb-4 flex items-center justify-between"},[a[34]||(a[34]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"},"Detail Transaksi",-1)),e("button",{onClick:Fe,class:"flex items-center gap-2 rounded-lg bg-green-500 px-4 py-2 text-sm font-medium text-white hover:bg-green-600"},[...a[33]||(a[33]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),Y(" Export Excel ",-1)])])]),e("div",qa,[(i(),d(P,null,T(ie,t=>e("button",{key:t.value,onClick:o=>L.value=t.value,class:B(["px-4 py-2 text-sm font-medium transition-colors",L.value===t.value?"border-b-2 border-brand-500 text-brand-600 dark:text-brand-400":"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300"])},n(t.label),11,Oa)),64))]),e("div",Xa,[z.value?(i(),d("div",Wa,[...a[35]||(a[35]=[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"h-10 w-10 animate-spin rounded-full border-4 border-gray-200 border-t-brand-500"}),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Memuat data...")],-1)])])):w("",!0),e("table",Na,[a[37]||(a[37]=e("thead",null,[e("tr",{class:"border-b border-gray-200 text-left text-sm font-semibold text-gray-600 dark:border-gray-700 dark:text-gray-400"},[e("th",{class:"px-4 py-3"},"Tanggal"),e("th",{class:"px-4 py-3"},"Keterangan"),e("th",{class:"px-4 py-3"},"Tipe"),e("th",{class:"px-4 py-3 text-right"},"Masuk"),e("th",{class:"px-4 py-3 text-right"},"Keluar"),e("th",{class:"px-4 py-3 text-right"},"Saldo")])],-1)),e("tbody",null,[(i(!0),d(P,null,T(I.value,t=>(i(),d("tr",{key:t.id,class:"border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-white/[0.02]"},[e("td",Ua,n(t.tanggal),1),e("td",Ya,n(t.keterangan),1),e("td",Za,[e("span",{class:B(["inline-flex rounded-full px-2 py-1 text-xs font-medium",{"bg-green-100 text-green-700 dark:bg-green-500/10 dark:text-green-400":t.masuk>0,"bg-red-100 text-red-700 dark:bg-red-500/10 dark:text-red-400":t.keluar>0}])},n(t.masuk>0?"Pemasukan":"Pengeluaran"),3)]),e("td",Ga,n(t.masuk>0?l(t.masuk):"-"),1),e("td",Ja,n(t.keluar>0?l(t.keluar):"-"),1),e("td",Qa,n(l(t.saldo)),1)]))),128)),I.value.length===0&&!z.value?(i(),d("tr",et,[...a[36]||(a[36]=[e("td",{colspan:"6",class:"px-4 py-12 text-center"},[e("div",{class:"flex flex-col items-center justify-center gap-3"},[e("svg",{class:"h-16 w-16 text-gray-300 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Tidak ada transaksi"),e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Belum ada data transaksi untuk filter ini")])],-1)])])):w("",!0)])])]),I.value.length>0?(i(),d("div",at,[e("div",tt," Menampilkan halaman "+n(c.value.current_page)+" dari "+n(c.value.last_page)+" — total "+n(c.value.total)+" transaksi ",1),e("div",rt,[e("button",{disabled:c.value.current_page<=1,onClick:a[5]||(a[5]=()=>{c.value.current_page=Math.max(1,c.value.current_page-1),S(c.value.current_page)}),class:"h-10 rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-white/[0.03]"}," Sebelumnya ",8,nt),e("button",{disabled:c.value.current_page>=c.value.last_page,onClick:a[6]||(a[6]=()=>{c.value.current_page=Math.min(c.value.last_page,c.value.current_page+1),S(c.value.current_page)}),class:"h-10 rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-white/[0.03]"}," Selanjutnya ",8,st)])])):w("",!0)])])):w("",!0),h.value==="mitra"?(i(),d("div",ot,[e("div",lt,[e("div",it,[e("div",dt,[a[38]||(a[38]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Cari Mitra ",-1)),Ee(e("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=t=>_.value=t),placeholder:"Cari nama mitra atau program...",class:"h-11 w-full rounded-lg border border-gray-300 bg-transparent px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[Ae,_.value]])])])]),e("div",ut,[(i(!0),d(P,null,T($.value,t=>(i(),d("div",{key:t.id,class:"group cursor-pointer rounded-lg border border-gray-200 bg-white p-6 shadow-sm transition-all duration-300 hover:border-brand-300 hover:shadow-lg dark:border-gray-700 dark:bg-white/[0.03] dark:hover:border-brand-500"},[e("div",gt,[a[40]||(a[40]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-lg bg-brand-500 text-white transition-all duration-300 group-hover:scale-110 group-hover:bg-brand-500 group-hover:text-white dark:bg-brand-500/10 dark:text-white/90"},[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("button",{onClick:o=>He(t.id),class:"flex h-8 w-8 items-center justify-center rounded-lg text-gray-400 hover:bg-gray-100 hover:text-brand-500 dark:hover:bg-white/[0.03] dark:hover:text-brand-400"},[...a[39]||(a[39]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,ct)]),e("h3",pt,n(t.nama),1),e("p",mt,n(t.transaksi_count||0)+" transaksi • "+n(l(t.transaksi_total||0)),1),e("div",bt,[e("div",null,[a[41]||(a[41]=e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Jumlah Transaksi",-1)),e("p",vt,n(t.transaksi_count||0),1)]),e("div",null,[a[42]||(a[42]=e("p",{class:"text-xs text-gray-500 dark:text-gray-500"},"Total Nilai",-1)),e("p",kt,n(l(t.transaksi_total||0)),1)])])]))),128))]),$.value.length===0?(i(),d("div",xt,[a[43]||(a[43]=e("svg",{class:"mb-4 h-16 w-16 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("p",ht,n(_.value?"Tidak ada data mitra ditemukan":"Tidak ada data mitra"),1),_.value?(i(),d("p",yt," Coba ubah kata kunci pencarian Anda ")):w("",!0)])):w("",!0),$.value.length>0?(i(),d("div",ft,[e("div",wt," Menampilkan "+n(ce.value+1)+" - "+n(Ve.value)+" dari "+n(p.value.total)+" mitra ",1),e("div",_t,[e("button",{onClick:a[8]||(a[8]=t=>{p.value.current_page=Math.max(1,p.value.current_page-1),V(p.value.current_page)}),disabled:p.value.current_page===1,class:"flex h-10 items-center justify-center rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"}," Sebelumnya ",8,Mt),e("div",jt,[(i(!0),d(P,null,T(N.value,t=>(i(),d("button",{key:t,onClick:o=>{p.value.current_page=t,V(t)},class:B(["flex h-10 w-10 items-center justify-center rounded-lg border text-sm font-medium transition-colors",p.value.current_page===t?"border-brand-500 bg-brand-500 text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"])},n(t),11,Ct))),128))]),e("button",{onClick:a[9]||(a[9]=t=>A.value=Math.min(N.value,A.value+1)),disabled:A.value===N.value,class:"flex h-10 items-center justify-center rounded-lg border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"}," Selanjutnya ",8,St)])])):w("",!0)])):w("",!0)])])]),_:1}))}}),It=Xe(Pt,[["__scopeId","data-v-097a36cb"]]);export{It as default};
