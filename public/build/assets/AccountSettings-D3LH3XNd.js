import{d as j,b as n,g as S,o as r,w as B,a as t,c as o,i as c,t as b,q as T,k as x,s as f,n as N}from"./admin-B6Wc5uUN.js";import{_ as O,g as P}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CTK14auA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},A={class:"max-w-md"},E={key:0,class:"mb-4 rounded-md bg-green-50 p-3 text-green-800"},V={key:1,class:"mb-4 rounded-md bg-red-50 p-3 text-red-800"},K={class:"relative"},L=["type"],$=["aria-label"],D={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},G={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},H={key:0,class:"text-sm text-red-600 mt-1"},U={class:"relative"},F=["type"],R=["aria-label"],X={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},q={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},I={key:0,class:"text-sm text-red-600 mt-1"},J={class:"relative"},Q=["type"],W=["aria-label"],Y={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Z={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ee={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6 mt-6"},te={class:"max-w-md"},se={class:"flex items-center gap-3"},re=["disabled"],oe={key:0},ae={key:1},ue=j({__name:"AccountSettings",setup(ne){const a=n({current_password:"",new_password:"",new_password_confirmation:""}),d=n({}),k=n(""),u=n(""),y=async()=>await P(),_=async()=>{d.value={},k.value="",u.value="";try{const l=await y(),e=await fetch("/admin/api/user/password",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l},credentials:"same-origin",body:JSON.stringify(a.value)}),s=await e.json();e.ok&&s.success?(k.value=s.message||"Password berhasil diubah.",a.value.current_password="",a.value.new_password="",a.value.new_password_confirmation=""):(u.value=s.message||"Gagal mengubah password.",s.errors&&(d.value=Object.fromEntries(Object.entries(s.errors).map(([M,h])=>[M,Array.isArray(h)?h[0]:h]))))}catch(l){u.value="Terjadi kesalahan. Coba lagi.",console.error(l)}},p=n(!1),w=n(!1),g=n(!1),m=n(!1),i=n(""),v=n(!1),C=async()=>{m.value=!0,i.value="",v.value=!1;try{const l=await y(),e=await fetch("/admin/api/onesignal/test",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l},credentials:"same-origin"}),s=await e.json();e.ok&&s.success?i.value=s.message||"Notifikasi terkirim.":(i.value=s.message||"Gagal mengirim notifikasi.",v.value=!0)}catch(l){i.value="Terjadi kesalahan. Coba lagi.",v.value=!0,console.error(l)}m.value=!1};return(l,e)=>(r(),S(O,null,{default:B(()=>[t("div",z,[e[16]||(e[16]=t("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"},"Ganti Password",-1)),t("div",A,[k.value?(r(),o("div",E,b(k.value),1)):c("",!0),u.value?(r(),o("div",V,b(u.value),1)):c("",!0),t("form",{onSubmit:T(_,["prevent"]),class:"space-y-4"},[t("div",K,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Password Saat Ini",-1)),x(t("input",{type:p.value?"text":"password","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.current_password=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,L),[[f,a.value.current_password]]),t("button",{type:"button",onClick:e[1]||(e[1]=s=>p.value=!p.value),class:"absolute right-3 top-8 text-gray-500","aria-label":p.value?"Hide password":"Show password"},[p.value?(r(),o("svg",D,[...e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),o("svg",G,[...e[7]||(e[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,$),d.value.current_password?(r(),o("p",H,b(d.value.current_password),1)):c("",!0)]),t("div",U,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Password Baru",-1)),x(t("input",{type:w.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=s=>a.value.new_password=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,F),[[f,a.value.new_password]]),t("button",{type:"button",onClick:e[3]||(e[3]=s=>w.value=!w.value),class:"absolute right-3 top-8 text-gray-500","aria-label":w.value?"Hide password":"Show password"},[w.value?(r(),o("svg",X,[...e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),o("svg",q,[...e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,R),d.value.new_password?(r(),o("p",I,b(d.value.new_password),1)):c("",!0)]),t("div",J,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Konfirmasi Password Baru",-1)),x(t("input",{type:g.value?"text":"password","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.new_password_confirmation=s),class:"dark:bg-dark-900 h-11 w-full appearance-none rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,8,Q),[[f,a.value.new_password_confirmation]]),t("button",{type:"button",onClick:e[5]||(e[5]=s=>g.value=!g.value),class:"absolute right-3 top-8 text-gray-500","aria-label":g.value?"Hide password":"Show password"},[g.value?(r(),o("svg",Y,[...e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-5-10-5s1.657-2.494 4.354-4.22M6.5 6.5L17.5 17.5M3 3l18 18"},null,-1)])])):(r(),o("svg",Z,[...e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,W)]),e[15]||(e[15]=t("div",{class:"flex items-center gap-3"},[t("button",{type:"submit",class:"inline-flex items-center px-4 py-2 bg-brand-500 text-white rounded-md"},"Simpan")],-1))],32)])]),t("div",ee,[e[18]||(e[18]=t("h3",{class:"mb-5 text-lg font-semibold text-gray-800 dark:text-white/90 lg:mb-7"},"Notifikasi",-1)),t("div",te,[e[17]||(e[17]=t("p",{class:"mb-4 text-sm text-gray-600 dark:text-white/70"},"Kirim notifikasi percobaan ke perangkat Anda yang sudah terdaftar untuk push (OneSignal).",-1)),t("div",se,[t("button",{onClick:C,disabled:m.value,class:"inline-flex items-center px-4 py-2 bg-brand-500 text-white rounded-md"},[m.value?(r(),o("span",ae,"Sending...")):(r(),o("span",oe,"Test Notifikasi"))],8,re)]),i.value?(r(),o("p",{key:0,class:N(["mt-3 text-sm",v.value?"text-red-600":"text-green-600"])},b(i.value),3)):c("",!0)])])]),_:1}))}});export{ue as default};
