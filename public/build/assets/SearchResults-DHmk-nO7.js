import{d as P,H as A,I as K,b,A as L,f as N,B as V,g as E,o as s,w as z,j as D,a as t,c as o,i as l,m as F,t as n,u as k,F as y,l as h,q as X,n as H}from"./admin-DWWWdAEt.js";import{u as G,_ as J}from"./AdminLayout.vue_vue_type_script_setup_true_lang-I_FaATJq.js";import{_ as Q}from"./PageBreadcrumb.vue_vue_type_script_setup_true_lang-BarRtG7c.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"rounded-2xl border border-gray-200 bg-white p-5 dark:border-gray-800 dark:bg-white/[0.03] lg:p-6"},O={class:"mb-6"},Y={class:"text-sm text-gray-500 dark:text-gray-400"},Z={class:"font-medium text-gray-700 dark:text-gray-300"},I={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-900/50"},tt={class:"mb-3 flex items-center justify-between"},et={class:"flex flex-wrap gap-2"},rt=["onClick"],at={key:0,class:"text-xs text-gray-400 px-1.5 py-0.5 rounded bg-gray-100 dark:bg-gray-800"},st=["onClick"],ot={key:1,class:"flex items-center justify-center py-12"},nt={key:2,class:"space-y-6"},dt={key:0},lt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},it=["onClick"],gt={class:"flex items-start justify-between"},ut={class:"flex-1"},ct={class:"mb-1 font-medium text-gray-800 dark:text-white/90 group-hover:text-brand-600 dark:group-hover:text-brand-400"},xt={class:"text-xs text-gray-500 dark:text-gray-400"},pt={key:1},bt={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},kt=["onClick"],yt={class:"flex items-start justify-between"},ht={class:"flex-1"},vt={class:"mb-1 flex items-center gap-2"},mt={key:0,class:"text-xs text-gray-400"},_t={class:"mb-1 font-medium text-gray-800 dark:text-white/90 group-hover:text-brand-600 dark:group-hover:text-brand-400"},ft={key:0,class:"mb-1 text-xs text-gray-500 dark:text-gray-400 line-clamp-2"},wt={class:"text-xs text-gray-500 dark:text-gray-400"},Ct={key:2},jt={class:"space-y-4"},Mt={class:"mb-3 flex items-start gap-3"},qt={class:"flex-1"},Ht={class:"mb-1 flex items-center gap-2"},Tt={class:"font-medium text-gray-800 dark:text-white/90"},Bt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Rt={class:"ml-2 border-l-2 border-gray-200 dark:border-gray-700 pl-4"},$t={class:"grid gap-2 sm:grid-cols-2 lg:grid-cols-3"},St=["onClick"],Pt={class:"flex items-start justify-between"},At={class:"flex-1"},Kt={class:"mb-1 text-xs font-medium text-gray-600 dark:text-gray-400"},Lt={class:"text-sm font-medium text-gray-800 dark:text-white/90 group-hover:text-brand-600 dark:group-hover:text-brand-400"},Nt={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},Vt={key:3,class:"py-12 text-center"},Et=P({__name:"SearchResults",setup(zt){const _=A(),v=K(),{history:f,loadHistory:w,saveSearch:T,removeHistory:B,clearAllHistory:C}=G(),x=b(""),g=b([]),u=b([]),c=b([]),p=b(!1),R=a=>{if(typeof a=="string"){v.push({path:"/search",query:{q:a}});return}a.type==="menu"&&a.path?v.push(a.path):v.push({path:"/search",query:{q:a.label}})},$=L(()=>x.value?`Pencarian: "${x.value}"`:"Hasil Pencarian"),j=async()=>{const a=_.query.q;if(!a||a.length<2){x.value="",g.value=[],u.value=[],c.value=[];return}x.value=a,p.value=!0,a.trim().length>=2&&T(a.trim());try{const r=await fetch(`/admin/api/search?q=${encodeURIComponent(a)}&limit=20`,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(r.ok){const e=await r.json();e.success&&e.data&&(g.value=e.data.menus||[],u.value=e.data.data||[],c.value=e.data.relationships||[])}}catch(r){console.error("Error fetching search results:",r),g.value=[],u.value=[],c.value=[]}finally{p.value=!1}},m=a=>{a&&v.push(a)},M=a=>({jabatan:"Jabatan",landing_kegiatan:"Kegiatan",karyawan:"Karyawan",program:"Program",pangkat:"Pangkat",kantor_cabang:"Kantor Cabang",absensi:"Absensi",remunerasi:"Remunerasi",transaksi:"Transaksi"})[a]||a,q=a=>({jabatan:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",landing_kegiatan:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",karyawan:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",program:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",pangkat:"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400",kantor_cabang:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400",absensi:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",remunerasi:"bg-teal-100 text-teal-700 dark:bg-teal-900/30 dark:text-teal-400",transaksi:"bg-cyan-100 text-cyan-700 dark:bg-cyan-900/30 dark:text-cyan-400"})[a]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300";return N(()=>{w(),j()}),V(()=>_.query.q,()=>{j(),w()}),(a,r)=>(s(),E(J,null,{default:z(()=>[D(Q,{pageTitle:$.value},null,8,["pageTitle"]),t("div",W,[t("div",O,[r[2]||(r[2]=t("h1",{class:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90"}," Hasil Pencarian ",-1)),t("p",Y,[r[1]||(r[1]=F(" Menampilkan hasil untuk: ",-1)),t("span",Z,'"'+n(x.value)+'"',1)])]),k(f).length>0&&!p.value?(s(),o("div",I,[t("div",tt,[r[3]||(r[3]=t("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"}," History Pencarian ",-1)),t("button",{class:"text-xs text-gray-500 hover:text-red-500 dark:text-gray-400 dark:hover:text-red-400 transition-colors",onClick:r[0]||(r[0]=(...e)=>k(C)&&k(C)(...e))}," Hapus Semua ")]),t("div",et,[(s(!0),o(y,null,h(k(f),(e,i)=>(s(),o("button",{key:i,class:"group flex items-center gap-2 rounded-lg border border-gray-200 bg-white px-3 py-1.5 text-sm text-gray-700 transition-all hover:border-brand-300 hover:bg-brand-50 hover:text-brand-600 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:border-brand-600 dark:hover:bg-brand-900/20 dark:hover:text-brand-400",onClick:d=>R(e)},[t("span",null,n(typeof e=="string"?e:e.label),1),typeof e!="string"&&e.type==="menu"?(s(),o("span",at," Menu ")):l("",!0),t("button",{class:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-opacity",onClick:X(d=>k(B)(e),["stop"])},[...r[4]||(r[4]=[t("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,st)],8,rt))),128))])])):l("",!0),p.value?(s(),o("div",ot,[...r[5]||(r[5]=[t("div",{class:"text-center"},[t("div",{class:"mb-4 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand-500 border-r-transparent"}),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Mencari...")],-1)])])):!p.value&&(g.value.length>0||u.value.length>0||c.value.length>0)?(s(),o("div",nt,[g.value.length>0?(s(),o("div",dt,[r[7]||(r[7]=t("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white/90"},"Menu",-1)),t("div",lt,[(s(!0),o(y,null,h(g.value,(e,i)=>(s(),o("div",{key:i,class:"group cursor-pointer rounded-lg border border-gray-200 bg-white p-4 transition-all hover:border-brand-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800 dark:hover:border-brand-600",onClick:d=>m(e.path)},[t("div",gt,[t("div",ut,[t("h3",ct,n(e.name),1),t("p",xt,n(e.category),1)]),r[6]||(r[6]=t("svg",{class:"h-5 w-5 text-gray-400 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,it))),128))])])):l("",!0),u.value.length>0?(s(),o("div",pt,[r[9]||(r[9]=t("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white/90"},"Data",-1)),t("div",bt,[(s(!0),o(y,null,h(u.value,(e,i)=>(s(),o("div",{key:i,class:"group cursor-pointer rounded-lg border border-gray-200 bg-white p-4 transition-all hover:border-brand-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800 dark:hover:border-brand-600",onClick:d=>m(e.path)},[t("div",yt,[t("div",ht,[t("div",vt,[t("span",{class:H(["rounded-full px-2 py-0.5 text-xs font-medium",q(e.type)])},n(M(e.type)),3),e.menu_name?(s(),o("span",mt," Â· "+n(e.menu_name),1)):l("",!0)]),t("h3",_t,n(e.title),1),e.description?(s(),o("p",ft,n(e.description),1)):l("",!0),t("p",wt,n(e.category),1)]),r[8]||(r[8]=t("svg",{class:"h-5 w-5 text-gray-400 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,kt))),128))])])):l("",!0),c.value.length>0?(s(),o("div",Ct,[r[12]||(r[12]=t("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white/90"},"Keterkaitan",-1)),t("div",jt,[(s(!0),o(y,null,h(c.value,(e,i)=>(s(),o("div",{key:i,class:"rounded-lg border border-gray-200 bg-white p-5 dark:border-gray-700 dark:bg-gray-800"},[t("div",Mt,[t("div",qt,[t("div",Ht,[t("span",{class:H(["rounded-full px-2 py-0.5 text-xs font-medium",q(e.source.type)])},n(M(e.source.type)),3)]),t("h3",Tt,n(e.source.title),1),e.source.menu_name?(s(),o("p",Bt," Menu: "+n(e.source.menu_name),1)):l("",!0)])]),t("div",Rt,[r[11]||(r[11]=t("p",{class:"mb-2 text-xs font-medium text-gray-600 dark:text-gray-400"}," Terkait dengan: ",-1)),t("div",$t,[(s(!0),o(y,null,h(e.related,(d,S)=>(s(),o("div",{key:S,class:"group cursor-pointer rounded-lg border border-gray-200 bg-gray-50 p-3 transition-all hover:border-brand-300 hover:bg-brand-50 dark:border-gray-700 dark:bg-gray-900/50 dark:hover:bg-gray-800",onClick:Dt=>m(d.path)},[t("div",Pt,[t("div",At,[t("p",Kt,n(d.relationship),1),t("h4",Lt,n(d.title),1),t("p",Nt,n(d.menu_name),1)]),r[10]||(r[10]=t("svg",{class:"h-4 w-4 text-gray-400 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])],8,St))),128))])])]))),128))])])):l("",!0)])):(s(),o("div",Vt,[...r[13]||(r[13]=[t("svg",{class:"mx-auto mb-4 h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),t("h3",{class:"mb-2 text-lg font-semibold text-gray-800 dark:text-white/90"}," Tidak ada hasil ditemukan ",-1),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," Coba gunakan kata kunci yang berbeda atau periksa ejaan Anda. ",-1)])]))])]),_:1}))}}),Qt=U(Et,[["__scopeId","data-v-7bf470d8"]]);export{Qt as default};
