import{d as E,H as N,I as z,A as P,b as g,e as A,f as G,g as R,o as p,w as T,a as e,t as y,q as $,m as i,k as s,v as d,j as C,c as f,i as q,F as H,l as J}from"./admin-CgU5mjKp.js";import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-zQhzmxzZ.js";import{S as B}from"./SearchableSelect-CmGn8iKH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const _={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},O={class:"mb-6 flex items-center justify-between"},Q={class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},W={class:"grid grid-cols-1 gap-x-6 gap-y-5 lg:grid-cols-2"},X={class:"lg:col-span-1"},Z={class:"relative"},aa={class:"lg:col-span-1"},ea={class:"lg:col-span-1"},ra={class:"lg:col-span-1"},ta={class:"lg:col-span-1"},oa={class:"lg:col-span-1"},la={class:"lg:col-span-1"},sa={class:"lg:col-span-1"},da={class:"lg:col-span-2"},na={class:"lg:col-span-2"},ia={class:"lg:col-span-1"},ua={class:"lg:col-span-2"},ga={class:"space-y-4"},pa={class:"relative"},ba={key:0,class:"space-y-2"},ma={class:"flex items-center gap-3"},ca={class:"text-sm font-medium text-gray-800 dark:text-white/90"},ka={class:"text-xs text-gray-500 dark:text-gray-400"},xa=["onClick"],Ma=E({__name:"PenyaluranForm",setup(ya){const u=N(),h=z(),b=P(()=>u.params.id!==void 0&&u.params.id!=="new"),j=P(()=>b.value?"Edit Penyaluran":"Buat Penyaluran"),V=[{value:"program-beasiswa",label:"Program Beasiswa Pendidikan"},{value:"program-kesehatan",label:"Program Kesehatan Masyarakat"},{value:"program-ekonomi",label:"Program Pemberdayaan Ekonomi"},{value:"program-pangan",label:"Program Bantuan Pangan"},{value:"program-sdm",label:"Program Pengembangan SDM"},{value:"program-lingkungan",label:"Program Lingkungan Hidup"},{value:"program-sosial",label:"Program Sosial Budaya"},{value:"program-infrastruktur",label:"Program Infrastruktur"}],I=[{value:"jakarta",label:"Jakarta"},{value:"bandung",label:"Bandung"},{value:"surabaya",label:"Surabaya"},{value:"yogyakarta",label:"Yogyakarta"},{value:"medan",label:"Medan"},{value:"makassar",label:"Makassar"},{value:"semarang",label:"Semarang"},{value:"palembang",label:"Palembang"},{value:"denpasar",label:"Denpasar"},{value:"batam",label:"Batam"}],v=g(""),w=g(""),m=g(null),n=g([]),t=A({amount:"",program:"",pic:"",village:"",district:"",city:"",province:"",postalCode:"",address:"",report:"",branchId:""}),S=o=>{let r=o.target.value.replace(/[^\d.,]/g,"");r=r.replace(/,/g,".");const l=r.split(".");l.length>2&&(r=l[0]+"."+l.slice(1).join("")),t.amount=r},U=o=>{const a=o.target;if(a.files){const r=Array.from(a.files),l=20*1024*1024,c=[],k=[];r.forEach(x=>{x.size>l?k.push(x.name):c.push(x)}),k.length>0&&alert(`File berikut melebihi 20MB: ${k.join(", ")}`),n.value.push(...c),m.value&&(m.value.value="")}},F=o=>{n.value.splice(o,1)},K=o=>{if(o===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(a));return Math.round(o/Math.pow(a,l)*100)/100+" "+r[l]},D=async()=>{b.value&&u.params.id&&u.params.id},M=()=>{h.push("/keuangan/penyaluran")},L=async()=>{if(!t.amount){alert("Nominal wajib diisi");return}if(!t.program){alert("Program wajib diisi");return}if(!t.pic){alert("PIC wajib diisi");return}if(!t.branchId){alert("Kantor Cabang wajib diisi");return}try{const o=new FormData;o.append("amount",t.amount),o.append("program",t.program),o.append("pic",t.pic),o.append("village",t.village),o.append("district",t.district),o.append("city",t.city),o.append("province",t.province),o.append("postalCode",t.postalCode),o.append("address",t.address),o.append("report",t.report),o.append("branchId",t.branchId),n.value.forEach((a,r)=>{o.append(`images[${r}]`,a)}),b.value?alert("Penyaluran berhasil diupdate"):alert("Penyaluran berhasil dibuat"),h.push("/keuangan/penyaluran")}catch(o){console.error("Error saving:",o),alert("Terjadi kesalahan saat menyimpan data")}};return G(()=>{D()}),(o,a)=>(p(),R(Y,null,{default:T(()=>[e("div",_,[e("div",O,[e("h3",Q,y(j.value),1),e("button",{onClick:M,class:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"}," Kembali ")]),e("form",{onSubmit:$(L,["prevent"]),class:"flex flex-col"},[e("div",W,[e("div",X,[a[14]||(a[14]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[i(" Nominal "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Z,[a[13]||(a[13]=e("span",{class:"absolute left-4 top-1/2 -translate-y-1/2 text-sm text-gray-500 dark:text-gray-400"}," Rp ",-1)),s(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=r=>t.amount=r),onInput:S,placeholder:"Masukkan nominal penyaluran",required:"",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 pl-12 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,544),[[d,t.amount]])])]),e("div",aa,[a[15]||(a[15]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[i(" Program "),e("span",{class:"text-red-500"},"*")],-1)),C(B,{modelValue:t.program,"onUpdate:modelValue":a[1]||(a[1]=r=>t.program=r),options:V,placeholder:"Pilih atau cari program","search-input":v.value,"onUpdate:searchInput":a[2]||(a[2]=r=>v.value=r)},null,8,["modelValue","search-input"])]),e("div",ea,[a[16]||(a[16]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[i(" PIC "),e("span",{class:"text-red-500"},"*")],-1)),s(e("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=r=>t.pic=r),placeholder:"Masukkan penanggung jawab penyaluran",required:"",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.pic]])]),e("div",ra,[a[17]||(a[17]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Kelurahan ",-1)),s(e("input",{type:"text","onUpdate:modelValue":a[4]||(a[4]=r=>t.village=r),placeholder:"Masukkan kelurahan",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.village]])]),e("div",ta,[a[18]||(a[18]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Kecamatan ",-1)),s(e("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=r=>t.district=r),placeholder:"Masukkan kecamatan",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.district]])]),e("div",oa,[a[19]||(a[19]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Kota ",-1)),s(e("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=r=>t.city=r),placeholder:"Masukkan kota",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.city]])]),e("div",la,[a[20]||(a[20]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Provinsi ",-1)),s(e("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=r=>t.province=r),placeholder:"Masukkan provinsi",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.province]])]),e("div",sa,[a[21]||(a[21]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Kode Pos ",-1)),s(e("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=r=>t.postalCode=r),placeholder:"Masukkan kode pos",class:"dark:bg-dark-900 h-11 w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.postalCode]])]),e("div",da,[a[22]||(a[22]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Alamat ",-1)),s(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=r=>t.address=r),placeholder:"Masukkan detail alamat lengkap",rows:"3",class:"dark:bg-dark-900 h-auto w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.address]])]),e("div",na,[a[23]||(a[23]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Laporan ",-1)),s(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=r=>t.report=r),placeholder:"Masukkan catatan laporan hasil penyaluran",rows:"4",class:"dark:bg-dark-900 h-auto w-full rounded-lg border border-gray-300 bg-transparent bg-none px-4 py-2.5 text-sm text-gray-800 shadow-theme-xs placeholder:text-gray-400 focus:border-brand-300 focus:outline-hidden focus:ring-3 focus:ring-brand-500/10 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 dark:focus:border-brand-800"},null,512),[[d,t.report]])]),e("div",ia,[a[24]||(a[24]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"},[i(" Kantor Cabang "),e("span",{class:"text-red-500"},"*")],-1)),C(B,{modelValue:t.branchId,"onUpdate:modelValue":a[11]||(a[11]=r=>t.branchId=r),options:I,placeholder:"Pilih atau cari kantor cabang","search-input":w.value,"onUpdate:searchInput":a[12]||(a[12]=r=>w.value=r)},null,8,["modelValue","search-input"])]),e("div",ua,[a[28]||(a[28]=e("label",{class:"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400"}," Gambar Dokumentasi ",-1)),e("div",ga,[e("div",pa,[e("input",{type:"file",ref_key:"fileInputRef",ref:m,onChange:U,multiple:"",accept:"image/*",class:"hidden",id:"image-upload"},null,544),a[25]||(a[25]=e("label",{for:"image-upload",class:"flex cursor-pointer items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 px-6 py-8 text-center transition-colors hover:border-brand-300 hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-900/50 dark:hover:border-brand-500"},[e("div",{class:"text-center"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})]),e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},[e("span",{class:"font-medium text-brand-500"},"Klik untuk upload"),i(" atau drag and drop ")]),e("p",{class:"text-xs text-gray-500 dark:text-gray-500"}," PNG, JPG, GIF hingga 20MB (Multiple files) ")])],-1))]),n.value.length>0?(p(),f("div",ba,[(p(!0),f(H,null,J(n.value,(r,l)=>(p(),f("div",{key:l,class:"flex items-center justify-between rounded-lg border border-gray-200 bg-white p-3 dark:border-gray-700 dark:bg-gray-900/50"},[e("div",ma,[a[26]||(a[26]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded bg-gray-100 dark:bg-gray-800"},[e("svg",{class:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",null,[e("p",ca,y(r.name),1),e("p",ka,y(K(r.size)),1)])]),e("button",{type:"button",onClick:c=>F(l),class:"rounded-lg p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10"},[...a[27]||(a[27]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,xa)]))),128))])):q("",!0)])])]),e("div",{class:"flex items-center gap-3 mt-6 lg:justify-end"},[e("button",{onClick:M,type:"button",class:"flex w-full justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03] sm:w-auto"}," Kembali "),a[29]||(a[29]=e("button",{type:"submit",class:"flex w-full justify-center rounded-lg bg-brand-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-brand-600 sm:w-auto"}," Buat ",-1))])],32)])]),_:1}))}});export{Ma as default};
