<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\User;
use Spatie\Permission\Models\Role;
use Illuminate\Support\Facades\Hash;

class KaryawanSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $items = [
            [
                'name' => 'Abdul Hamid',
                'email' => 'abdulhamidsumarjo@gmail.com',
                'phone_number' => '6285288599925',
                'bank_name' => 'bsi',
                'bank_account_number' => '7066429894',
                'date_of_birth' => '1984-04-05',
                'education' => "S1 Lipia",
                'entry_date' => '2025-07-30',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Divia Zahra Choirunnisa',
                'email' => 'diviazahra63@gmail.com',
                'phone_number' => '628558858117',
                'bank_name' => 'BSI',
                'bank_account_number' => '7311270348',
                'date_of_birth' => '2007-07-15',
                'education' => 'SLTA',
                'entry_date' => '2025-05-13',
                'position_name' => 'Admin Cabang',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Jivanti Zuleika khoirunnisa',
                'email' => 'zuleikajivanti@gmail.com',
                'phone_number' => '6282112124504',
                'bank_name' => 'bsi',
                'bank_account_number' => '1190525249',
                'date_of_birth' => '2003-10-18',
                'education' => 'SLTA',
                'entry_date' => '2025-04-23',
                'position_name' => 'Program Offficer',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Fadli Darmadi',
                'email' => 'abu.hafizha@gmail.com',
                'phone_number' => '628988443187',
                'bank_name' => 'BSI',
                'bank_account_number' => '123456789',
                'date_of_birth' => '1977-07-16',
                'education' => 'SLTA',
                'entry_date' => '2025-01-06',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Putrie Intan',
                'email' => 'putrie.intannurh@gmail.com',
                'phone_number' => '6287809961362',
                'bank_name' => 'Seabank',
                'bank_account_number' => '901773655292',
                'date_of_birth' => '1995-09-08',
                'education' => "Tahfidzul Qur'an",
                'entry_date' => '2024-08-21',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '0e44a46d-7e39-486e-864f-5d8c38532ef7',
            ],
            [
                'name' => 'Haryadi kurniawan',
                'email' => 'kurniawanyadi74@gmail.com',
                'phone_number' => '6281219317355',
                'bank_name' => 'BSI',
                'bank_account_number' => '7002783503',
                'date_of_birth' => '1974-01-19',
                'education' => 'Sarjana ( S1) manajemen',
                'entry_date' => '2024-08-12',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Aldi Lustandial',
                'email' => 'bisnisaldi2@gmail.com',
                'phone_number' => '6281297655877',
                'bank_name' => 'Bca',
                'bank_account_number' => '7360294107',
                'date_of_birth' => '1985-11-09',
                'education' => 'Diploma 1',
                'entry_date' => '2024-06-10',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Ahmad Firdaus',
                'email' => 'ahmadfirdausfirdaus56@gmail.com',
                'phone_number' => '6289688138283',
                'bank_name' => 'b',
                'bank_account_number' => '12345678',
                'date_of_birth' => '1983-08-31',
                'education' => 'SMK',
                'entry_date' => '2024-01-08',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Safina Hana Azizah',
                'email' => 'finahana190@gmail.com',
                'phone_number' => '6287779152412',
                'bank_name' => 'BSI',
                'bank_account_number' => '7174590952',
                'date_of_birth' => '2014-03-12',
                'education' => 'SLTA',
                'entry_date' => '2023-07-01',
                'position_name' => 'Guru Pondok Tahfizh',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '0e44a46d-7e39-486e-864f-5d8c38532ef7',
            ],
            [
                'name' => 'ARYA BRAMANTYO',
                'email' => 'aryabramantyo8781@gmail.com',
                'phone_number' => '6287771679152',
                'bank_name' => 'BCA',
                'bank_account_number' => '5500487145',
                'date_of_birth' => '1987-07-01',
                'education' => 'S1',
                'entry_date' => '2023-06-01',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Isnah dayu wati',
                'email' => 'isnahbramantyo@gmail.com',
                'phone_number' => '6281316818713',
                'bank_name' => 'bsi',
                'bank_account_number' => '7258776407',
                'date_of_birth' => '1981-06-03',
                'education' => 'S1',
                'entry_date' => '2023-05-22',
                'position_name' => 'Admin Cabang',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Rina Nurlaela',
                'email' => 'rinanurlaela804@gmail.com',
                'phone_number' => '6283811260406',
                'bank_name' => 'Bsi',
                'bank_account_number' => '1023468162',
                'date_of_birth' => '1981-11-11',
                'education' => 'Slta',
                'entry_date' => '2023-02-20',
                'position_name' => 'Guru Pondok Tahfizh',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '0e44a46d-7e39-486e-864f-5d8c38532ef7',
            ],
            [
                'name' => 'Siti Mawadah',
                'email' => 'symawadah05@gmail.com',
                'phone_number' => '6285715023645',
                'bank_name' => 'BSI',
                'bank_account_number' => '7898765',
                'date_of_birth' => '2000-05-05',
                'education' => 'S1',
                'entry_date' => '2023-01-31',
                'position_name' => 'Guru Pondok Tahfizh',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '0e44a46d-7e39-486e-864f-5d8c38532ef7',
            ],
            [
                'name' => 'Dian Jumardiansyah',
                'email' => 'dede.zahrah212@gmail.com',
                'phone_number' => '6281298723110',
                'bank_name' => 'BSI',
                'bank_account_number' => '98767890',
                'date_of_birth' => '1985-03-22',
                'education' => 'SLTA',
                'entry_date' => '2023-01-31',
                'position_name' => 'Admin Cabang',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => 'd0435799-87c8-410c-8f71-7af3a1d5c799',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Helly Armiandri',
                'email' => 'hellyarmiandri2401@gmail.com',
                'phone_number' => '6281212856394',
                'bank_name' => 'BSI',
                'bank_account_number' => '12345432',
                'date_of_birth' => '1978-01-24',
                'education' => 'SLTA',
                'entry_date' => '2023-01-31',
                'position_name' => 'Fundrising',
                'rank_id' => 'e1b0d2b4-1b1e-4af1-a103-cf18fd740a33',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Agustari',
                'email' => 'agussukses72@gmail.com',
                'phone_number' => '6285214960961',
                'bank_name' => 'BSI',
                'bank_account_number' => '12341234',
                'date_of_birth' => '1972-08-14',
                'education' => 'S1',
                'entry_date' => '2023-01-31',
                'position_name' => 'Direktur Fundrising',
                'rank_id' => '62c21575-a5b3-452f-819b-7a666ab943f9',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
            [
                'name' => 'Sugeng Riyadi',
                'email' => 'suririyade@gmail.com',
                'phone_number' => '6281311628088',
                'bank_name' => '01-2023131-kms001-1',
                'bank_account_number' => '1111111111',
                'date_of_birth' => '1972-12-23',
                'education' => 'SLTA',
                'entry_date' => '2023-01-31',
                'position_name' => 'Fundrising',
                'rank_id' => '62c21575-a5b3-452f-819b-7a666ab943f9',
                'branch_office_id' => '99425ce7-e52b-4756-a871-d4c91154d2e1',
                'attendance_type_id' => '00356e90-c673-4d24-a786-aee985b0c038',
            ],
        ];

        foreach ($items as $it) {
            $data = [
                'name' => $it['name'],
                'email' => $it['email'],
                'password' => Hash::make('password123'),
                'no_handphone' => $it['phone_number'] ?? null,
                'nama_bank' => $it['bank_name'] ?? null,
                'no_rekening' => $it['bank_account_number'] ?? null,
                'tanggal_lahir' => $it['date_of_birth'] ?? null,
                'pendidikan' => $it['education'] ?? null,
                'tanggal_masuk' => $it['entry_date'] ?? null,
                'posisi' => $it['position_name'] ?? null,
                'pangkat_id' => $it['rank_id'] ?? null,
                'tipe_absensi_id' => $it['attendance_type_id'] ?? null,
                'kantor_cabang_id' => $it['branch_office_id'] ?? null,
                'tipe_user' => 'karyawan',
                'is_active' => true,
            ];

            $user = User::updateOrCreate(
                ['email' => $it['email']],
                $data
            );

            // assign role by position name if exists
            if (!empty($it['position_name'])) {
                $role = Role::where('name', $it['position_name'])->first();
                if ($role) {
                    $user->syncRoles($role);
                }
            }
        }

        $this->command->info('Seeded ' . count($items) . ' karyawan');
    }
}
