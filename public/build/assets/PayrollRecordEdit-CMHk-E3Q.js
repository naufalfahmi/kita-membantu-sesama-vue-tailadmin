import{d as st,H as ot,I as nt,M as lt,b as O,f as K,A as q,V as at,g as it,o as m,w as rt,a as t,t as a,m as T,c as b,F as $,l as H,k as i,v as u,N as I,i as R,q as A,n as g,u as dt}from"./admin-BXgqhMOc.js";import{_ as ut}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Bc44eTII.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const pt={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 pb-24 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},ct={class:"mb-4"},_t={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},mt={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},ht={class:"flex items-center justify-between mb-3"},bt={class:"flex items-center gap-2"},yt={class:"text-sm text-gray-500"},vt={class:"font-medium"},ft={class:"w-full table-auto border-collapse"},gt={class:"p-2"},xt={class:"p-2"},wt=["onUpdate:modelValue"],kt={class:"p-2"},qt=["onUpdate:modelValue"],Ct={class:"p-2"},Ut=["onUpdate:modelValue"],Tt={class:"p-2"},It=["onUpdate:modelValue","onInput"],Vt={class:"p-2"},jt=["onUpdate:modelValue"],Nt={class:"p-2"},Pt={class:""},Mt={class:"p-2 relative"},St={class:"flex items-center justify-end"},$t=["onClick"],Ht={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},Rt={class:"flex flex-col gap-1"},At=["onClick"],Ft=["onClick"],Lt={class:"border-t mt-2 pt-2"},Xt=["onClick"],Dt={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},Et={class:"flex items-center justify-between mb-3"},Jt={class:"flex items-center gap-2"},Ot={class:"text-sm text-gray-500"},zt={class:"font-medium"},Gt={class:"w-full table-auto border-collapse"},Kt={class:"p-2"},Bt={class:"p-2"},Qt=["onUpdate:modelValue"],Wt={class:"p-2"},Yt=["onUpdate:modelValue"],Zt={class:"p-2"},te=["onUpdate:modelValue"],ee={class:"p-2"},se=["onUpdate:modelValue","onInput"],oe={class:"p-2"},ne=["onUpdate:modelValue"],le={class:"p-2"},ae={class:""},ie={class:"p-2 relative"},re={class:"flex items-center justify-end"},de=["onClick"],ue={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},pe={class:"flex flex-col gap-1"},ce=["onClick"],_e=["onClick"],me={class:"border-t mt-2 pt-2"},he=["onClick"],be={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},ye={class:"flex items-center justify-between mb-3"},ve={class:"flex items-center gap-2"},fe={class:"text-sm text-gray-500"},ge={class:"font-medium"},xe={class:"w-full table-auto border-collapse"},we={class:"p-2"},ke={class:"p-2"},qe=["onUpdate:modelValue"],Ce={class:"p-2"},Ue=["onUpdate:modelValue"],Te={class:"p-2"},Ie=["onUpdate:modelValue"],Ve={class:"p-2"},je=["onUpdate:modelValue","onInput"],Ne={class:"p-2"},Pe=["onUpdate:modelValue"],Me={class:"p-2"},Se={class:""},$e={class:"p-2 relative"},He={class:"flex items-center justify-end"},Re=["onClick"],Ae={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},Fe={class:"flex flex-col gap-1"},Le=["onClick"],Xe=["onClick"],De={class:"border-t mt-2 pt-2"},Ee=["onClick"],Je={class:"mb-6 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},Oe={class:"flex items-center justify-between mb-3"},ze={class:"flex items-center gap-2"},Ge={class:"text-sm text-gray-500"},Ke={class:"font-medium"},Be={class:"w-full table-auto border-collapse"},Qe={class:"p-2"},We={class:"p-2"},Ye=["onUpdate:modelValue"],Ze={class:"p-2"},ts=["onUpdate:modelValue"],es={class:"p-2"},ss=["onUpdate:modelValue"],os={class:"p-2"},ns=["onUpdate:modelValue","onInput"],ls={class:"p-2"},as=["onUpdate:modelValue"],is={class:"p-2"},rs={class:""},ds={class:"p-2 relative"},us={class:"flex items-center justify-end"},ps=["onClick"],cs={key:0,class:"absolute right-0 mt-2 w-40 bg-white border rounded shadow p-2 z-50"},_s={class:"flex flex-col gap-1"},ms=["onClick"],hs=["onClick"],bs={class:"border-t mt-2 pt-2"},ys=["onClick"],vs={class:"mt-4 rounded border border-gray-200 p-4 bg-white dark:bg-white/[0.03]"},fs={class:"text-sm text-gray-700"},gs={class:"flex justify-between"},xs={class:"font-semibold"},ws={class:"flex justify-between"},ks={class:"font-semibold"},qs={class:"flex justify-between"},Cs={class:"font-semibold"},Us={class:"flex justify-between"},Ts={class:"font-semibold"},Is={class:"flex justify-between"},Vs={class:"font-semibold text-lg"},js={class:"sticky bottom-0 left-0 right-0 z-40 bg-white/90 border-t dark:bg-white/[0.03]"},Ns={class:"max-w-6xl mx-auto px-5 py-3 flex items-center justify-between gap-4"},Ps={class:"flex-1"},Ms={class:"text-sm text-gray-500"},Ss={class:"font-semibold"},$s={class:"flex items-center gap-3"},Ls=st({__name:"PayrollRecordEdit",setup(Hs){const x=ot(),B=nt(),v=lt(),h=O({}),p=O([]),Q=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],W=n=>{if(!n)return"-";const e=n.month?Q[(n.month||1)-1]:"",d=n.year||"",l=n.status?` Â· ${n.status}`:"";return`${e} ${d}${l}`},C=async()=>{var l;const n=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content");return n||(await(await fetch("/admin/api/csrf-token",{credentials:"same-origin"})).json()).csrf_token||""},V=async()=>{const n=x.params.periodId,e=x.params.recordId,l=await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{credentials:"same-origin"})).json();if(!l.success){v.error("Gagal memuat data");return}h.value=l.data,h.value.status||(h.value.status="pending"),p.value=(l.data.items||[]).map(s=>({...s,qty:Number(s.qty),unit_value:Number(s.unit_value),qty_type:s.qty_type==="fixed"?"multiplier":s.qty_type}))};K(async()=>{await V(),Y()});const Y=()=>{const n=[{description:"Gaji Pokok",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Uang Makan",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Uang Transport",qty:0,qty_type:"multiplier",unit:"bulan",unit_value:0,group:"penghasilan"},{description:"Dana Kolekan",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Kotak Home",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Kotak Publik",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Qurban",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"fundraising"},{description:"Tunjangan Jabatan",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"THR",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Perjalanan Dinas",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Lembur",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"other"},{description:"Tidak Masuk",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"deduction"},{description:"Terlambat",qty:0,qty_type:"multiplier",unit:"",unit_value:0,group:"deduction"}];for(const e of n)p.value.some(l=>(l.description||"").toLowerCase()===e.description.toLowerCase())||p.value.push({id:null,_tempId:String(Date.now())+Math.random().toString(36).substr(2,5),description:e.description,qty:e.qty,qty_type:e.qty_type,unit:e.unit,unit_value:e.unit_value,amount:0,group:e.group})},j=(n="penghasilan")=>{p.value.push({id:null,_tempId:String(Date.now())+Math.random().toString(36).substr(2,5),description:"",qty:0,qty_type:"multiplier",unit:"",unit_value:0,amount:0,group:n})},N=async n=>{if(n.id){const e=x.params.periodId,d=x.params.recordId,l=await C();if(!(await(await fetch(`/admin/api/operasional/payroll/periods/${e}/records/${d}/items/${n.id}`,{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-TOKEN":l,"X-Requested-With":"XMLHttpRequest"}})).json()).success){v.error("Gagal menghapus item");return}v.success("Item dihapus"),V()}else p.value=p.value.filter(e=>e!==n)},Z=async()=>{const n=x.params.periodId,e=x.params.recordId;if(h.value.status&&h.value.status!=="pending")try{const o=await C();if(!(await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({status:h.value.status})})).json()).success){v.error("Gagal mengubah status");return}await V(),v.success("Perubahan status tersimpan");return}catch{v.error("Gagal mengubah status");return}const d={};for(let o=0;o<p.value.length;o++){const _=p.value[o],E={description:_.description,qty:Math.round(Number(_.qty)||0),qty_type:_.qty_type==="fixed"?"multiplier":_.qty_type,unit:_.unit,unit_value:_.unit_value,group:_.group||w(_),order_index:o};if(_.id){const J=await C(),k=await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}/items/${_.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":J,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(E)})).json();if(!k.success){v.error("Gagal mengubah item");return}p.value[o]={...k.data}}else{const J=await C(),k=await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}/items`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":J,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify(E)})).json();if(!k.success){v.error("Gagal menambah item");return}_._tempId&&(d[_._tempId]=k.data.id),p.value[o]={...k.data}}}const l=await C();if(!(await(await fetch(`/admin/api/operasional/payroll/periods/${n}/records/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":l,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({status:h.value.status})})).json()).success){v.error("Gagal mengubah status");return}await V(),v.success("Perubahan tersimpan")},U=n=>n.qty_type==="fixed"||n.qty_type==="multiplier"?(Number(n.qty)||0)*(Number(n.unit_value)||0):n.qty_type==="percent"?(Number(n.qty)||0)/100*(Number(n.unit_value)||0):0,c=n=>{const e=Number(n||0);return`Rp. ${new Intl.NumberFormat("id-ID",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}`},w=n=>{if(n.group)return n.group;const e=(n.description||"").toLowerCase(),d=["gaji pokok","uang makan","uang transport"],l=["dana kolekan","kotak home","kotak publik","qurban"],s=["tunjangan jabatan","thr","perjalanan dinas","lembur"],y=["tidak masuk","terlambat"];return d.includes(e)?"penghasilan":l.includes(e)?"fundraising":s.includes(e)?"other":y.includes(e)?"deduction":"other"},P=n=>p.value.reduce((e,d)=>{if(w(d)===n){const l=U(d);return e+l}return e},0),F=q(()=>P("penghasilan")),L=q(()=>P("fundraising")),X=q(()=>P("other")),D=q(()=>P("deduction")),tt=q(()=>Number(F.value)+Number(L.value)+Number(X.value)),z=q(()=>Number(tt.value)-Number(D.value)),r=O(null),M=(n,e)=>{e&&e.stopPropagation();const d=n.id||n._tempId;r.value=r.value===d?null:d},f=(n,e)=>{e==="fixed"&&(e="multiplier"),n.qty_type=e,e==="percent"?((!n.unit||n.unit==="")&&(n.unit="%"),(n.unit_value===null||n.unit_value===void 0)&&(n.unit_value=0)):n.unit==="%"&&(n.unit=""),r.value=null},S=n=>{const e=(n.unit||"").toString();e.includes("%")?(n.qty_type="percent",e.trim()||(n.unit="%"),(n.unit_value===null||n.unit_value===void 0)&&(n.unit_value=0)):n.qty_type==="percent"&&(n.qty_type="multiplier",n.unit==="%"&&(n.unit=""))},G=()=>{r.value=null};return K(()=>{document.addEventListener("click",G)}),at(()=>{document.removeEventListener("click",G)}),(n,e)=>(m(),it(ut,null,{default:rt(()=>{var d,l;return[t("div",pt,[e[41]||(e[41]=t("div",{class:"mb-6 flex items-center justify-between"},[t("h3",{class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},"Edit Payroll Record"),t("div",{class:"flex items-center gap-3"})],-1)),t("div",ct,[t("div",_t,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium"},"Karyawan",-1)),t("div",null,a((d=h.value.employee)==null?void 0:d.name),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium"},"No. Induk",-1)),t("div",null,a(((l=h.value.employee)==null?void 0:l.no_induk)||"-"),1)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium"},"Periode",-1)),t("div",null,a(W(h.value.period)),1)])])]),t("div",null,[t("div",mt,[t("div",ht,[e[10]||(e[10]=t("h4",{class:"font-medium"},"Penghasilan",-1)),t("div",bt,[t("div",yt,[e[9]||(e[9]=T("Total: ",-1)),t("span",vt,a(c(F.value)),1)]),t("button",{onClick:e[0]||(e[0]=s=>j("penghasilan")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",ft,[e[14]||(e[14]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(m(!0),b($,null,H(p.value.filter(s=>w(s)==="penghasilan"),(s,y)=>(m(),b("tr",{key:s.id||s._tempId},[t("td",gt,a(y+1),1),t("td",xt,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,wt),[[u,s.description]])]),t("td",kt,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,qt),[[u,s.qty,void 0,{number:!0}]])]),t("td",Ct,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[11]||(e[11]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,Ut),[[I,s.qty_type]])]),t("td",Tt,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>S(s),class:"w-full rounded border p-2"},null,40,It),[[u,s.unit]])]),t("td",Vt,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,jt),[[u,s.unit_value,void 0,{number:!0}]])]),t("td",Nt,[t("div",Pt,a(c(U(s))),1)]),t("td",Mt,[t("div",St,[t("button",{onClick:A(o=>M(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,$t),r.value===(s.id||s._tempId)?(m(),b("div",Ht,[e[13]||(e[13]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",Rt,[t("button",{onClick:()=>{f(s,"percent"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,At),t("button",{onClick:()=>{f(s,"multiplier"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,Ft)]),t("div",Lt,[t("button",{onClick:o=>{o.stopPropagation(),N(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,Xt)])])):R("",!0)])])]))),128))])])]),t("div",Dt,[t("div",Et,[e[16]||(e[16]=t("h4",{class:"font-medium"},"Fundraising",-1)),t("div",Jt,[t("div",Ot,[e[15]||(e[15]=T("Total: ",-1)),t("span",zt,a(c(L.value)),1)]),t("button",{onClick:e[1]||(e[1]=s=>j("fundraising")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",Gt,[e[20]||(e[20]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(m(!0),b($,null,H(p.value.filter(s=>w(s)==="fundraising"),(s,y)=>(m(),b("tr",{key:s.id||s._tempId},[t("td",Kt,a(y+1),1),t("td",Bt,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,Qt),[[u,s.description]])]),t("td",Wt,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,Yt),[[u,s.qty,void 0,{number:!0}]])]),t("td",Zt,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[17]||(e[17]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,te),[[I,s.qty_type]])]),t("td",ee,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>S(s),class:"w-full rounded border p-2"},null,40,se),[[u,s.unit]])]),t("td",oe,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",class:"w-full rounded border p-2"},null,8,ne),[[u,s.unit_value,void 0,{number:!0}]])]),t("td",le,[t("div",ae,a(c(U(s))),1)]),t("td",ie,[t("div",re,[t("button",{onClick:A(o=>M(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,de),r.value===(s.id||s._tempId)?(m(),b("div",ue,[e[19]||(e[19]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",pe,[t("button",{onClick:()=>{f(s,"percent"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,ce),t("button",{onClick:()=>{f(s,"multiplier"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,_e)]),t("div",me,[t("button",{onClick:o=>{o.stopPropagation(),N(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,he)])])):R("",!0)])])]))),128))])])]),t("div",be,[t("div",ye,[e[22]||(e[22]=t("h4",{class:"font-medium"},"Lain-lain",-1)),t("div",ve,[t("div",fe,[e[21]||(e[21]=T("Total: ",-1)),t("span",ge,a(c(X.value)),1)]),t("button",{onClick:e[2]||(e[2]=s=>j("other")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",xe,[e[26]||(e[26]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(m(!0),b($,null,H(p.value.filter(s=>w(s)==="other"),(s,y)=>(m(),b("tr",{key:s.id||s._tempId},[t("td",we,a(y+1),1),t("td",ke,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,qe),[[u,s.description]])]),t("td",Ce,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,Ue),[[u,s.qty,void 0,{number:!0}]])]),t("td",Te,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[23]||(e[23]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,Ie),[[I,s.qty_type]])]),t("td",Ve,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>S(s),class:"w-full rounded border p-2"},null,40,je),[[u,s.unit]])]),t("td",Ne,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",class:"w-full rounded border p-2"},null,8,Pe),[[u,s.unit_value,void 0,{number:!0}]])]),t("td",Me,[t("div",Se,a(c(U(s))),1)]),t("td",$e,[t("div",He,[t("button",{onClick:A(o=>M(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[24]||(e[24]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,Re),r.value===(s.id||s._tempId)?(m(),b("div",Ae,[e[25]||(e[25]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",Fe,[t("button",{onClick:()=>{f(s,"percent"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,Le),t("button",{onClick:()=>{f(s,"multiplier"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,Xe)]),t("div",De,[t("button",{onClick:o=>{o.stopPropagation(),N(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,Ee)])])):R("",!0)])])]))),128))])])]),t("div",Je,[t("div",Oe,[e[28]||(e[28]=t("h4",{class:"font-medium"},"Potongan",-1)),t("div",ze,[t("div",Ge,[e[27]||(e[27]=T("Total: ",-1)),t("span",Ke,a(c(D.value)),1)]),t("button",{onClick:e[3]||(e[3]=s=>j("deduction")),class:"rounded bg-gray-100 px-3 py-1 text-sm"},"Tambah Item")])]),t("table",Be,[e[32]||(e[32]=t("thead",null,[t("tr",null,[t("th",{class:"text-left p-2"},"#"),t("th",{class:"text-left p-2"},"Uraian"),t("th",{class:"text-left p-2"},"Qty"),t("th",{class:"sr-only"},"Tipe"),t("th",{class:"text-left p-2"},"Satuan"),t("th",{class:"text-left p-2"},"Nilai Satuan"),t("th",{class:"text-left p-2"},"Jumlah"),t("th",{class:"text-left p-2"},"Aksi")])],-1)),t("tbody",null,[(m(!0),b($,null,H(p.value.filter(s=>w(s)==="deduction"),(s,y)=>(m(),b("tr",{key:s.id||s._tempId},[t("td",Qe,a(y+1),1),t("td",We,[i(t("input",{"onUpdate:modelValue":o=>s.description=o,class:"w-full rounded border p-2"},null,8,Ye),[[u,s.description]])]),t("td",Ze,[i(t("input",{"onUpdate:modelValue":o=>s.qty=o,type:"number",step:"1",min:"0",class:"w-full rounded border p-2"},null,8,ts),[[u,s.qty,void 0,{number:!0}]])]),t("td",es,[i(t("select",{"onUpdate:modelValue":o=>s.qty_type=o,class:"hidden"},[...e[29]||(e[29]=[t("option",{value:"percent"},"Percent",-1),t("option",{value:"multiplier"},"Multiplier",-1)])],8,ss),[[I,s.qty_type]])]),t("td",os,[i(t("input",{"onUpdate:modelValue":o=>s.unit=o,onInput:o=>S(s),class:"w-full rounded border p-2"},null,40,ns),[[u,s.unit]])]),t("td",ls,[i(t("input",{"onUpdate:modelValue":o=>s.unit_value=o,type:"number",class:"w-full rounded border p-2"},null,8,as),[[u,s.unit_value,void 0,{number:!0}]])]),t("td",is,[t("div",rs,a(c(U(s))),1)]),t("td",ds,[t("div",us,[t("button",{onClick:A(o=>M(s,o),["stop"]),class:"p-1 rounded hover:bg-gray-100",title:"Ubah tipe"},[...e[30]||(e[30]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09c.7 0 1.26-.41 1.51-1a1.65 1.65 0 0 0-.33-1.82l-.06-.06A2 2 0 0 1 7.4 2.34l.06.06a1.65 1.65 0 0 0 1.82.33h.09C10.3 2.6 10.8 2 12 2s1.7.6 1.83 1.73h.09c.7 0 1.26.41 1.51 1a1.65 1.65 0 0 0 1.82.33l.06-.06A2 2 0 0 1 20.6 6.6l-.06.06a1.65 1.65 0 0 0-.33 1.82c.13.63.63 1.23 1.46 1.23H21a2 2 0 0 1 0 4h-.09c-.83 0-1.33.6-1.46 1.23z"})],-1)])],8,ps),r.value===(s.id||s._tempId)?(m(),b("div",cs,[e[31]||(e[31]=t("div",{class:"text-sm font-medium mb-1"},"Tipe",-1)),t("div",_s,[t("button",{onClick:()=>{f(s,"percent"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="percent"?"bg-gray-100 font-semibold":""])},"Percent",10,ms),t("button",{onClick:()=>{f(s,"multiplier"),r.value=null},class:g(["text-sm text-left p-1 hover:bg-gray-50",s.qty_type==="multiplier"?"bg-gray-100 font-semibold":""])},"Multiplier",10,hs)]),t("div",bs,[t("button",{onClick:o=>{o.stopPropagation(),N(s),r.value=null},class:"text-sm text-left p-1 text-red-600 hover:bg-red-50"},"Hapus Item",8,ys)])])):R("",!0)])])]))),128))])])]),t("div",vs,[t("div",fs,[t("div",gs,[e[33]||(e[33]=t("div",null,"Total Penghasilan",-1)),t("div",xs,a(c(F.value)),1)]),t("div",ws,[e[34]||(e[34]=t("div",null,"Total Fundraising",-1)),t("div",ks,a(c(L.value)),1)]),t("div",qs,[e[35]||(e[35]=t("div",null,"Total Lain-lain",-1)),t("div",Cs,a(c(X.value)),1)]),t("div",Us,[e[36]||(e[36]=t("div",null,"Total Potongan",-1)),t("div",Ts,a(c(D.value)),1)]),e[38]||(e[38]=t("div",{class:"border-t mt-2 mb-2"},null,-1)),t("div",Is,[e[37]||(e[37]=t("div",{class:"font-semibold text-lg"},"Take Home Pay",-1)),t("div",Vs,a(c(z.value)),1)])])]),t("div",js,[t("div",Ns,[t("div",Ps,[t("div",Ms,[e[39]||(e[39]=T("Take Home: ",-1)),t("span",Ss,a(c(z.value)),1)])]),t("div",$s,[i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>h.value.status=s),class:"h-11 rounded-lg border px-4 py-2 text-sm text-gray-800"},[...e[40]||(e[40]=[t("option",{value:"pending"},"pending",-1),t("option",{value:"locked"},"locked",-1),t("option",{value:"transferred"},"transferred",-1)])],512),[[I,h.value.status]]),t("button",{onClick:Z,class:"rounded bg-brand-500 px-4 py-2 text-white"},"Simpan"),t("button",{onClick:e[5]||(e[5]=s=>dt(B).back()),class:"rounded border px-4 py-2"},"Kembali")])])])])])]}),_:1}))}});export{Ls as default};
