import{d as A,H as K,I as B,A as N,b as p,f as H,g as z,o,w as S,a as t,c as n,t as r,m as b,i as g,F as $,l as L,n as v}from"./admin-B8JM7eqe.js";import{_ as R}from"./AdminLayout.vue_vue_type_script_setup_true_lang-HRRzoLqS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"min-h-screen rounded-2xl border border-gray-200 bg-white px-5 py-7 dark:border-gray-800 dark:bg-white/[0.03] xl:px-10 xl:py-12"},E={class:"mb-6 flex items-center justify-between"},F={class:"font-semibold text-gray-800 text-theme-xl dark:text-white/90 sm:text-2xl"},V={key:0,class:"flex items-center justify-center py-20"},q={key:1,class:"space-y-6"},J={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},W={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},X={class:"text-sm font-semibold text-gray-800 dark:text-white/90"},P={class:"text-sm font-semibold text-gray-800 dark:text-white/90"},G={class:"text-sm font-semibold text-gray-800 dark:text-white/90"},O={key:0},Q={class:"space-y-1"},U={class:"text-xs text-gray-500"},Y={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Z={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},tt={class:"space-y-4"},et={class:"text-sm font-semibold text-gray-800 dark:text-white/90"},at={key:0},st={class:"text-sm text-gray-800 dark:text-white/90"},rt={key:1},ot={class:"text-sm text-gray-800 dark:text-white/90"},nt={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},dt={key:0,class:"space-y-4"},lt={class:"text-sm font-semibold text-gray-800 dark:text-white/90"},it={key:0},ut={class:"text-sm text-gray-800 dark:text-white/90"},gt={key:1},xt={class:"text-sm text-gray-800 dark:text-white/90"},mt={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},kt={class:"rounded-2xl border border-gray-200 bg-gradient-to-br from-brand-50 to-brand-100 p-6 dark:border-gray-800 dark:from-brand-900/20 dark:to-brand-900/10"},bt={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},ct={class:"text-2xl font-bold text-brand-600 dark:text-brand-400"},yt={class:"text-sm font-semibold text-gray-800 dark:text-white/90"},pt={key:0,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},vt={class:"space-y-4"},ft={key:0},ht={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line"},_t={key:1},wt={class:"text-sm text-gray-700 dark:text-gray-300"},jt={key:2,class:"flex flex-col items-center justify-center py-20"},Kt=A({__name:"AbsensiDetail",setup(Ct){const f=K(),h=B(),_=N(()=>"Detail Absensi"),k=p(!0),a=p(null),w=()=>{var s;return((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},j=async()=>{k.value=!0;try{const s=f.params.id,l=await(await fetch(`/admin/api/absensi/${s}`,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json","X-CSRF-TOKEN":w()},credentials:"same-origin"})).json();l.success?a.value=l.data:(console.error("Failed to load data:",l.message),a.value=null)}catch(s){console.error("Error loading absensi data:",s),a.value=null}finally{k.value=!1}},c=s=>s?new Date(s).toLocaleString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",C=s=>(s==="terlambat"&&(s="hadir"),{hadir:"Hadir",pulang_awal:"Pulang Awal",tidak_hadir:"Tidak Hadir",izin:"Izin",sakit:"Sakit",cuti:"Cuti"}[s]||s),M=s=>(s==="terlambat"&&(s="hadir"),{hadir:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",pulang_awal:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",tidak_hadir:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",izin:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",sakit:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",cuti:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400"}[s]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"),T=s=>(s==="terlambat"&&(s="hadir"),{hadir:"bg-green-500",pulang_awal:"bg-yellow-500",tidak_hadir:"bg-red-500",izin:"bg-blue-500",sakit:"bg-purple-500",cuti:"bg-indigo-500"}[s]||"bg-gray-500"),D=(s,e,l)=>{if(s&&e)try{const u=new Date(s),i=new Date(e);let d=Math.round((i.getTime()-u.getTime())/6e4);d<0&&(d+=1440);const m=Math.floor(d/60),x=d%60;return x===0?`± ${m} jam`:`± ${m} jam ${x} menit`}catch{}if(l!=null&&!isNaN(Number(l))){const u=Number(l);let i=Math.floor(u),d=Math.round((u-i)*60);return d===60&&(i+=1,d=0),d===0?`± ${i} jam`:`± ${i} jam ${d} menit`}return"-"},y=()=>{h.push("/operasional/absensi")};return H(()=>{j()}),(s,e)=>(o(),z(R,null,{default:S(()=>{var l,u,i,d,m;return[t("div",I,[t("div",E,[t("h3",F,r(_.value),1),t("button",{onClick:y,class:"flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-white/[0.03]"},[...e[0]||(e[0]=[t("svg",{class:"fill-current",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M8.33333 15L3.33333 10M3.33333 10L8.33333 5M3.33333 10H16.6667",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1),b(" Kembali ",-1)])])]),k.value?(o(),n("div",V,[...e[1]||(e[1]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"h-12 w-12 animate-spin rounded-full border-4 border-brand-500 border-t-transparent"}),t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Memuat data absensi...")],-1)])])):a.value?(o(),n("div",q,[t("div",J,[e[6]||(e[6]=t("h4",{class:"mb-6 text-lg font-semibold text-gray-800 dark:text-white/90"}," Informasi Karyawan ",-1)),t("div",W,[t("div",null,[e[2]||(e[2]=t("p",{class:"mb-2 text-xs font-medium text-gray-500 dark:text-gray-400"},"Nama",-1)),t("p",X,r(((l=a.value.user)==null?void 0:l.name)||"-"),1)]),t("div",null,[e[3]||(e[3]=t("p",{class:"mb-2 text-xs font-medium text-gray-500 dark:text-gray-400"},"No Induk",-1)),t("p",P,r(((u=a.value.user)==null?void 0:u.no_induk)||"-"),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"mb-2 text-xs font-medium text-gray-500 dark:text-gray-400"},"Kantor Cabang",-1)),t("p",G,r(((i=a.value.kantor_cabang)==null?void 0:i.nama)||"-"),1)]),(d=a.value.user)!=null&&d.kantor_cabangs&&a.value.user.kantor_cabangs.length?(o(),n("div",O,[e[5]||(e[5]=t("p",{class:"mb-2 text-xs font-medium text-gray-500 dark:text-gray-400"},"Kantor Terdaftar (maks 2)",-1)),t("div",Q,[(o(!0),n($,null,L(a.value.user.kantor_cabangs.slice(0,2),(x,Mt)=>(o(),n("p",{key:x.id,class:"text-sm text-gray-800 dark:text-white/90"},[b(r(x.nama)+" ",1),t("span",U,"- "+r(x.latitude)+", "+r(x.longitude),1)]))),128))])])):g("",!0)])]),t("div",Y,[t("div",Z,[e[10]||(e[10]=t("div",{class:"mb-6 flex items-center gap-3"},[t("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-100 dark:bg-green-900/30"},[t("svg",{class:"h-5 w-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])]),t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"}," Absensi Masuk ")],-1)),t("div",tt,[t("div",null,[e[7]||(e[7]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Waktu",-1)),t("p",et,r(c(a.value.jam_masuk)),1)]),a.value.latitude_masuk&&a.value.longitude_masuk?(o(),n("div",at,[e[8]||(e[8]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Koordinat",-1)),t("p",st,r(a.value.latitude_masuk)+", "+r(a.value.longitude_masuk),1)])):g("",!0),a.value.jarak_masuk!==null?(o(),n("div",rt,[e[9]||(e[9]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Jarak dari Kantor",-1)),t("p",ot,r(a.value.jarak_masuk)+" meter ",1)])):g("",!0)])]),t("div",nt,[e[15]||(e[15]=t("div",{class:"mb-6 flex items-center gap-3"},[t("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-orange-100 dark:bg-orange-900/30"},[t("svg",{class:"h-5 w-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})])]),t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"}," Absensi Keluar ")],-1)),a.value.jam_keluar?(o(),n("div",dt,[t("div",null,[e[11]||(e[11]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Waktu",-1)),t("p",lt,r(c(a.value.jam_keluar)),1)]),a.value.latitude_keluar&&a.value.longitude_keluar?(o(),n("div",it,[e[12]||(e[12]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Koordinat",-1)),t("p",ut,r(a.value.latitude_keluar)+", "+r(a.value.longitude_keluar),1)])):g("",!0),a.value.jarak_keluar!==null?(o(),n("div",gt,[e[13]||(e[13]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Jarak dari Kantor",-1)),t("p",xt,r(a.value.jarak_keluar)+" meter ",1)])):g("",!0)])):(o(),n("div",mt,[...e[14]||(e[14]=[t("p",null,"Belum absen keluar",-1)])]))])]),t("div",kt,[e[19]||(e[19]=t("div",{class:"mb-6 flex items-center gap-3"},[t("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg bg-brand-500"},[t("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])]),t("h4",{class:"text-lg font-semibold text-gray-800 dark:text-white/90"}," Ringkasan ")],-1)),t("div",bt,[t("div",null,[e[16]||(e[16]=t("p",{class:"mb-2 text-xs font-medium text-gray-600 dark:text-gray-400"},"Total Jam Kerja",-1)),t("p",ct,r(D(a.value.jam_masuk,a.value.jam_keluar,a.value.total_jam_kerja)),1)]),t("div",null,[e[17]||(e[17]=t("p",{class:"mb-2 text-xs font-medium text-gray-600 dark:text-gray-400"},"Status",-1)),t("span",{class:v([M(a.value.computed_status||a.value.status),"inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium"])},[t("span",{class:v([T(a.value.computed_status||a.value.status),"h-2 w-2 rounded-full"])},null,2),b(" "+r(C(a.value.computed_status||a.value.status)),1)],2)]),t("div",null,[e[18]||(e[18]=t("p",{class:"mb-2 text-xs font-medium text-gray-600 dark:text-gray-400"},"Tipe Absensi",-1)),t("p",yt,r(((m=a.value.tipe_absensi)==null?void 0:m.nama)||"-"),1)])])]),a.value.catatan||a.value.alasan?(o(),n("div",pt,[e[22]||(e[22]=t("h4",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-white/90"}," Catatan & Alasan ",-1)),t("div",vt,[a.value.catatan?(o(),n("div",ft,[e[20]||(e[20]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Catatan",-1)),t("p",ht,r(a.value.catatan),1)])):g("",!0),a.value.alasan?(o(),n("div",_t,[e[21]||(e[21]=t("p",{class:"mb-1 text-xs font-medium text-gray-500 dark:text-gray-400"},"Alasan",-1)),t("p",wt,r(a.value.alasan),1)])):g("",!0)])])):g("",!0)])):(o(),n("div",jt,[e[23]||(e[23]=t("svg",{class:"mb-4 h-16 w-16 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[24]||(e[24]=t("p",{class:"text-lg font-medium text-gray-600 dark:text-gray-400"}," Data absensi tidak ditemukan ",-1)),t("button",{onClick:y,class:"mt-4 rounded-lg bg-brand-500 px-4 py-2 text-sm font-medium text-white hover:bg-brand-600"}," Kembali ke Daftar Absensi ")]))])]}),_:1}))}});export{Kt as default};
