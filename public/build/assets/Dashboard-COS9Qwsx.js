import{b as m,f as R,B,c as g,o as d,a as t,t as s,k as M,P as N,g as $,i as p,u as h,D as C,F as K,l as I,A as L,w as H,j as T}from"./admin-DGXMyYGb.js";import{P as S,F as E,L as U,U as q,C as z,a as V,B as X,_ as G}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Ci_gqzIY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"space-y-6"},W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},J={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},Q={class:"mt-2 text-2xl font-semibold text-gray-800"},Y={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},Z={class:"mt-2 text-2xl font-semibold text-gray-800"},tt={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},et={class:"mt-2 text-2xl font-semibold text-gray-800"},st={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},at={class:"mt-2 text-2xl font-semibold text-gray-800"},rt={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},ot={class:"mb-4 flex items-center justify-between"},nt={class:"flex items-center gap-3"},it={class:"mb-6"},lt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dt={class:"rounded-lg border p-4"},ct={class:"rounded-lg border p-4"},gt={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},ut={class:"overflow-x-auto"},mt={class:"w-full text-sm"},xt={class:"p-2 text-gray-700"},yt={class:"p-2 text-gray-700"},bt={class:"p-2 text-gray-700"},pt={class:"p-2 text-right font-semibold text-gray-800"},vt={__name:"FundraisingDashboard",props:{days:{type:Number,default:30}},setup(P){const n=m(P.days||30),o=m({}),x=m([]),u=m([]),b=m({}),f=m([]),k=m({}),v=m([]),_=m({}),i=c=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(c),a=c=>c==null?"-":`${c.toFixed(1)}%`,e=async()=>{try{const c=await fetch(`/admin/api/dashboard/stats?days=${n.value}`,{credentials:"same-origin"});if(!c.ok)return;const r=await c.json();if(r.success&&r.data&&r.data.fundraising){const l=r.data.fundraising;o.value={total_collected:l.total_collected,donor_count:l.donor_count,avg_donation:l.avg_donation,growth_percent:l.growth_percent},x.value=l.recent_transactions||[];const j=(l.timeseries||[]).map(w=>w.date),F=(l.timeseries||[]).map(w=>w.total);if(F.length&&(u.value=[{name:"Donasi",data:F}],b.value={chart:{toolbar:{show:!1},zoom:{enabled:!1}},stroke:{curve:"smooth",width:2},xaxis:{categories:j,labels:{style:{colors:"#6B7280"}}},yaxis:{labels:{formatter:w=>w},forceNiceScale:!0},tooltip:{y:{formatter:w=>i(w)}},colors:["#06B6D4"],markers:{size:0}}),Array.isArray(l.per_campaign)&&l.per_campaign.length){const w=l.per_campaign.map(D=>D.program_name),A=l.per_campaign.map(D=>D.total);f.value=[{name:"Per Campaign",data:A}],k.value={xaxis:{categories:w},colors:["#7C3AED"]}}else f.value=[];if(Array.isArray(l.channel_performance)&&l.channel_performance.length){const w=l.channel_performance.map(D=>D.channel),A=l.channel_performance.map(D=>D.total);v.value=A,_.value={labels:w}}else v.value=[]}}catch(c){console.error("Error loading fundraising dashboard",c)}};return R(()=>{e()}),B(n,()=>e()),(c,r)=>(d(),g("div",O,[t("div",W,[t("div",J,[r[1]||(r[1]=t("div",{class:"text-sm text-gray-600"},"Total Dana Terkumpul",-1)),t("div",Q,s(i(o.value.total_collected||0)),1)]),t("div",Y,[r[2]||(r[2]=t("div",{class:"text-sm text-gray-600"},"Donatur",-1)),t("div",Z,s(o.value.donor_count||0),1)]),t("div",tt,[r[3]||(r[3]=t("div",{class:"text-sm text-gray-600"},"Rata-rata Donasi",-1)),t("div",et,s(i(o.value.avg_donation||0)),1)]),t("div",st,[r[4]||(r[4]=t("div",{class:"text-sm text-gray-600"},"Growth vs Periode Sebelumnya",-1)),t("div",at,s(a(o.value.growth_percent)),1)])]),t("div",rt,[t("div",ot,[r[7]||(r[7]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Donasi Periode",-1)),t("div",nt,[r[6]||(r[6]=t("label",{class:"text-sm text-gray-500"},"Rentang",-1)),M(t("select",{"onUpdate:modelValue":r[0]||(r[0]=l=>n.value=l),onChange:e,class:"h-9 rounded-lg border border-gray-300 bg-white px-3 text-sm"},[...r[5]||(r[5]=[t("option",{value:7},"7 Hari",-1),t("option",{value:30},"30 Hari",-1),t("option",{value:90},"90 Hari",-1)])],544),[[N,n.value,void 0,{number:!0}]])])]),t("div",it,[u.value.length?(d(),$(h(C),{key:0,type:"area",height:"260",options:b.value,series:u.value},null,8,["options","series"])):p("",!0)]),t("div",lt,[t("div",dt,[r[8]||(r[8]=t("h4",{class:"text-sm text-gray-600"},"Donasi per Campaign",-1)),f.value.length?(d(),$(h(C),{key:0,type:"bar",height:"220",options:k.value,series:f.value},null,8,["options","series"])):p("",!0)]),t("div",ct,[r[9]||(r[9]=t("h4",{class:"text-sm text-gray-600"},"Channel Performance",-1)),v.value.length?(d(),$(h(C),{key:0,type:"pie",height:"220",options:_.value,series:v.value},null,8,["options","series"])):p("",!0)])])]),t("div",gt,[r[11]||(r[11]=t("h3",{class:"font-semibold text-gray-800 mb-4"},"Donasi Masuk (Terbaru)",-1)),t("div",ut,[t("table",mt,[r[10]||(r[10]=t("thead",null,[t("tr",{class:"text-left text-gray-500"},[t("th",{class:"p-2"},"Tanggal"),t("th",{class:"p-2"},"Donatur"),t("th",{class:"p-2"},"Campaign"),t("th",{class:"p-2 text-right"},"Nominal")])],-1)),t("tbody",null,[(d(!0),g(K,null,I(x.value,l=>(d(),g("tr",{key:l.id,class:"border-t"},[t("td",xt,s(l.tanggal_transaksi),1),t("td",yt,s(l.donatur_id||"-"),1),t("td",bt,s(l.program_id||"-"),1),t("td",pt,s(i(l.nominal)),1)]))),128))])])])])]))}},_t={class:"space-y-6"},ht={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ft={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},kt={class:"mt-2 text-2xl font-semibold text-gray-800"},wt={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},$t={class:"text-sm text-gray-600"},jt={class:"mt-2 text-2xl font-semibold text-gray-800"},Dt={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},Tt={class:"mt-2 text-2xl font-semibold text-gray-800"},Ct={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},Pt={class:"mt-2 text-2xl font-semibold text-gray-800"},Kt={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},It={class:"mb-4 flex items-center justify-between"},Rt={class:"flex items-center gap-3"},At={class:"mb-6"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mt={class:"rounded-2xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]"},Nt={class:"overflow-x-auto mt-3"},Ft={class:"w-full text-sm"},Lt={class:"p-2 text-gray-700"},Ht={class:"p-2 text-right font-semibold text-gray-800"},St={class:"p-2 text-right text-gray-700"},Et={key:0},Ut={class:"rounded-2xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-white/[0.03]"},qt={class:"overflow-x-auto mt-3"},zt={class:"w-full text-sm"},Vt={class:"p-2 text-gray-700"},Xt={class:"p-2 text-gray-700"},Gt={class:"p-2 text-gray-700"},Ot={class:"p-2 text-right font-semibold text-gray-800"},Wt={key:0},Jt={__name:"AdminCabangDashboard",setup(P){const y=m(30),n=m({}),o=m([]),x=m([]),u=m({}),b=m([]),f=L(()=>b.value&&b.value.length?b.value[0].total||0:n.value.transaksi_total||0),k=_=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(_),v=async()=>{try{const _=await fetch(`/admin/api/dashboard/stats?days=${y.value}`,{credentials:"same-origin"});if(!_.ok)return;const i=await _.json();if(i.success&&i.data&&i.data.admin_cabang){const a=i.data.admin_cabang;n.value={mitra_count:a.mitra_count,donatur_count:a.donatur_count,absensi_today:a.absensi_today,payroll_records:a.payroll_records,transaksi_total:a.transaksi_total,branch_name:a.branch_name||null},o.value=a.recent_transactions||[];const e=(a.timeseries||[]).map(r=>r.date),c=(a.timeseries||[]).map(r=>r.total);c.length&&(x.value=[{name:"Donasi",data:c}],u.value={chart:{toolbar:{show:!1},zoom:{enabled:!1}},stroke:{curve:"smooth",width:2},xaxis:{categories:e,labels:{style:{colors:"#6B7280"}}},yaxis:{labels:{formatter:r=>r},forceNiceScale:!0},tooltip:{y:{formatter:r=>k(r)}},colors:["#06B6D4"],markers:{size:0}}),b.value=Array.isArray(a.per_mitra)?a.per_mitra:[]}}catch(_){console.error("Error loading admin cabang dashboard",_)}};return R(()=>{v()}),B(y,()=>v()),(_,i)=>(d(),g("div",_t,[t("div",ht,[t("div",ft,[i[1]||(i[1]=t("div",{class:"text-sm text-gray-600"},"Transaksi by Mitra",-1)),t("div",kt,s(k(f.value)),1)]),t("div",wt,[t("div",$t,"Transaksi Cabang "+s(n.value.branch_name?"("+n.value.branch_name+")":""),1),t("div",jt,s(k(n.value.transaksi_total||0)),1)]),t("div",Dt,[i[2]||(i[2]=t("div",{class:"text-sm text-gray-600"},"Total Mitra",-1)),t("div",Tt,s(n.value.mitra_count||0)+" mitra",1)]),t("div",Ct,[i[3]||(i[3]=t("div",{class:"text-sm text-gray-600"},"Total Donatur",-1)),t("div",Pt,s(n.value.donatur_count||0)+" donatur",1)])]),t("div",Kt,[t("div",It,[i[6]||(i[6]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Transaksi Periode",-1)),t("div",Rt,[i[5]||(i[5]=t("label",{class:"text-sm text-gray-500"},"Rentang",-1)),M(t("select",{"onUpdate:modelValue":i[0]||(i[0]=a=>y.value=a),onChange:v,class:"h-9 rounded-lg border border-gray-300 bg-white px-3 text-sm"},[...i[4]||(i[4]=[t("option",{value:7},"7 Hari",-1),t("option",{value:30},"30 Hari",-1),t("option",{value:90},"90 Hari",-1)])],544),[[N,y.value,void 0,{number:!0}]])])]),t("div",At,[x.value.length?(d(),$(h(C),{key:0,type:"area",height:"260",options:u.value,series:x.value},null,8,["options","series"])):p("",!0)])]),t("div",Bt,[t("div",Mt,[i[9]||(i[9]=t("h4",{class:"text-sm text-gray-600"},"Top Mitra by Donasi",-1)),t("div",Nt,[t("table",Ft,[i[8]||(i[8]=t("thead",null,[t("tr",{class:"text-left text-gray-500"},[t("th",{class:"p-2"},"Mitra"),t("th",{class:"p-2 text-right"},"Total"),t("th",{class:"p-2 text-right"},"Count")])],-1)),t("tbody",null,[(d(!0),g(K,null,I(b.value,a=>(d(),g("tr",{key:a.mitra_id,class:"border-t"},[t("td",Lt,s(a.mitra_name||a.mitra_id||"Unknown"),1),t("td",Ht,s(k(a.total||0)),1),t("td",St,s(a.count||0),1)]))),128)),b.value.length===0?(d(),g("tr",Et,[...i[7]||(i[7]=[t("td",{class:"p-2 text-gray-500",colspan:"3"},"No data",-1)])])):p("",!0)])])])]),t("div",Ut,[i[12]||(i[12]=t("h4",{class:"text-sm text-gray-600"},"Recent Transactions",-1)),t("div",qt,[t("table",zt,[i[11]||(i[11]=t("thead",null,[t("tr",{class:"text-left text-gray-500"},[t("th",{class:"p-2"},"Tanggal"),t("th",{class:"p-2"},"Donatur"),t("th",{class:"p-2"},"Mitra"),t("th",{class:"p-2 text-right"},"Nominal")])],-1)),t("tbody",null,[(d(!0),g(K,null,I(o.value,a=>(d(),g("tr",{key:a.id,class:"border-t"},[t("td",Vt,s(a.tanggal_transaksi),1),t("td",Xt,s(a.donatur_name||a.donatur_id||"-"),1),t("td",Gt,s(a.mitra_name||a.mitra_id||"-"),1),t("td",Ot,s(k(a.nominal)),1)]))),128)),o.value.length===0?(d(),g("tr",Wt,[...i[10]||(i[10]=[t("td",{class:"p-2 text-gray-500",colspan:"4"},"No recent transactions",-1)])])):p("",!0)])])])])])]))}},Qt={class:"space-y-6"},Yt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Zt={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},te={class:"mt-2 text-2xl font-semibold text-gray-800"},ee={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},se={class:"mt-2 text-2xl font-semibold text-gray-800"},ae={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},re={class:"mt-2 text-2xl font-semibold text-gray-800"},oe={class:"rounded-lg border border-gray-100 p-4 bg-white dark:bg-white/[0.03]"},ne={class:"mt-2 text-2xl font-semibold text-gray-800"},ie={__name:"MitraDashboard",setup(P){const y=m({}),n=x=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(x),o=async()=>{try{const x=await fetch("/admin/api/dashboard/stats",{credentials:"same-origin"});if(!x.ok)return;const u=await x.json();u.success&&u.data&&u.data.mitra&&(y.value=u.data.mitra)}catch(x){console.error("Error loading mitra dashboard",x)}};return R(()=>o()),(x,u)=>(d(),g("div",Qt,[t("div",Yt,[t("div",Zt,[u[0]||(u[0]=t("div",{class:"text-sm text-gray-600"},"Total Transaksi",-1)),t("div",te,s(n(y.value.total_transaksi||0)),1)]),t("div",ee,[u[1]||(u[1]=t("div",{class:"text-sm text-gray-600"},"Total Fee",-1)),t("div",se,s(n(y.value.total_fee||0)),1)]),t("div",ae,[u[2]||(u[2]=t("div",{class:"text-sm text-gray-600"},"Total Donatur",-1)),t("div",re,s(y.value.donor_count||0)+" donatur",1)]),t("div",oe,[u[3]||(u[3]=t("div",{class:"text-sm text-gray-600"},"Total Transaksi",-1)),t("div",ne,s(y.value.transaksi_count||0)+" transaksi",1)])])]))}},le={class:"space-y-6"},de={class:"text-sm text-gray-500 dark:text-gray-400"},ce={key:0},ge={key:1},ue={key:0,class:"flex items-center justify-center py-12"},me={key:1,class:"space-y-6"},xe={key:3},ye={key:0,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},be={class:"mb-4 flex items-center justify-between"},pe={class:"flex items-center gap-3"},ve={class:"mb-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={class:"flex items-center justify-between"},fe={class:"text-sm text-gray-600"},ke={class:"mt-1 text-lg font-semibold text-gray-800"},we={class:"text-right"},$e={class:"mt-1 font-semibold"},je={class:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},De={key:0,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},Te={class:"mb-4 flex items-center justify-between"},Ce={class:"space-y-3"},Pe={class:"flex items-center justify-between"},Ke={class:"font-semibold text-gray-800 dark:text-white/90"},Ie={class:"flex items-center justify-between"},Re={class:"font-semibold text-gray-800 dark:text-white/90"},Ae={class:"flex items-center justify-between"},Be={class:"font-semibold text-gray-800 dark:text-white/90"},Me={class:"flex items-center justify-between"},Ne={class:"font-semibold text-gray-800 dark:text-white/90"},Fe={class:"flex items-center justify-between"},Le={class:"font-semibold text-gray-800 dark:text-white/90"},He={key:1,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},Se={class:"mb-4 flex items-center justify-between"},Ee={class:"space-y-3"},Ue={class:"flex items-center justify-between"},qe={class:"font-semibold text-gray-800 dark:text-white/90"},ze={class:"flex items-center justify-between"},Ve={class:"font-semibold text-gray-800 dark:text-white/90"},Xe={class:"flex items-center justify-between"},Ge={class:"font-semibold text-gray-800 dark:text-white/90"},Oe={class:"flex items-center justify-between"},We={class:"font-semibold text-gray-800 dark:text-white/90"},Je={class:"flex items-center justify-between"},Qe={class:"font-semibold text-gray-800 dark:text-white/90"},Ye={class:"flex items-center justify-between"},Ze={class:"font-semibold text-gray-800 dark:text-white/90"},ts={key:2,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},es={class:"mb-4 flex items-center justify-between"},ss={class:"space-y-3"},as={class:"flex items-center justify-between"},rs={class:"font-semibold text-gray-800 dark:text-white/90"},os={class:"flex items-center justify-between"},ns={class:"font-semibold text-gray-800 dark:text-white/90"},is={class:"flex items-center justify-between"},ls={class:"font-semibold text-gray-800 dark:text-white/90"},ds={class:"flex items-center justify-between"},cs={class:"font-semibold text-gray-800 dark:text-white/90"},gs={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},us={class:"mb-4 flex items-center justify-between"},ms={class:"space-y-3"},xs={class:"flex items-center justify-between"},ys={class:"font-semibold text-gray-800 dark:text-white/90"},bs={key:0,class:"flex items-center justify-between"},ps={class:"font-semibold text-gray-800 dark:text-white/90"},vs={key:1,class:"flex items-center justify-between"},_s={class:"font-semibold text-gray-800 dark:text-white/90"},hs={class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},fs={class:"mb-4 flex items-center justify-between"},ks={class:"space-y-3"},ws={class:"flex items-center justify-between"},$s={class:"font-semibold text-gray-800 dark:text-white/90"},js={class:"flex items-center justify-between"},Ds={class:"font-semibold text-gray-800 dark:text-white/90"},Ts={key:3,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},Cs={class:"mb-4 flex items-center justify-between"},Ps={class:"space-y-3"},Ks={class:"flex items-center justify-between"},Is={class:"font-semibold text-gray-800 dark:text-white/90"},Rs={class:"flex items-center justify-between"},As={class:"font-semibold text-gray-800 dark:text-white/90"},Bs={class:"flex items-center justify-between"},Ms={class:"font-semibold text-gray-800 dark:text-white/90"},Ns={class:"flex items-center justify-between"},Fs={class:"font-semibold text-gray-800 dark:text-white/90"},Ls={key:4,class:"rounded-2xl border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-white/[0.03]"},Hs={class:"mb-4 flex items-center justify-between"},Ss={class:"space-y-3"},Es={class:"flex items-center justify-between"},Us={class:"font-semibold text-gray-800 dark:text-white/90"},qs={class:"flex items-center justify-between"},zs={class:"font-semibold text-gray-800 dark:text-white/90"},Os={__name:"Dashboard",setup(P){const y=m(!0),n=m("user"),o=m({company:{landingProfile:0,landingKegiatan:0,landingProgram:0,landingProposal:0,landingBulletin:0},administrasi:{kantorCabang:0,program:0,jabatan:0,pangkat:0,gaji:0,sop:0},konten:{programKami:0,profileKami:0,proposalData:0,bulletinData:0},userKepegawaian:{karyawan:0,mitra:0,donatur:0},operasional:{absensi:0,remunerasi:0},keuangan:{transaksi:0,penyaluran:0,pengajuanDana:0,total:0},laporan:{laporanTransaksi:0,laporanKeuangan:0}}),x=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),u=m({by_jabatan:[],timeseries:[]}),b=m(30),f=m([]),k=m({}),v=async()=>{try{const a=await fetch(`/admin/api/dashboard/stats?days=${b.value}`,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(a.ok){const e=await a.json();if(e.success&&e.data&&e.data.transactions){u.value=e.data.transactions;const c=(u.value.timeseries||[]).map(l=>l.count??l.value??0),r=(u.value.timeseries||[]).map(l=>l.date||l.label||"");c.length?(f.value=[{name:"Transaksi",data:c}],k.value={chart:{toolbar:{show:!1},zoom:{enabled:!1}},stroke:{curve:"smooth",width:2},xaxis:{categories:r,labels:{style:{colors:"#6B7280"}}},yaxis:{labels:{formatter:l=>l},forceNiceScale:!0},tooltip:{y:{formatter:l=>`${l}`}},colors:["#06B6D4"],markers:{size:0}}):f.value=[]}}}catch(a){console.error("Error loading transaction stats:",a)}},_=async()=>{try{const a=await fetch("/admin/api/user",{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(a.ok){const e=await a.json();if(e.success&&e.user){if(n.value&&n.value!=="user")return;if(e.user.is_admin)n.value="admin";else{const c=e.user.role&&e.user.role.name?(e.user.role.name||"").toLowerCase().trim():"";c.includes("admin cabang")||c.includes("admincabang")||c.includes("admin-cabang")?n.value="admin_cabang":c.includes("fundr")?n.value="fundraising":c.includes("mitra")?n.value="mitra":(Array.isArray(e.user.permissions)&&e.user.permissions.includes("view transaksi")||!n.value||n.value==="user")&&(n.value="user")}}}}catch(a){console.error("Error fetching user:",a)}},i=async()=>{y.value=!0;try{const a=await fetch("/admin/api/dashboard/stats",{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Accept:"application/json"},credentials:"same-origin"});if(a.ok){const e=await a.json();e.success&&e.data&&(n.value=e.data.role||"user",o.value={...o.value,...e.data})}}catch(a){console.error("Error fetching dashboard stats:",a)}finally{y.value=!1}};return R(()=>{_(),i(),v()}),B(b,()=>v()),(a,e)=>(d(),$(G,null,{default:H(()=>{var c,r,l;return[t("div",le,[t("div",null,[e[1]||(e[1]=t("h1",{class:"mb-2 font-semibold text-gray-800 text-title-sm dark:text-white/90 sm:text-title-md"}," Dashboard ",-1)),t("p",de,[n.value==="admin"?(d(),g("span",ce,"Ringkasan dan statistik dari semua modul aplikasi")):(d(),g("span",ge,"Ringkasan data dan aktivitas Anda"))])]),y.value?(d(),g("div",ue,[...e[2]||(e[2]=[t("div",{class:"text-center"},[t("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-brand-500 border-r-transparent"}),t("p",{class:"mt-4 text-sm text-gray-500"},"Memuat data...")],-1)])])):(d(),g("div",me,[n.value==="fundraising"?(d(),$(vt,{key:0,days:b.value},null,8,["days"])):n.value==="admin_cabang"?(d(),$(Jt,{key:1})):n.value==="mitra"?(d(),$(ie,{key:2})):(d(),g("div",xe,[n.value==="admin"?(d(),g("div",ye,[t("div",be,[e[5]||(e[5]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Transaksi",-1)),t("div",pe,[e[4]||(e[4]=t("label",{class:"text-sm text-gray-500"},"Rentang",-1)),M(t("select",{"onUpdate:modelValue":e[0]||(e[0]=j=>b.value=j),onChange:v,class:"h-9 rounded-lg border border-gray-300 bg-white px-3 text-sm"},[...e[3]||(e[3]=[t("option",{value:7},"7 Hari",-1),t("option",{value:30},"30 Hari",-1),t("option",{value:90},"90 Hari",-1)])],544),[[N,b.value,void 0,{number:!0}]])])]),t("div",ve,[f.value.length?(d(),$(h(C),{key:0,type:"line",height:"220",options:k.value,series:f.value},null,8,["options","series"])):p("",!0)]),t("div",_e,[(d(!0),g(K,null,I(u.value.by_jabatan,j=>(d(),g("div",{key:j.jabatan,class:"rounded-lg border border-gray-100 p-4"},[t("div",he,[t("div",null,[t("div",fe,s(j.jabatan),1),t("div",ke,s(j.count)+" transaksi",1)]),t("div",we,[e[6]||(e[6]=t("div",{class:"text-sm text-gray-500"},"Total",-1)),t("div",$e,s(x(j.total)),1)])])]))),128))])])):p("",!0),t("div",je,[n.value==="admin"?(d(),g("div",De,[t("div",Te,[e[7]||(e[7]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Company",-1)),T(h(S),{class:"h-6 w-6 text-brand-500"})]),t("div",Ce,[t("div",Pe,[e[8]||(e[8]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Profile",-1)),t("span",Ke,s(o.value.company.landingProfile||0),1)]),t("div",Ie,[e[9]||(e[9]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Kegiatan",-1)),t("span",Re,s(o.value.company.landingKegiatan||0),1)]),t("div",Ae,[e[10]||(e[10]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Program",-1)),t("span",Be,s(o.value.company.landingProgram||0),1)]),t("div",Me,[e[11]||(e[11]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Proposal",-1)),t("span",Ne,s(o.value.company.landingProposal||0),1)]),t("div",Fe,[e[12]||(e[12]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Landing Bulletin",-1)),t("span",Le,s(o.value.company.landingBulletin||0),1)])])])):p("",!0),n.value==="admin"?(d(),g("div",He,[t("div",Se,[e[13]||(e[13]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Administrasi",-1)),T(h(E),{class:"h-6 w-6 text-brand-500"})]),t("div",Ee,[t("div",Ue,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Kantor Cabang",-1)),t("span",qe,s(o.value.administrasi.kantorCabang||0),1)]),t("div",ze,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Program",-1)),t("span",Ve,s(o.value.administrasi.program||0),1)]),t("div",Xe,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jabatan",-1)),t("span",Ge,s(o.value.administrasi.jabatan||0),1)]),t("div",Oe,[e[17]||(e[17]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Pangkat",-1)),t("span",We,s(o.value.administrasi.pangkat||0),1)]),t("div",Je,[e[18]||(e[18]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Gaji",-1)),t("span",Qe,s(o.value.administrasi.gaji||0),1)]),t("div",Ye,[e[19]||(e[19]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"SOP",-1)),t("span",Ze,s(o.value.administrasi.sop||0),1)])])])):p("",!0),n.value==="admin"?(d(),g("div",ts,[t("div",es,[e[20]||(e[20]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Konten & Publikasi",-1)),T(h(U),{class:"h-6 w-6 text-brand-500"})]),t("div",ss,[t("div",as,[e[21]||(e[21]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Program Kami",-1)),t("span",rs,s(o.value.konten.programKami||0),1)]),t("div",os,[e[22]||(e[22]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Profile Kami",-1)),t("span",ns,s(o.value.konten.profileKami||0),1)]),t("div",is,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Proposal Data",-1)),t("span",ls,s(o.value.konten.proposalData||0),1)]),t("div",ds,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Bulletin Data",-1)),t("span",cs,s(o.value.konten.bulletinData||0),1)])])])):p("",!0),t("div",gs,[t("div",us,[e[25]||(e[25]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"User & Kepegawaian",-1)),T(h(q),{class:"h-6 w-6 text-brand-500"})]),t("div",ms,[t("div",xs,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Karyawan",-1)),t("span",ys,s(((c=o.value.userKepegawaian)==null?void 0:c.karyawan)||0),1)]),n.value==="admin"?(d(),g("div",bs,[e[27]||(e[27]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Mitra",-1)),t("span",ps,s(((r=o.value.userKepegawaian)==null?void 0:r.mitra)||0),1)])):p("",!0),n.value==="admin"?(d(),g("div",vs,[e[28]||(e[28]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Donatur",-1)),t("span",_s,s(((l=o.value.userKepegawaian)==null?void 0:l.donatur)||0),1)])):p("",!0)])]),t("div",hs,[t("div",fs,[e[29]||(e[29]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Operasional",-1)),T(h(z),{class:"h-6 w-6 text-brand-500"})]),t("div",ks,[t("div",ws,[e[30]||(e[30]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Absensi",-1)),t("span",$s,s(o.value.operasional.absensi||0),1)]),t("div",js,[e[31]||(e[31]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Remunerasi",-1)),t("span",Ds,s(o.value.operasional.remunerasi||0),1)])])]),n.value==="admin"?(d(),g("div",Ts,[t("div",Cs,[e[32]||(e[32]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Keuangan",-1)),T(h(V),{class:"h-6 w-6 text-brand-500"})]),t("div",Ps,[t("div",Ks,[e[33]||(e[33]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Transaksi",-1)),t("span",Is,s(o.value.keuangan.transaksi||0),1)]),t("div",Rs,[e[34]||(e[34]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Penyaluran",-1)),t("span",As,s(o.value.keuangan.penyaluran||0),1)]),t("div",Bs,[e[35]||(e[35]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Pengajuan Dana",-1)),t("span",Ms,s(o.value.keuangan.pengajuanDana||0),1)]),t("div",Ns,[e[36]||(e[36]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Total Keuangan",-1)),t("span",Fs,s(x(o.value.keuangan.total||0)),1)])])])):p("",!0),n.value==="admin"?(d(),g("div",Ls,[t("div",Hs,[e[37]||(e[37]=t("h3",{class:"font-semibold text-gray-800 text-lg dark:text-white/90"},"Laporan",-1)),T(h(X),{class:"h-6 w-6 text-brand-500"})]),t("div",Ss,[t("div",Es,[e[38]||(e[38]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Laporan Transaksi",-1)),t("span",Us,s(o.value.laporan.laporanTransaksi||0),1)]),t("div",qs,[e[39]||(e[39]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Laporan Keuangan",-1)),t("span",zs,s(o.value.laporan.laporanKeuangan||0),1)])])])):p("",!0)])]))]))])]}),_:1}))}};export{Os as default};
